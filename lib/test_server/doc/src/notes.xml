<?xml version="1.0" encoding="latin1" ?>
<!DOCTYPE chapter SYSTEM "chapter.dtd">

<chapter>
  <header>
    <copyright>
      <year>2004</year><year>2011</year>
      <holder>Ericsson AB. All Rights Reserved.</holder>
    </copyright>
    <legalnotice>
      The contents of this file are subject to the Erlang Public License,
      Version 1.1, (the "License"); you may not use this file except in
      compliance with the License. You should have received a copy of the
      Erlang Public License along with this software. If not, it can be
      retrieved online at http://www.erlang.org/.

      Software distributed under the License is distributed on an "AS IS"
      basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See
      the License for the specific language governing rights and limitations
      under the License.

    </legalnotice>

    <title>APPLICATION Release Notes</title>
    <prepared>Peter Andersson</prepared>
    <responsible>Peter Andersson</responsible>
    <docno></docno>
    <approved></approved>
    <checked></checked>
    <date>2007-11-30</date>
    <rev>A</rev>
    <file>notes.xml</file>
  </header>

<section><title>Test_Server 3.4.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    An error in how comments are colored in the test suite
	    overview html log file has been corrected. As result, a
	    new framework callback function, format_comment/1, has
	    been introduced.</p>
          <p>
	    Own Id: OTP-9237</p>
        </item>
        <item>
          <p>
	    Test Server did not release SASL TTY handlers
	    (sasl_report_tty_h and error_logger_tty_h) properly after
	    each test run. This error has been fixed.</p>
          <p>
	    Own Id: OTP-9311</p>
        </item>
        <item>
          <p>
	    Automatically generated init- and end-configuration
	    functions for test case groups caused incorrect execution
	    order of test cases. This has been corrected.</p>
          <p>
	    Own Id: OTP-9369</p>
        </item>
        <item>
          <p>
	    If ct:log/2 was called with bad arguments, this could
	    cause the Common Test IO handling process to crash. This
	    fault has been corrected.</p>
          <p>
	    Own Id: OTP-9371 Aux Id: OTP-8933 </p>
        </item>
        <item>
          <p>
	    A bug has been fixed that made Test Server call the
	    end_tc/3 framework function with an incorrect module name
	    as first argument.</p>
          <p>
	    Own Id: OTP-9379 Aux Id: seq11863 </p>
        </item>
        <item>
          <p>
	    If end_per_testcase caused a timetrap timeout, the actual
	    test case status was discarded and the test case logged
	    as successful (even if the case had actually failed
	    before the call to end_per_testcase). This fault has been
	    fixed.</p>
          <p>
	    Own Id: OTP-9397</p>
        </item>
        <item>
          <p>
	    If a timetrap timeout occured during execution of of a
	    function in a lib module (i.e. a function called directly
	    or indirectly from a test case), the Suite argument in
	    the end_tc/3 framework callback function would not
	    correctly contain the name of the test suite, but the lib
	    module. (This would only happen if the lib module was
	    compiled with ct.hrl included). This error has been
	    solved.</p>
          <p>
	    Own Id: OTP-9398</p>
        </item>
        <item>
          <p>
	    Add a proplist() type</p>
          <p>
	    Recently I was adding specs to an API and found that
	    there is no canonical proplist() type defined. (Thanks to
	    Ryan Zezeski)</p>
          <p>
	    Own Id: OTP-9499</p>
        </item>
        <item>
	    <p> XML files have been corrected. </p>
          <p>
	    Own Id: OTP-9550 Aux Id: OTP-9541 </p>
        </item>
        <item>
          <p>
	    If a test suite would start with a test case group
	    defined without the init_per_group/2 and end_per_group/2
	    function, init_per_suite/1 would not execute initially
	    and logging of the test run would fail. This error has
	    been fixed.</p>
          <p>
	    Own Id: OTP-9584</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    A new option, 'logopts', has been introduced, to make it
	    possible to modify some aspects of the logging behaviour
	    in Common Test (or Test Server). For example, whenever an
	    io printout is made, test_server adds newline (\n) to the
	    end of the output string. This may not always be a
	    preferred action and can therefore be disabled by means
	    of "ct_run ... -logopts no_nl" (or ct:run_test([...,
	    {logopts,[no_nl]}])). A new framework callback function,
	    get_logopts/0, has been introduced (see the ct_framework
	    module for details).</p>
          <p>
	    Own Id: OTP-9372 Aux Id: OTP-9396 </p>
        </item>
        <item>
          <p>
	    A new option, 'logopts', has been introduced, to make it
	    possible to modify some aspects of the logging behaviour
	    in Common Test (or Test Server). For example, if the html
	    version of the test suite source code should not be
	    generated during the test run (and consequently be
	    unavailable in the log file system), the feature may be
	    disabled by means of "ct_run ... -logopts no_src" (or
	    ct:run_test([..., {logopts,[no_src]}])). A new framework
	    callback function, get_logopts/0, has been introduced
	    (see the ct_framework module for details).</p>
          <p>
	    Own Id: OTP-9396 Aux Id: seq11869, OTP-9372 </p>
        </item>
        <item>
          <p>
	    It is now possible to use a tuple {M,F,A}, or a fun, as
	    timetrap specification in the suite info function or test
	    case info functions. The function must return a valid
	    timeout value, as documented in the common_test man page
	    and in the User's Guide.</p>
          <p>
	    Own Id: OTP-9501 Aux Id: seq11894 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.4.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    It was previously not possible to use timetrap value
	    'infinity' with ct:timetrap/1. This has been fixed.</p>
          <p>
	    Own Id: OTP-9159</p>
        </item>
        <item>
          <p>
	    A bug that made it impossible to cancel the previous
	    timetrap when calling ct:timetrap/1 has been corrected.</p>
          <p>
	    Own Id: OTP-9233 Aux Id: OTP-9159 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    When running tests with auto-compilation disabled, Common
	    Test could only display the test suite source code on
	    html format in the test case log if the source file was
	    located in the same directory as the pre-compiled suite.
	    This has been modified so that Common Test now tries to
	    locate the source file by means of the test suite module
	    info (Suite:module_info/1). As a result, a suite may now
	    be compiled to a different output directory (e.g.
	    $MYTEST/bin) than the source code directory (e.g.
	    $MYTEST/src), without the source-code-to-html generation
	    being affected.</p>
          <p>
	    Own Id: OTP-9138</p>
        </item>
        <item>
          <p>
	    It is now possible to return a tuple {fail,Reason} from
	    init_per_testcase/2. The result is that the associated
	    test case gets logged as failed without ever executing.</p>
          <p>
	    Own Id: OTP-9160 Aux Id: seq11502 </p>
        </item>
        <item>
          <p>
	    Added DragonflyBSD check in test_server configure.</p>
          <p>
	    Own Id: OTP-9249</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.4.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Updated the ts*.config files to contain information
	    relevant to testing Erlang/OTP in an open source
	    environment.</p>
          <p>
	    Own Id: OTP-9017</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Alpha release of Common Test Hooks (CTH). CTHs allow the
	    users of common test to abtract out common behaviours
	    from test suites in a much more elegant and flexible way
	    than was possible before. Note that the addition of this
	    feature may introduce minor changes in the undocumented
	    behaviour of the interface inbetween common_test and
	    test_server.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-8851</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.4.2</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>Miscellaneous updates</p>
          <p>
	    Own Id: OTP-8976</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.4.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Returning {return_group_result,failed} from end_per_group
	    in a group that is part of a sequence, did not cause the
	    proceeding cases (or groups) to get skipped. This has
	    been fixed.</p>
          <p>
	    Own Id: OTP-8753 Aux Id: seq11644 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Common Test has been updated to handle start options and
	    test specification terms for test case groups (and test
	    cases in groups). Also, an option named 'label', has been
	    added that associates the test run with a name that
	    Common Test prints in the overview HTML logs.</p>
          <p>
	    Own Id: OTP-8725 Aux Id: OTP-8727 </p>
        </item>
        <item>
          <p>
	    It is now possible to skip all tests in a suite, or a
	    group, by returning {fail,Reason} from the end_tc/5
	    framework function for init_per_suite, or init_per_group.</p>
          <p>
	    Own Id: OTP-8805 Aux Id: seq11664 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Returning {fail,Reason} from the framework end_tc
	    function was not handled properly by Test Server for all
	    test suite functions.</p>
          <p>
	    Own Id: OTP-8492 Aux Id: seq11502 </p>
        </item>
        <item>
          <p>
	    If the framework end_tc function would hang and get
	    aborted by Test Server, there was no indication of
	    failure in the logs. This has been fixed.</p>
          <p>
	    Own Id: OTP-8682 Aux Id: seq11504 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    It is now possible for the Test Server framework end_tc
	    function to change the status of the test case from ok or
	    auto-skipped to failed by returning {fail,Reason}.</p>
          <p>
	    Own Id: OTP-8495 Aux Id: seq11502 </p>
        </item>
        <item>
          <p>
	    Test Server will now call the end_per_testcase/2 function
	    even if the test case has been terminated explicitly
	    (with abort_current_testcase/1), or after a timetrap
	    timeout. Under these circumstances the return value of
	    end_per_testcase is completely ignored. Therefore the
	    function will not be able to change the reason for test
	    case termination by returning {fail,Reason}, nor will it
	    be able to save data with {save_config,Data}.</p>
          <p>
	    Own Id: OTP-8500 Aux Id: seq11521 </p>
        </item>
        <item>
          <p>
	    Previously, a repeat property of a test case group
	    specified the number of times the group should be
	    repeated after the main test run. I.e. {repeat,N} would
	    case the group to execute 1+N times. To be consistent
	    with the behaviour of the run_test repeat option, this
	    has been changed. N now specifies the absolute number of
	    executions instead.</p>
          <p>
	    Own Id: OTP-8689 Aux Id: seq11502 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.3.6</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The Test Server parse transform did not handle bit string
	    comprehensions. This has been fixed.</p>
          <p>
	    Own Id: OTP-8458 Aux Id: OTP-8311 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The tc_status value in the Config list for a test case
	    that has failed because of a timetrap timeout, has
	    changed from {tc_status,timeout} to
	    {tc_status,timetrap_timeout}.</p>
          <p>
	    Own Id: OTP-8302</p>
        </item>
        <item>
	    <p>The documentation is now possible to build in an open
	    source environment after a number of bugs are fixed and
	    some features are added in the documentation build
	    process. </p>
	    <p>- The arity calculation is updated.</p>
	    <p>- The module prefix used in the function names for
	    bif's are removed in the generated links so the links
	    will look like
	    "http://www.erlang.org/doc/man/erlang.html#append_element-2"
	    instead of
	    "http://www.erlang.org/doc/man/erlang.html#erlang:append_element-2".</p>
	    <p>- Enhanced the menu positioning in the html
	    documentation when a new page is loaded.</p>
	    <p>- A number of corrections in the generation of man
	    pages (thanks to Sergei Golovan)</p>
	    <p>- The legal notice is taken from the xml book file so
	    OTP's build process can be used for non OTP
	    applications.</p>
          <p>
	    Own Id: OTP-8343</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.3.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    If the init_per_testcase/2 function fails, the test case
	    now gets marked and counted as auto skipped, not user
	    skipped (which would previously happen).</p>
          <p>
	    Own Id: OTP-8289</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The documentation is now built with open source tools
	    (xsltproc and fop) that exists on most platforms. One
	    visible change is that the frames are removed.</p>
          <p>
	    Own Id: OTP-8201</p>
        </item>
        <item>
          <p>
	    It is now possible to fail a test case from the
	    end_per_testcase/2 function, by returning {fail,Reason}.</p>
          <p>
	    Own Id: OTP-8284</p>
        </item>
        <item>
          <p>
	    It is now possible to fail a test case by having the
	    end_tc/3 framework function return {fail,Reason} for the
	    test case.</p>
          <p>
	    Own Id: OTP-8285</p>
        </item>
        <item>
          <p>
	    The test_server framework API (e.g. the end_tc/3
	    function) has been modified. See the test_server_ctrl
	    documentation for details.</p>
          <p>
	    Own Id: OTP-8286 Aux Id: OTP-8285, OTP-8287 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.3.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    When running a suite starting with a test case group,
	    Test Server crashed if init_per_suite/1 exited or
	    returned skip. This has been fixed.</p>
          <p>
	    Own Id: OTP-8105 Aux Id: OTP-8089 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Various updates and fixes in Common Test and Test Server.</p>
          <p>
	    Own Id: OTP-8045 Aux Id: OTP-8089,OTP-8105,OTP-8163 </p>
        </item>
        <item>
          <p>
	    Errors in coverage data collection and analysis were
	    difficult to detect. The logging has been improved so
	    that more information about e.g. imported and missing
	    modules is printed to the html log files.</p>
          <p>
	    Own Id: OTP-8163 Aux Id: seq11374 </p>
        </item>
        <item>
          <p>
	    The Common Test HTML overview pages have been improved.
	    It is now possible to see if a test case has been skipped
	    explicitly or because a configuration function has
	    failed. Also, the history page (all_runs.html) now has
	    scrolling text displaying the test names. The old format
	    (showing names as a truncated string) can still be
	    generated by means of the flag/option 'basic_html'.</p>
          <p>
	    Own Id: OTP-8177</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.3.2</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Various corrections and improvements of Common Test and
	    Test Server.</p>
          <p>
	    Own Id: OTP-7981</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.3.1</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Minor updates and corrections.</p>
          <p>
	    Own Id: OTP-7897</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.3</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The conf case in Test Server has been extended with
	    properties that make it possible to execute test cases in
	    parallel, in sequence and in shuffled order. It is now
	    also possible to repeat test cases according to different
	    criterias. The properties can be combined, making it
	    possible to e.g. repeat a conf case a certain number of
	    times and execute the test cases in different (random)
	    order every time. The properties are specified in a list
	    in the conf case definition: {conf, Properties, InitCase,
	    TestCases, EndCase}. The available properties are:
	    parallel, sequence, shuffle, repeat, repeat_until_all_ok,
	    repeat_until_any_ok, repeat_until_any_fail,
	    repeat_until_all_fail.</p>
          <p>
	    Own Id: OTP-7511 Aux Id: OTP-7839 </p>
        </item>
        <item>
	    <p>The test server starts Cover on nodes of the same
	    version as the test server itself only.</p>
          <p>
	    Own Id: OTP-7699</p>
        </item>
        <item>
          <p>
	    The Erlang mode for Emacs has been updated with new and
	    modified skeletons for Common Test and TS. Syntax for
	    test case groups in Common Test (and conf cases with
	    properties in TS) has been added and a new minimal Common
	    Test suite skeleton has been introduced.</p>
          <p>
	    Own Id: OTP-7856</p>
        </item>
      </list>
    </section>

</section>
<section><title>Test_Server 3.2.4.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
            The step functionality in Common Test (based on
            interaction with Debugger) was broken. This has been
            fixed, and some new step features have also been added.
            Please see the Common Test User's Guide for details.</p>
          <p>
            Own Id: OTP-7800 Aux Id: seq11106 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.2.4</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Miscellaneous updates.</p>
          <p>
	    Own Id: OTP-7527</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.2.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    When a testcase terminated due to a timetrap, io sent to
	    the group leader from framework:end_tc/3 (using
	    ct:pal/2/3 or ct:log/2/3) would cause deadlock. This has
	    been fixed.</p>
          <p>
	    Own Id: OTP-7447 Aux Id: seq11010 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Various updates and improvements, plus some minor bug
	    fixes, have been implemented in Common Test and Test
	    Server.</p>
          <p>
	    Own Id: OTP-7112</p>
        </item>
        <item>
          <p>
	    It is now possible, by means of the new function
	    ct:abort_current_testcase/1 or
	    test_server_ctrl:abort_current_testcase/1, to abort the
	    currently executing test case.</p>
          <p>
	    Own Id: OTP-7518 Aux Id: OTP-7112 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.2.2</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p><c>erlang:system_info/1</c> now accepts the
	    <c>logical_processors</c>, and <c>debug_compiled</c>
	    arguments. For more info see the, <c>erlang(3)</c>
	    documentation.</p> <p>The scale factor returned by
	    <c>test_server:timetrap_scale_factor/0</c> is now also
	    effected if the emulator uses a larger amount of
	    scheduler threads than the amount of logical processors
	    on the system. </p>
          <p>
	    Own Id: OTP-7175</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.2.1</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    When init_per_suite or end_per_suite terminated due to
	    runtime failure, test_server failed to format the line
	    number information properly and crashed. This error has
	    now been fixed.</p>
          <p>
	    Own Id: OTP-7091</p>
        </item>
      </list>
    </section>

</section>

<section><title>Test_Server 3.2.0</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Test Server is a portable test server for automated
	    application testing. The server can run test suites on
	    local or remote targets and log progress and results to
	    HTML pages. The main purpose of Test Server is to act as
	    engine inside customized test tools. A callback interface
	    for such framework applications is provided.</p>
          <p>
	    Own Id: OTP-6989</p>
        </item>
      </list>
    </section>

</section>

</chapter>

