<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE chapter SYSTEM "chapter.dtd">

<chapter>
  <header>
    <copyright>
      <year>2004</year><year>2023</year>
      <holder>Ericsson AB. All Rights Reserved.</holder>
    </copyright>
    <legalnotice>
      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at
 
          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.

    </legalnotice>

    <title>Kernel Release Notes</title>
    <prepared></prepared>
    <docno></docno>
    <date></date>
    <rev></rev>
    <file>notes.xml</file>
  </header>
  <p>This document describes the changes made to the Kernel application.</p>

<section><title>Kernel 9.0</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fixed a bug where duplicate keys were allowed in the .app
	    file of an application. Duplicate keys are now rejected
	    and the application will not start if they exist.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-18210 Aux Id: GH-5877 PR-5878 </p>
        </item>
        <item>
          <p>
	    Fix inconsistent handling in logger_formatter of the
	    branched values in conditional branches. For example
	    using <c>msg</c> in a conditional branch would not be
	    formatted as it should before this fix.</p>
          <p>
	    Own Id: OTP-18225 Aux Id: PR-6036 </p>
        </item>
        <item>
          <p>
	    Fix the logger_std_h handler to log to standard_error if
	    logging to standard_io fails for any reason.</p>
          <p>
	    Own Id: OTP-18226 Aux Id: PR-6253 </p>
        </item>
        <item>
          <p>
	    Fix the TLS distribution to work when starting Erlang in
	    embedded mode and a connection is done before kernel is
	    fully started.</p>
          <p>
	    Own Id: OTP-18248 Aux Id: PR-6227 GH-6085 </p>
        </item>
        <item>
          <p>
	    erl <c>-remsh</c> has been improved to provide better
	    error reasons and work when using a shell without
	    terminal support (that is an "oldshell").</p>
          <p>
	    Own Id: OTP-18271 Aux Id: PR-6279 </p>
        </item>
        <item>
          <p>
	    Fix logging of log events generated before kernel is
	    started to not fail if the code for formatting those log
	    messaged have not yet been loaded.</p>
          <p>
	    Own Id: OTP-18286 Aux Id: PR-5955 </p>
        </item>
        <item>
	    <p> <c>proc_lib:start*/*</c> has become synchronous when
	    the started process fails. This requires that a failing
	    process use a new function <c>proc_lib:init_fail/2,3</c>,
	    or exits, to indicate failure. All OTP behaviours have
	    been fixed to do this. </p><p> All these start functions
	    now consume the <c>'EXIT'</c> message from a process link
	    for all error returns. Previously it was only the
	    <c>start_link/*</c> functions that did this, and only
	    when the started function exited, not when it used
	    <c>init_ack/1,2</c> or <c>init_fail/2,3</c> to create the
	    return value. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-18471 Aux Id: GH-6339, PR-6843 </p>
        </item>
        <item>
	    <p>Fixed a bug where <c>file:read(standard_io, ...)</c>
	    unexpectedly returned <c>eof</c> in binary mode.</p>
          <p>
	    Own Id: OTP-18486 Aux Id: PR-6881 </p>
        </item>
        <item>
          <p>
	    Return type for <c>seq_trace:get_token/1</c> fixed.</p>
          <p>
	    Own Id: OTP-18528 Aux Id: PR-7009 </p>
        </item>
        <item>
          <p>
	    Looking up, connecting to and sending to a host with an
	    empty name is now handled by trying to look up the
	    address of the root domain, which fails. Previously some
	    of these operations caused an internal exception, which
	    contradicted type specifications.</p>
          <p>
	    Own Id: OTP-18543 Aux Id: GH-6353 </p>
        </item>
        <item>
          <p>
	    Replaced a regex with a special case handling of ANSI
	    Select Graphic Rendition escape characters, to speed up
	    io output that make use of these escape sequences.</p>
          <p>
	    Own Id: OTP-18547 Aux Id: PR-7092 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>The Erlang shell has been improved to support the
	    following features:</p> <list> <item>Auto-complete
	    variables, record names, record field names, map keys,
	    function parameter types and filenames.</item> <item>Open
	    external editor in the shell (with C-o) to edit the
	    current expression in an editor.</item> <item>Support
	    defining records (with types), functions and function
	    typespecs, and custom types in the shell.</item> <item>Do
	    not save pager commands, and input to io:getline in
	    history.</item> </list>
          <p>
	    Own Id: OTP-14835 Aux Id: PR-5924 </p>
        </item>
        <item>
	    <p>The TTY/terminal subsystem has been rewritten by
	    moving more code to Erlang from the old linked-in driver
	    and implementing all the I/O primitives needed in a NIF
	    instead. </p><p> On Unix platforms the user should not
	    notice a lot of difference, besides better handling of
	    unicode characters and fixing of some long standing bugs.
	    </p><p> Windows users will notice that erl.exe has the
	    same functionality as a normal Unix shell and that
	    werl.exe has been removed and replaced with a symlink to
	    erl.exe. This makes the Windows Erlang terminal
	    experience identical to that of Unix. </p><p> The
	    re-write brings with it a number of bug fixes and feature
	    additions:</p> <list> <item>The TTY is now reset when
	    Erlang exits, fixing zsh to not break when terminating an
	    Erlang session.</item> <item><c>standard_error</c> now
	    uses the same unicode mode as <c>standard_io</c>.</item>
	    <item>Hitting backspace when searching the shell history
	    with an empty search string no longer breaks the
	    shell.</item> <item>Tab expansion now works on remote
	    nodes started using the JCL interface.</item> <item>It is
	    now possible to configure the shell slogan and the
	    session slogans (that is the texts that appear when you
	    start an Erlang shell). See the kernel documentation for
	    more details.</item> <item>Added shell:start_interactive
	    for starting the interactive shell from a non-interactive
	    Erlang session (for example an escript).</item> <item>On
	    Windows, when starting in detached mode the standard
	    handler are now set to <c>nul</c> devices instead of
	    being unset.</item> <item> Standard I/O now always
	    defaults to <c>unicode</c> mode if supported. Previously
	    the default was <c>latin1</c> if the runtime system had
	    been started with <c>-oldshell</c> or <c>-noshell</c>
	    (for example in an <c>escript</c>). To send raw bytes
	    over standard out, one now explicitly has to specify
	    <c>io:setopts(standard_io, [{encoding, latin1}]).</c>
	    </item> </list>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-17932 Aux Id: PR-6144 GH-3150 GH-3390 GH-4343
	    GH-4225 </p>
        </item>
        <item>
	    <p>Add support for socket on Windows.</p> <list>
	    <item>Pre release status.</item> <item>Error codes not
	    finalized.</item> <item>No explicit support for Windows
	    specific options (socket options, flags for read and
	    write).</item> <item>New async api for Windows
	    (completion). See the <c>Asynchronous calls</c> chapter
	    in the (Socket Usage) Users Guide.</item> <item>To ensure
	    platform independence, gen_tcp and gen_udp is
	    <em>intended</em> to be used (not yet updated).</item>
	    </list>
          <p>
	    Own Id: OTP-18029</p>
        </item>
        <item>
	    <p>As announced since the release of OTP 24, support
	    for:</p> <list> <item><p> version 4 node container types
	    in the external term format are now mandatory. That is,
	    references supporting up to 5 32-bit integer identifiers,
	    and process and port identifiers with support for 64-bit
	    data storage. The distribution flag <seeguide
	    marker="erts:erl_dist_protocol#DFLAG_V4_NC"><c>DFLAG_V4_NC</c></seeguide>
	    is therefor now also mandatory. OTP has since OTP 24
	    supported this. Also note that the external format
	    produced by <c>term_to_binary()</c> and
	    <c>term_to_iovec()</c> will unconditionally produce pids,
	    ports, and references supporting this larger format.
	    </p></item> <item><p> the <seeguide
	    marker="erts:erl_dist_protocol#new_link_protocol">new
	    link protocol</seeguide> introduced in OTP 23.3 is now
	    mandatory. The distribution flag <seeguide
	    marker="erts:erl_dist_protocol#DFLAG_UNLINK_ID"><c>DFLAG_UNLINK_ID</c></seeguide>
	    is therefor now also mandatory. </p></item> </list>
	    <p>Due to the above, OTP 26 nodes will refuse to connect
	    to OTP nodes from releases prior to OTP 24.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-18140 Aux Id: PR-6072 </p>
        </item>
        <item>
	    <p> Support for Kernel TLS (kTLS), has been added to the
	    SSL application, for TLS distribution (<c>-proto_dist
	    inet_tls</c>), the SSL option <c>{ktls, true}</c>. Using
	    this for general SSL sockets is uncomfortable,
	    undocumented and not recommended since it requires very
	    platform dependent raw options. </p><p> This, for now,
	    only works for some not too old Linux distributions.
	    Roughly, a kernel 5.2.0 or later with support for
	    UserLand Protocols and the kernel module <c>tls</c> is
	    required. </p>
          <p>
	    Own Id: OTP-18235 Aux Id: PR-6104, PR-5840 </p>
        </item>
        <item>
          <p>
	    Add code:get_doc/2 which adds support to fetch
	    documentation skeletons of functions using debug_info
	    chunks instead of eep48 doc chunks.</p>
          <p>
	    Own Id: OTP-18261 Aux Id: PR-5924 </p>
        </item>
        <item>
          <p>
	    The Erlang shell's auto-completion when typing <c>tab</c>
	    has been changed to happen after the editing current line
	    instead of before it.</p>
          <p>
	    This behaviour can be configured using a the
	    <c>shell_expand_location</c> STDLIB configuration
	    parameter.</p>
          <p>
	    Own Id: OTP-18278 Aux Id: PR-6260 </p>
        </item>
        <item>
          <p>
	    Typing <c>Ctrl+L</c> in a shell now clears the screen and
	    redraws the current line instead of only redrawing the
	    current line. To only redraw the current line, you must
	    now type <c>Alt+L</c>. This brings the behaviour of
	    <c>Ctrl+L</c> closer to how bash and other shells work.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-18285 Aux Id: PR-6262 </p>
        </item>
        <item>
          <p>
	    gen_server optimized by caching callback functions</p>
          <p>
	    Own Id: OTP-18305 Aux Id: PR-5831 </p>
        </item>
        <item>
          <p>
	    Prepare the <c>pg</c> communication protocol for upgrade.
	    The plan is for OTP-28 nodes to be able to use an
	    upgraded <c>pg</c> protocol while still being able to
	    talk with OTP 26 nodes.</p>
          <p>
	    Own Id: OTP-18327 Aux Id: PR-6433 </p>
        </item>
        <item>
          <p>
	    New <c>disk_log</c> log type <c>rotate</c>, where the log
	    files are compressed upon rotation.</p>
          <p>
	    Own Id: OTP-18331 Aux Id: ERIERL-870 </p>
        </item>
        <item>
	    <p>The following <seemfa
	    marker="kernel:inet#setopts/2"><c>inet:setopts/2</c></seemfa>
	    options have been introduced:</p> <taglist> <tag><seeerl
	    marker="kernel:inet#option-reuseport"><c>reuseport</c></seeerl></tag>
	    <item><p>Reuse of local port. Load balancing may or may
	    not be provided depending on underlying OS.</p></item>
	    <tag><seeerl
	    marker="kernel:inet#option-reuseport_lb"><c>reuseport_lb</c></seeerl></tag>
	    <item><p>Reuse of local port. Load balancing
	    provided.</p></item> <tag><seeerl
	    marker="kernel:inet#option-exclusiveaddruse"><c>exclusiveaddruse</c></seeerl></tag>
	    <item><p>Exclusive address/port usage on Windows. This
	    socket option is Windows specific and will silently be
	    ignored on other systems.</p></item> </taglist> <p>The
	    behavior of setting <seeerl
	    marker="kernel:inet#option-reuseaddr"><c>reuseaddr</c></seeerl>
	    on Windows have changed in a <em>backwards
	    incompatible</em> way. The underlying <c>SO_REUSEADDR</c>
	    socket option is now only set if both the <c>reusaddr</c>
	    and the <c>reuseport</c> <c>inet</c> options have been
	    set. This since the underlying <c>SO_REUSEADDR</c> socket
	    option on Windows behaves similar to how BSD behaves if
	    both the underlying socket options <c>SO_REUSEADDR</c>
	    and <c>SO_REUSEPORT</c> have been set. See the
	    documentation of the <c>reuseaddr</c> option for more
	    information.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-18344 Aux Id: PR-6522, PR-6944, OTP-18324,
	    PR-6481, GH-6461 </p>
        </item>
        <item>
          <p>
	    Replace size/1 with either tuple_size/1 or byte_size/1</p>
          <p>
	    The <c>size/1</c> BIF is not optimized by the JIT, and
	    its use can result in worse types for Dialyzer.</p>
          <p>
	    When one knows that the value being tested must be a
	    tuple, <c>tuple_size/1</c> should always be preferred.</p>
          <p>
	    When one knows that the value being tested must be a
	    binary, <c>byte_size/1</c> should be preferred. However,
	    <c>byte_size/1</c> also accepts a bitstring (rounding up
	    size to a whole number of bytes), so one must make sure
	    that the call to <c>byte_size/</c> is preceded by a call
	    to <c>is_binary/1</c> to ensure that bitstrings are
	    rejected. Note that the compiler removes redundant calls
	    to <c>is_binary/1</c>, so if one is not sure whether
	    previous code had made sure that the argument is a
	    binary, it does not harm to add an <c>is_binary/1</c>
	    test immediately before the call to <c>byte_size/1</c>.</p>
          <p>
	    Own Id: OTP-18405 Aux Id:
	    GH-6672,PR-6702,PR-6768,PR-6700,PR-6769,PR-6812,PR-6814 </p>
        </item>
        <item>
	    <p>The function <c>file:pid2name/1</c> is deprecated and
	    will be removed in Erlang/OTP 27.</p>
          <p>
	    Own Id: OTP-18419</p>
        </item>
        <item>
          <p>
	    The modules Erlang DNS resolver <c>inet_res</c> and
	    helper modules have been updated for RFC6891; to handle
	    OPT RR with DNSSEC OK (DO) bit.</p>
          <p>
	    Own Id: OTP-18442 Aux Id: PR-6786, GH-6606 </p>
        </item>
        <item>
          <p>
	    Introduced <seemfa
	    marker="kernel:application#get_supervisor/1"><c>application:get_supervisor/1</c></seemfa>.</p>
          <p>
	    Own Id: OTP-18444 Aux Id: PR-6035 </p>
        </item>
        <item>
	    <p> Handling of <c>on_load</c> modules during boot has
	    been improved by adding an extra step in the boot order
	    for embedded mode that runs all <c>on_load</c> handlers,
	    instead of relying on explicit invocation of them, later,
	    when the kernel supervision tree starts. </p><p> This is
	    mostly a code improvement and OTP internal simplification
	    to avoid future bugs and to simplify code maintenance.
	    </p>
          <p>
	    Own Id: OTP-18447</p>
        </item>
        <item>
          <p>
	    Reduce contention on the code_server by doing the code
	    preparation on the client.</p>
          <p>
	    Own Id: OTP-18448 Aux Id: PR-6736 </p>
        </item>
        <item>
          <p>
	    Added a mode to ensure_all_loaded, to start children
	    application and their dependencies concurrently.</p>
          <p>
	    Own Id: OTP-18451 Aux Id: PR-6737 </p>
        </item>
        <item>
          <p>
	    Cache OTP boot code paths, to limit how many folders that
	    are being accessed during a module lookup. Can be
	    disabled with -cache_boot_path false. OTP boot code paths
	    consists of ERL_LIB environment variables. The various
	    otp/*/ebin folders. And the {path, ...} clauses in the
	    init script.</p>
          <p>
	    Own Id: OTP-18452 Aux Id: PR-6729 </p>
        </item>
        <item>
          <p>
	    Erlang distribution code in Kernel and SSL has been
	    refactored a bit to facilitate debugging and
	    re-usability, which shouldn't have any noticeable effects
	    on behaviour or performance.</p>
          <p>
	    Own Id: OTP-18456</p>
        </item>
        <item>
          <p>
	    Add cache attribute to code path apis.</p>
          <p>
	    Added an optional cache/nocache argument to all
	    code:add_path*, code:set_path*, and code:replace_path*
	    functions. These functions will then avoid doing
	    file-accesses if they are cached. Cache can be cleared
	    with code:clear_cache/0. Added code:del_paths/1 to make
	    it easier to clear multiple paths.</p>
          <p>
	    Own Id: OTP-18466 Aux Id: PR-6832 </p>
        </item>
        <item>
          <p>
	    Deprecates <c>dbg:stop_clear/0</c> because it is simply a
	    function alias to <c>dbg:stop/0</c></p>
          <p>
	    Own Id: OTP-18478 Aux Id: GH-6903 </p>
        </item>
        <item>
          <p>
	    Improvements to code:ensure_modules_loaded/1: Previously
	    it would prepare modules and then abandon references to
	    said modules if they had on_load callbacks. This pull
	    request makes it so they keep the references around and
	    then serially load them without having to fetch the
	    object code and prepare them again.</p>
          <p>
	    Own Id: OTP-18484 Aux Id: PR-6844 </p>
        </item>
        <item>
          <p>
	    The internal DNS resolver has been updated to handle DNS
	    LOC RR:s (RFC 1876). This is an undocumented module,
	    although still used by power users. See the source code.</p>
          <p>
	    Own Id: OTP-18510 Aux Id: GH-6098, PR-6982 </p>
        </item>
        <item>
          <p>
	    Reduced memory consumption in <c>global</c> when
	    informing other nodes about lost connections.</p>
          <p>
	    Own Id: OTP-18521 Aux Id: PR-7025 </p>
        </item>
        <item>
          <p>
	    The <c>net_kernel</c>, <c>global</c>, and
	    <c>global_group</c> servers now have <seeerl
	    marker="erts:erlang#process_flag_async_dist"><i>fully
	    asynchronous distributed signaling</i></seeerl> enabled
	    all the time which prevents them from ever getting
	    blocked on send of distributed signals.</p>
          <p>
	    Documentation about blocking distributed signals has also
	    been improved.</p>
          <p>
	    Own Id: OTP-18533 Aux Id: PR-7061 </p>
        </item>
        <item>
          <p>
	    Allow IPv6 addresses as host in <c>http</c> packets
	    decoded by <c>erlang:decode_packet/3</c> and
	    <c>gen_tcp</c> packet option. The IPv6 address should be
	    enclosed within <c>[]</c> according to RFC2732.</p>
          <p>
	    Own Id: OTP-18540 Aux Id: PR-6900 </p>
        </item>
        <item>
          <p>
	    Remove deprecated functions in OTP-26</p>
          <p>
	    Own Id: OTP-18542</p>
        </item>
        <item>
          <p>
	    Removed <c>code:is_module_native/1</c> since HiPE has
	    been removed. It has since OTP 24 been deprecated and
	    scheduled for removal in OTP 26. </p>
          <p>
	    Removed <c>code:rehash/0</c> since the code path feature
	    no longer is present. It has since OTP 19 been deprecated
	    and has since OTP 24 been scheduled for removal in OTP
	    26.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-18551 Aux Id: PR-7106 </p>
        </item>
        <item>
	    <p>Added support for multiple line expressions and
	    navigation in the shell. Added new keybindings:</p>
	    <list> <item> navigate up (ctrl+up)/(alt+up) </item>
	    <item> navigate down (ctrl+down)/(alt+down) </item>
	    <item> insert newline in middle of line (alt+enter)
	    </item> <item> navigate top (alt+&lt;)/(alt+shift+up)
	    </item> <item> navigate bottom
	    (alt+&gt;)/(alt+shift+down) </item> <item> clear current
	    expression (alt+c) </item> <item> cancel search (alt+c)
	    </item> <item> opening editor on mac (option+o)/(alt+o)
	    </item> </list> <p>Modifies the prompt for new lines to
	    make it clearer that the prompt has entered multi-line
	    mode. Supports terminal with small window size, recommend
	    not go lower than 7 rows and 40 columns. Modifies the
	    search prompt to support multi-line statements. Redraw
	    the prompt after continuing from JCL menu. </p>
          <p>
	    Own Id: OTP-18575 Aux Id: PR-7169 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.5.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>Fixed a bug on Windows where
	    <c>file:read_file_info/1</c> would fail for files with
	    corrupt metadata.</p>
          <p>
	    Own Id: OTP-18348 Aux Id: GH-6356 </p>
        </item>
        <item>
          <p>
	    Accept connection setup from OTP 23 and 24 nodes that are
	    not using epmd.</p>
          <p>
	    Own Id: OTP-18404 Aux Id: GH-6595, PR-6625 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.5.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The tcp connect option 'bind_to_device' could not be used
	    with inet_backend = 'socket'. 'inet' requires value type
	    binarry() and 'socket' requires value type 'string()'.</p>
          <p>
	    Own Id: OTP-18357 Aux Id: #6509 </p>
        </item>
        <item>
          <p>
	    Minor issue processing options when calling
	    gen_tcp:connect with a sockaddr() and inet_backend =
	    socket.</p>
          <p>
	    Own Id: OTP-18358 Aux Id: #6528 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.5.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fixed shutdown crash in gen_tcp socket backend, when the
	    other end closed the socket.</p>
          <p>
	    Own Id: OTP-18270 Aux Id: #6331 </p>
        </item>
        <item>
	    <p><c>erl_tar</c> can now read gzip-compressed tar files
	    that are padded. There is a new option
	    <c>compressed_one</c> for <c>file:open/2</c> that will
	    read a single member from a gzip file,</p>
          <p>
	    Own Id: OTP-18289 Aux Id: PR-6343 </p>
        </item>
        <item>
          <p>
	    Fix <c>os:cmd</c> to not translate all exceptions thrown
	    to <c>badarg</c>. For example <c>emfile</c> from
	    <c>erlang:open_port</c> was translated to <c>badarg</c>.</p>
          <p>
	    This bug has existed since Erlang/OTP 24.</p>
          <p>
	    Own Id: OTP-18291 Aux Id: PR-6382 </p>
        </item>
        <item>
          <p>
	    Spec for function net:if_names/0 incorrect</p>
          <p>
	    Own Id: OTP-18296 Aux Id: OTP-16464 </p>
        </item>
        <item>
          <p>
	    Missing ctrl option name transation for TOS and TTL (on
	    FreeBSD) when using gen_udp with the 'socket'
	    inet_backend.</p>
          <p>
	    Own Id: OTP-18315</p>
        </item>
        <item>
          <p>
	    gen_udp:open/2 with option(s) add_membership or
	    drop_membership would drop earlier options.</p>
          <p>
	    Own Id: OTP-18323 Aux Id: #6476 </p>
        </item>
        <item>
          <p>
	    The <seemfa
	    marker="kernel:inet#setopts/2"><c>inet:setopts/2</c></seemfa>
	    <c>{reuseaddr, true}</c> option will now be ignored on
	    Windows unless the socket is an UDP socket. For more
	    information see the documentation of the <c>reuseaddr</c>
	    option part of the documentation of
	    <c>inet:setopts/2</c>.</p>
          <p>
	    Prior to OTP 25 the <c>{reuseaddr, true}</c> option was
	    ignored for all sockets on Windows, but as of OTP 25.0
	    this was changed so that it was not ignored for any
	    sockets.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-18324 Aux Id: GH-6461, PR-6481 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>The distribution socket option handling in
	    <c>inet_tcp_dist</c> has been cleaned up to clarify which
	    were mandatory and which just had default values. </p>
          <p>
	    Own Id: OTP-18293</p>
        </item>
        <item>
          <p>
	    Improve warning message format for gen_tcp_socket.</p>
          <p>
	    Own Id: OTP-18317</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.5.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Listen sockets created with the socket module, leaked
	    (erlang-) monitors.</p>
          <p>
	    Own Id: OTP-18240 Aux Id: #6285 </p>
        </item>
        <item>
          <p>
	    <seeerl marker="stdlib:peer"><c>peer</c></seeerl> nodes
	    failed to halt when the process supervising the control
	    connection crashed. When an alternative control
	    connection was used, this supervision process also quite
	    frequently crashed when the <c>peer</c> node was stopped
	    by the node that started it which caused the <c>peer</c>
	    node to linger without ever halting.</p>
          <p>
	    Own Id: OTP-18249 Aux Id: PR-6301 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fixed inconsistency bugs in <seeerl
	    marker="kernel:global"><c>global</c></seeerl> due to
	    <c>nodeup</c>/<c>nodedown</c> messages not being
	    delivered before/after traffic over connections. Also
	    fixed various other inconsistency bugs and deadlocks in
	    both <seeerl
	    marker="kernel:global_group"><c>global_group</c></seeerl>
	    and <c>global</c>.</p>
          <p>
	    As building blocks for these fixes, a new BIF <seemfa
	    marker="erts:erlang#nodes/2"><c>erlang:nodes/2</c></seemfa>
	    has been introduced and <seemfa
	    marker="kernel:net_kernel#monitor_nodes/2"><c>net_kernel:monitor_nodes/2</c></seemfa>
	    has been extended.</p>
          <p>
	    The <seecom
	    marker="erts:erl#hidden"><c>-hidden</c></seecom> and
	    <seecom
	    marker="erts:erl#connect_all"><c>-connect_all</c></seecom>
	    command line arguments did not work if multiple instances
	    were present on the command line which has been fixed.
	    The new kernel parameter <seeapp
	    marker="kernel:kernel_app#connect_all"><c>connect_all</c></seeapp>
	    has also been introduced in order to replace the
	    <c>-connect_all</c> command line argument.</p>
          <p>
	    Own Id: OTP-17934 Aux Id: PR-6007 </p>
        </item>
        <item>
          <p>
	    Fixed IPv6 multicast_if and membership socket options.</p>
          <p>
	    Own Id: OTP-18091 Aux Id: #5789 </p>
        </item>
        <item>
          <p>
	    Fixed issue with inet:getifaddrs hanging on pure IPv6
	    Windows</p>
          <p>
	    Own Id: OTP-18102 Aux Id: #5904 </p>
        </item>
        <item>
          <p>
	    The type specifications for <c>inet:getopts/2</c> and
	    <c>inet:setopts/2</c> have been corrected regarding SCTP
	    options.</p>
          <p>
	    Own Id: OTP-18115 Aux Id: PR-5939 </p>
        </item>
        <item>
          <p>
	    The type specifications for <c>inet:parse_*</c> have been
	    tightened.</p>
          <p>
	    Own Id: OTP-18121 Aux Id: PR-5972 </p>
        </item>
        <item>
          <p>
	    Fix gen_tcp:connect/3 spec to include the inet_backend
	    option.</p>
          <p>
	    Own Id: OTP-18171 Aux Id: PR-6131 </p>
        </item>
        <item>
          <p>
	    Fix bug where using a binary as the format when calling
	    <c>logger:log(Level, Format, Args)</c> (or any other
	    logging function) would cause a crash or incorrect
	    logging.</p>
          <p>
	    Own Id: OTP-18229 Aux Id: PR-6212 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add rudimentary debug feature (option) for the
	    inet-driver based sockets, such as gen_tcp and gen_udp.</p>
          <p>
	    Own Id: OTP-18032</p>
        </item>
        <item>
          <p>
	    Introduced the <c>hidden</c> and <c>dist_listen</c>
	    options to <seemfa
	    marker="kernel:net_kernel#start/2"><c>net_kernel:start/2</c></seemfa>.</p>
          <p>
	    Also documented the <seecom
	    marker="erts:erl#dist_listen"><c>-dist_listen</c></seecom>
	    command line argument which was erroneously documented as
	    a <c>kernel</c> parameter and not as a command line
	    argument.</p>
          <p>
	    Own Id: OTP-18107 Aux Id: PR-6009 </p>
        </item>
        <item>
          <p>
	    Scope and group monitoring have been introduced in
	    <seeerl marker="kernel:pg"><c>pg</c></seeerl>. For more
	    information see the documentation of <seemfa
	    marker="kernel:pg#monitor_scope/0"><c>pg:monitor_scope()</c></seemfa>,
	    <seemfa
	    marker="kernel:pg#monitor/1"><c>pg:monitor()</c></seemfa>,
	    and <seemfa
	    marker="kernel:pg#demonitor/1"><c>pg:demonitor()</c></seemfa>.</p>
          <p>
	    Own Id: OTP-18163 Aux Id: PR-6058, PR-6275 </p>
        </item>
        <item>
          <p>
	    A new function <seemfa
	    marker="kernel:global#disconnect/0"><c>global:disconnect/0</c></seemfa>
	    has been introduced with which one can cleanly disconnect
	    a node from all other nodes in a cluster of <c>global</c>
	    nodes.</p>
          <p>
	    Own Id: OTP-18232 Aux Id: OTP-17843, PR-6264 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.4.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A call to <seemfa
	    marker="net_kernel#setopts/2"><c>net_kernel:setopts(new,
	    Opts)</c></seemfa> at the same time as a connection was
	    being set up could cause a deadlock between the
	    <c>net_kernel</c> process and the process setting up the
	    connection.</p>
          <p>
	    Own Id: OTP-18198 Aux Id: GH-6129, PR-6216 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.4.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The DNS resolver <c>inet_res</c> has been fixed to ignore
	    trailing dot difference in the request domain between the
	    sent request and the received response, when validating a
	    response.</p>
          <p>
	    Own Id: OTP-18112 Aux Id: ERIERL-811 </p>
        </item>
        <item>
          <p>
	    A bug in <c>inet_res</c> has been fixed where a missing
	    internal <c>{ok,_}</c> wrapper caused
	    <c>inet_res:resolve/*</c> to return a calculated host
	    name instead of an `<c>{ok,Msg}</c> tuple, when resolving
	    an IP address or a host name that is an IP address
	    string.</p>
          <p>
	    Own Id: OTP-18122 Aux Id: GH-6015, PR-6020 </p>
        </item>
        <item>
          <p>
	    The <c>erlang:is_alive()</c> BIF could return <c>true</c>
	    before configured distribution service was available.
	    This bug was introduced in OTP 25.0 ERTS version 13.0.</p>
          <p>
	    The <c>erlang:monitor_node()</c> and
	    <c>erlang:monitor()</c> BIFs could erroneously fail even
	    though configured distribution service was available.
	    This occurred if these BIFs were called after the
	    distribution had been started using dynamic node name
	    assignment but before the name had been assigned.</p>
          <p>
	    Own Id: OTP-18124 Aux Id: OTP-17558, PR-6032 </p>
        </item>
        <item>
          <p>
	    Added the missing mandatory <c>address/0</c> callback in
	    the <c>gen_tcp_dist</c> example.</p>
          <p>
	    Own Id: OTP-18136</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The DNS resolver implementation has been rewritten to
	    validate replies more thoroughly, and a bit optimized to
	    create less garbage.</p>
          <p>
	    Own Id: OTP-17323</p>
        </item>
        <item>
          <p>
	    The socket option 'reuseaddr' is *no longer* ignored on
	    Windows.</p>
          <p>
	    Own Id: OTP-17447 Aux Id: GH-4819 </p>
        </item>
        <item>
          <p>
	    Fix bug where using the atoms <c>string</c> or
	    <c>report</c> as the format when calling
	    <c>logger:log(Level, Format, Args)</c> (or any other
	    logging function) would cause a crash or incorrect
	    logging.</p>
          <p>
	    Own Id: OTP-17551 Aux Id: GH-5071 PR-5075 </p>
        </item>
        <item>
	    <p> As of OTP 25, <c>global</c> will by default prevent
	    overlapping partitions due to network issues by actively
	    disconnecting from nodes that reports that they have lost
	    connections to other nodes. This will cause fully
	    connected partitions to form instead of leaving the
	    network in a state with overlapping partitions. </p> <p>
	    Prevention of overlapping partitions can be disabled
	    using the <seeapp
	    marker="kernel_app#prevent_overlapping_partitions"><c>prevent_overlapping_partitions</c></seeapp>
	    <c>kernel(6)</c> parameter, making <c>global</c> behave
	    like it used to do. This is, however, problematic for all
	    applications expecting a fully connected network to be
	    provided, such as for example <c>mnesia</c>, but also for
	    <c>global</c> itself. A network of overlapping partitions
	    might cause the internal state of <c>global</c> to become
	    inconsistent. Such an inconsistency can remain even after
	    such partitions have been brought together to form a
	    fully connected network again. The effect on other
	    applications that expects that a fully connected network
	    is maintained may vary, but they might misbehave in very
	    subtle hard to detect ways during such a partitioning.
	    Since you might get hard to detect issues without this
	    fix, you are <i>strongly</i> advised <i>not</i> to
	    disable this fix. Also note that this fix <i>has</i> to
	    be enabled on <i>all</i> nodes in the network in order to
	    work properly. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-17911 Aux Id: PR-5687, PR-5611, OTP-17843 </p>
        </item>
        <item>
	    <p> Starting the helper program for name resolving;
	    <c>inet_gethost</c>, has been improved to use an absolute
	    file system path to ensure that the right program is
	    started. </p><p> If the helper program can not be started
	    - the system now halts, to avoid running with a silently
	    broken name resolver. </p>
          <p>
	    Own Id: OTP-17958 Aux Id: OTP-17978 </p>
        </item>
        <item>
          <p>
	    The type specification for <c>inet_res:getbyname/2,3</c>
	    has been corrected to reflect that it can return peculiar
	    <c>#hostent{}</c> records.</p>
          <p>
	    Own Id: OTP-17986 Aux Id: PR-5412, PR-5803 </p>
        </item>
        <item>
	    <p><c>code:module_status/1</c> would always report BEAM
	    files loaded from an archive as <c>modified</c>, and
	    <c>code:modified_modules/0</c> would always return the
	    name of all modules loaded from archives.</p>
          <p>
	    Own Id: OTP-17990 Aux Id: GH-5801 </p>
        </item>
        <item>
          <p>
	    In logger fix file handler shutdown delay by using erlang
	    timers instead of the timer module's timers.</p>
          <p>
	    Own Id: OTP-18001 Aux Id: GH-5780 PR-5829 </p>
        </item>
        <item>
          <p>
	    Fix the meta data in log events generated by logger on
	    failure to not contain the original log event's meta
	    data.</p>
          <p>
	    Own Id: OTP-18003 Aux Id: PR-5771 </p>
        </item>
        <item>
          <p>
	    Fix logger file backend to re-create the log folder if it
	    has been deleted.</p>
          <p>
	    Own Id: OTP-18015 Aux Id: GH-5828 PR-5845 </p>
        </item>
        <item>
          <p>
	    [socket] Encode of sockaddr has been improved.</p>
          <p>
	    Own Id: OTP-18020</p>
        </item>
        <item>
          <p>
	    Fix <c>put_chars</c> requests to the io server with
	    incomplete unicode data to exit with
	    <c>no_translation</c> error.</p>
          <p>
	    Own Id: OTP-18070 Aux Id: PR-5885 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The net module now works on Windows.</p>
          <p>
	    Own Id: OTP-16464</p>
        </item>
        <item>
          <p>
	    An Erlang installation directory is now relocatable on
	    the file system given that the paths in the
	    installation's <c>RELEASES</c> file are paths that are
	    relative to the installations root directory. The
	    <c>`release_handler:create_RELEASES/4</c> function can
	    generate a <c>RELEASES</c> file with relative paths if
	    its <c>RootDir</c> parameter is set to the empty string.</p>
          <p>
	    Own Id: OTP-17304</p>
        </item>
        <item>
	    <p>The following distribution flags are now mandatory:
	    <c>DFLAG_BIT_BINARIES</c>, <c>DFLAG_EXPORT_PTR_TAG</c>,
	    <c>DFLAG_MAP_TAGS</c>, <c>DFLAG_NEW_FLOATS</c>, and
	    <c>DFLAG_FUN_TAGS</c>. This mainly concerns libraries or
	    application that implement the distribution protocol
	    themselves.</p>
          <p>
	    Own Id: OTP-17318 Aux Id: PR-4972 </p>
        </item>
        <item>
          <p>
	    Fix <c>os:cmd</c> to work on Android OS.</p>
          <p>
	    Own Id: OTP-17479 Aux Id: PR-4917 </p>
        </item>
        <item>
          <p>
	    The configuration files <seecom
	    marker="erts:erl"><c>.erlang</c></seecom>, <seeguide
	    marker="system/reference_manual:distributed"><c>.erlang.cookie</c></seeguide>
	    and <seeerl
	    marker="stdlib:beam_lib#.erlang.crypt"><c>.erlang.crypt</c></seeerl>
	    can now be located in the XDG Config Home directory.</p>
          <p>
	    See the documentation for each file and
	    <c>filename:basedir/2</c> for more details.</p>
          <p>
	    Own Id: OTP-17554 Aux Id: GH-5016 PR-5408 OTP-17821 </p>
        </item>
        <item>
          <p>
	    Dynamic node name improvements: <c>erlang:is_alive/0</c>
	    changed to return true for pending dynamic node name and
	    new function <c>net_kernel:get_state/0</c>.</p>
          <p>
	    Own Id: OTP-17558 Aux Id: OTP-17538, PR-5111, GH-5402 </p>
        </item>
        <item>
          <p>
	    The types for callback result types in <c>gen_statem</c>
	    has bee augmented with arity 2 types where it is possible
	    for a callback module to specify the type of the callback
	    data, so the callback module can get type validation of
	    it.</p>
          <p>
	    Own Id: OTP-17589 Aux Id: PR-4926 </p>
        </item>
        <item>
          <p>
	    The tagged tuple tests and fun-calls have been optimized
	    and are now a little bit cheaper than previously.</p>
          <p>
	    These optimizations become possible after making sure
	    that all boxed terms have at least one word allocated
	    after the arity word. This has been accomplished by
	    letting all empty tuples refer to the same empty tuple
	    literal which also reduces memory usage for empty tuples.</p>
          <p>
	    Own Id: OTP-17608</p>
        </item>
        <item>
          <p>
	    A <seeapp
	    marker="kernel:kernel_app#net_ticker_spawn_options"><c>net_ticker_spawn_options</c></seeapp>
	    <c>kernel</c> configuration parameter with which one can
	    set spawn options for the distribution channel ticker
	    processes has been introduced.</p>
          <p>
	    Own Id: OTP-17617 Aux Id: PR-5069 </p>
        </item>
        <item>
          <p>
	    The most, or at least the most used, <seeerl
	    marker="kernel:rpc"><c>rpc</c></seeerl> operations now
	    require <seeerl marker="kernel:erpc"><c>erpc</c></seeerl>
	    support in order to communicate with other Erlang nodes.
	    <c>erpc</c> was introduced in OTP 23. That is, <c>rpc</c>
	    operations against Erlang nodes of releases prior to OTP
	    23 will fail.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-17681 Aux Id: PR-5307 </p>
        </item>
        <item>
          <p>
	    The new module <c>peer</c> supersedes the <c>slave</c>
	    module. The <c>slave</c> module is now deprecated and
	    will be removed in OTP 27.</p>
          <p>
	    <c>peer</c> contains an extended and more robust API for
	    starting erlang nodes.</p>
          <p>
	    Own Id: OTP-17720 Aux Id: PR-5162 </p>
        </item>
        <item>
          <p>
	    In order to make it easier for the user to manage
	    multiple outstanding asynchronous <c>call</c> requests,
	    new functionality utilizing request identifier
	    collections have been introduced in <seetype
	    marker="kernel:erpc#request_id_collection"><c>erpc</c></seetype>,
	    <seetype
	    marker="stdlib:gen_server#request_id_collection"><c>gen_server</c></seetype>,
	    <seetype
	    marker="stdlib:gen_statem#request_id_collection"><c>gen_statem</c></seetype>,
	    and <seetype
	    marker="stdlib:gen_event#request_id_collection"><c>gen_event</c></seetype>.</p>
          <p>
	    Own Id: OTP-17784 Aux Id: PR-5792 </p>
        </item>
        <item>
	    <p>Type specifications have been added to the
	    <c>gen_server</c>, and the documentation has been updated
	    to utilize this. </p><p>This surfaced a few type
	    violations that has been corrected in <c>global</c>,
	    <c>logger_olp</c> and <c>rpc</c>. </p>
          <p>
	    Own Id: OTP-17915 Aux Id: PR-5751, GH-2375, GH-2690 </p>
        </item>
        <item>
          <p>
	    IP address validation functions <c>is_ipv4_address/1</c>,
	    <c>is_ipv6_address/1</c> and <c>is_ip_address/1</c> have
	    been added to the module <c>inet</c> in Kernel.</p>
          <p>
	    Own Id: OTP-17923 Aux Id: PR-5646 </p>
        </item>
        <item>
          <p>
	    An API for multihomed SCTP connect has been added in the
	    guise of <c>gen_sctp:connectx_init/*</c></p>
          <p>
	    Own Id: OTP-17951 Aux Id: PR-5656 </p>
        </item>
        <item>
          <p>
	    [socket] Add encoding of the field hatype of the type
	    sockaddr_ll (family 'packet').</p>
          <p>
	    Own Id: OTP-17968 Aux Id: OTP-16464 </p>
        </item>
        <item>
          <p>
	    Added support for configurable features as described in
	    EEP-60. Features can be enabled/disabled during
	    compilation with options (<c>-enable-feature Feature</c>,
	    <c>-disable-feature Feature</c> and <c>+{feature,
	    Feature, enable|disable}</c>) to <c>erlc</c> as well as
	    with directives (<c>-feature(Feature,
	    enable|disable).</c>) in the file. Similar options can be
	    used to <c>erl</c> for enabling/disabling features
	    allowed at runtime. The new <c>maybe</c> expression
	    (EEP-49) is fully supported as the feature
	    <c>maybe_expr</c>. The features support is documented in
	    the reference manual.</p>
          <p>
	    Own Id: OTP-17988</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.3.2.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Spec for function net:if_names/0 incorrect</p>
          <p>
	    Own Id: OTP-18296 Aux Id: OTP-16464 </p>
        </item>
        <item>
          <p>
	    Missing ctrl option name transation for TOS and TTL (on
	    FreeBSD) when using gen_udp with the 'socket'
	    inet_backend.</p>
          <p>
	    Own Id: OTP-18315</p>
        </item>
        <item>
          <p>
	    The tcp connect option 'bind_to_device' could not be used
	    with inet_backend = 'socket'. 'inet' requires value type
	    binarry() and 'socket' requires value type 'string()'.</p>
          <p>
	    Own Id: OTP-18357 Aux Id: #6509 </p>
        </item>
        <item>
          <p>
	    Minor issue processing options when calling
	    gen_tcp:connect with a sockaddr() and inet_backend =
	    socket.</p>
          <p>
	    Own Id: OTP-18358 Aux Id: #6528 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Improve warning message format for gen_tcp_socket.</p>
          <p>
	    Own Id: OTP-18317</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.3.2.2</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    A new function <seemfa
	    marker="kernel:global#disconnect/0"><c>global:disconnect/0</c></seemfa>
	    has been introduced with which one can cleanly disconnect
	    a node from all other nodes in a cluster of <c>global</c>
	    nodes.</p>
          <p>
	    Own Id: OTP-18232 Aux Id: OTP-17843, PR-6264 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.3.2.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A call to <seemfa
	    marker="net_kernel#setopts/2"><c>net_kernel:setopts(new,
	    Opts)</c></seemfa> at the same time as a connection was
	    being set up could cause a deadlock between the
	    <c>net_kernel</c> process and the process setting up the
	    connection.</p>
          <p>
	    Own Id: OTP-18198 Aux Id: GH-6129, PR-6216 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.3.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    inet:getopts/2 for the 'raw' option for a socket created
	    with inet-backend 'socket' failed.</p>
          <p>
	    Own Id: OTP-18078 Aux Id: GH-5930 </p>
        </item>
        <item>
          <p>
	    Corrected the behaviour of the shutdown function when
	    using with the inet_backend = socket. It was not
	    sufficiently compatible with the "old" gen_tcp.</p>
          <p>
	    Own Id: OTP-18080 Aux Id: GH-5930 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.3.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix failed accepted connection setup after previous
	    established connection from same node closed down
	    silently.</p>
          <p>
	    Own Id: OTP-17979 Aux Id: ERIERL-780 </p>
        </item>
        <item>
	    <p>Fixed a problem where typing Ctrl-R in the shell could
	    hang if there were some problem with the history log
	    file.</p>
          <p>
	    Own Id: OTP-17981 Aux Id: PR-5791 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Handling of <c>send_timeout</c> for <c>gen_tcp</c> has
	    been corrected so that the timeout is honored also when
	    sending 0 bytes.</p>
          <p>
	    Own Id: OTP-17840</p>
        </item>
        <item>
	    <p> By default <c>global</c> does <i>not</i> take any
	    actions to restore a fully connected network when
	    connections are lost due to network issues. This is
	    problematic for all applications expecting a fully
	    connected network to be provided, such as for example
	    <c>mnesia</c>, but also for <c>global</c> itself. A
	    network of overlapping partitions might cause the
	    internal state of <c>global</c> to become inconsistent.
	    Such an inconsistency can remain even after such
	    partitions have been brought together to form a fully
	    connected network again. The effect on other applications
	    that expects that a fully connected network is maintained
	    may vary, but they might misbehave in very subtle hard to
	    detect ways during such a partitioning. </p> <p> In order
	    to prevent such issues, we have introduced a <i>prevent
	    overlapping partitions</i> fix which can be enabled using
	    the <seeapp
	    marker="kernel:kernel_app#prevent_overlapping_partitions"><c>prevent_overlapping_partitions</c></seeapp>
	    <c>kernel(6)</c> parameter. When this fix has been
	    enabled, <c>global</c> will actively disconnect from
	    nodes that reports that they have lost connections to
	    other nodes. This will cause fully connected partitions
	    to form instead of leaving the network in a state with
	    overlapping partitions. Note that this fix <i>has</i> to
	    be enabled on <i>all</i> nodes in the network in order to
	    work properly. Since this quite substantially changes the
	    behavior, this fix is currently disabled by default.
	    Since you might get hard to detect issues without this
	    fix you are, however, <i>strongly</i> advised to enable
	    this fix in order to avoid issues such as the ones
	    described above. As of OTP 25 this fix will become
	    enabled by default. </p>
          <p>
	    Own Id: OTP-17843 Aux Id: ERIERL-732, PR-5611 </p>
        </item>
        <item>
          <p>
	    Fix bug where <c>logger</c> would crash when logging a
	    report including improper lists.</p>
          <p>
	    Own Id: OTP-17851</p>
        </item>
        <item>
          <p>
	    Make <c>erlang:set_cookie</c> work for dynamic node
	    names.</p>
          <p>
	    Own Id: OTP-17902 Aux Id: GH-5402, PR-5670 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add support for using socket:sockaddr_in() and
	    socket:sockaddr_in6() when using gen_sctp, gen_tcp and
	    gen_udp. This will make it possible to use Link Local
	    IPv6 addresses.</p>
          <p>
	    Own Id: OTP-17455 Aux Id: GH-4852 </p>
        </item>
        <item>
          <p>
	    A <seeapp
	    marker="kernel:kernel_app#net_tickintensity"><c>net_tickintensity</c></seeapp>
	    <c>kernel</c> parameter has been introduced. It can be
	    used to control the amount of ticks during a <seeapp
	    marker="kernel:kernel_app#net_ticktime"><c>net_ticktime</c></seeapp>
	    period.</p>
          <p>
	    A new <seemfa
	    marker="kernel:net_kernel#start/2"><c>net_kernel:start/2</c></seemfa>
	    function has also been introduced in order to make it
	    easier to add new options. The use of <seemfa
	    marker="kernel:net_kernel#start/1"><c>net_kernel:start/1</c></seemfa>
	    has been deprecated.</p>
          <p>
	    Own Id: OTP-17905 Aux Id: ERIERL-732, PR-5740 </p>
        </item>
        <item>
          <p>
	    Improve documentation for the dynamic node name feature.</p>
          <p>
	    Own Id: OTP-17918</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    socket:which_sockets( pid() ) uses wrong keyword when
	    looking up socket owner ('ctrl' instead of 'owner').</p>
          <p>
	    Own Id: OTP-17716</p>
        </item>
        <item>
          <p>
	    In epmd_ntop, the #if defined(EPMD6) conditional was
	    inverted and it was only including the IPv6-specific code
	    when EPMD6 was undefined. This was causing IPv6 addrs to
	    be interpreted as IPv4 addrs and generating nonsense IPv4
	    addresses as output.</p>
          <p>
	    Several places were incorrectly using 'num_sockets'
	    instead of 'i' to index into the iserv_addr array during
	    error logging. This would result in a read into
	    uninitialized data in the iserv_addr array.</p>
          <p>
	    Thanks to John Eckersberg for providing this fix.</p>
          <p>
	    Own Id: OTP-17730</p>
        </item>
        <item>
          <p>
	    Minor fix of the <c>erl_uds_dist</c> distribution module
	    example.</p>
          <p>
	    Own Id: OTP-17765 Aux Id: PR-5289 </p>
        </item>
        <item>
          <p>
	    A bug has been fixed for the legacy TCP socket adaption
	    module <c>gen_tcp_socket</c> where it did bind to a
	    socket address when given a file descriptor, but should
	    not.</p>
          <p>
	    Own Id: OTP-17793 Aux Id: PR-5348, OTP-17451, PR-4787,
	    GH-4680, PR-2989, OTP-17216 </p>
        </item>
        <item>
          <p>
	    Improve the error printout when <c>open_port/2</c> fails
	    because of invalid arguments.</p>
          <p>
	    Own Id: OTP-17805 Aux Id: PR-5406 </p>
        </item>
        <item>
          <p>
	    Calling socket:monitor/1 on an already closed socket
	    should succeed and result in an immediate DOWN message.
	    This has now been fixed.</p>
          <p>
	    Own Id: OTP-17806</p>
        </item>
        <item>
          <p>
	    Fix the configuration option <c>logger_metadata</c> to
	    work.</p>
          <p>
	    Own Id: OTP-17807 Aux Id: PR-5418 </p>
        </item>
        <item>
          <p>
	    Fix tls and non-tls distribution to use
	    erl_epmd:address_please to figure out if IPv4 or IPv6
	    addresses should be used when connecting to the remote
	    node.</p>
          <p>
	    Before this fix, a dns lookup of the remote node hostname
	    determined which IP version was to be used which meant
	    that the hostname had to resolve to a valid ip address.</p>
          <p>
	    Own Id: OTP-17809 Aux Id: PR-5337 GH-5334 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add <c>logger:reconfigure/0</c>.</p>
          <p>
	    Own Id: OTP-17375 Aux Id: PR-4663 PR-5186 </p>
        </item>
        <item>
          <p>
	    Add socket function ioctl/2,3,4 for socket device
	    control.</p>
          <p>
	    Own Id: OTP-17528</p>
        </item>
        <item>
          <p>
	    Add simple support for socknames/1 for gen_tcp_socket and
	    gen_udp_socket.</p>
          <p>
	    Own Id: OTP-17531</p>
        </item>
        <item>
          <p>
	    The types for callback result types in <c>gen_statem</c>
	    has bee augmented with arity 2 types where it is possible
	    for a callback module to specify the type of the callback
	    data, so the callback module can get type validation of
	    it.</p>
          <p>
	    Own Id: OTP-17738 Aux Id: PR-4926, OTP-17589 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.1.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>The internal, undocumented, but used, module
	    <c>inet_dns</c> has been fixed to handle mDNS high bit
	    usage of the Class field. </p><p> Code that uses the
	    previously obsolete, undocumented and unused record field
	    <c>#dns_rr.func</c> will need to be updated since that
	    field is now used as a boolean flag for the mDNS high
	    Class bit. Code that uses the also undocumented record
	    <c>#dns_query</c> will need to be recompiled since a
	    boolean field <c>#dns_query.unicast_response</c> has been
	    added for the mDNS high Class bit. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-17734 Aux Id: GH-5327, OTP-17659 </p>
        </item>
        <item>
	    <p> The fix for Linux's behaviour when reconnecting an
	    UDP socket in PR-5120 released in OTP-24.1.2 has been
	    refined to only dissolve the socket's connection before a
	    connect if the socket is already connected, that is: only
	    for a reconnect. </p><p> This allows code to open a
	    socket with an ephemeral port, get the port number and
	    connect; without the port number changing (on Linux).
	    This turned out to have at least one valid use case
	    (besides test cases). </p><p> Should one reconnect the
	    socket then the port number may change, on Linux; it is a
	    known quirk, which can be worked around by binding to a
	    specific port number when opening the socket. If you can
	    do without an ephemeral port, that is... </p>
          <p>
	    Own Id: OTP-17736 Aux Id: GH-5279, PR-5120, OTP-17559 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.1.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p> The undocumented DNS encode/decode module
	    <c>inet_dns</c> has been cleaned up to handle the
	    difference between "symbolic" and "raw" records in a more
	    consistent manner. </p><p> PR-5145/OTP-17584 introduced a
	    change that contributed to an already existing confusion,
	    which this correction should remedy. </p>
          <p>
	    Own Id: OTP-17659 Aux Id: ERIERL-702 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.1.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Add more info about the socket 'type' ('socket' or
	    'port') for the DOWN message when monitoring sockets.</p>
          <p>
	    Own Id: OTP-17640</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>The extended error information has been corrected and
	    improved for the following BIFs:
	    <c>binary_to_existing_atom/2</c>,
	    <c>list_to_existing_atom/1</c>,
	    <c>erlang:send_after/{3,4}</c>, and
	    <c>erlang:start_timer/{3,4}</c>.</p>
          <p>
	    Own Id: OTP-17449 Aux Id: GH-4900 </p>
        </item>
        <item>
          <p>
	    Fixed rare bug that could cause net_kernel process to
	    hang for ever. Have seen to happen with massive number of
	    TLS connections while remote nodes are restarting. Bug
	    exists since OTP-22.0.</p>
          <p>
	    Own Id: OTP-17476 Aux Id: GH-4931, PR-4934 </p>
        </item>
        <item>
          <p>
	    Improve handling of closed sockets for inet:info/1.</p>
          <p>
	    Own Id: OTP-17492</p>
        </item>
        <item>
          <p>
	    This change fixes a performance problem introduced in
	    pull-request #2675. Pull-request #2675 made so the system
	    tried to start children of already started applications
	    which is unnecessary. This change fixes this performance
	    problem.</p>
          <p>
	    Own Id: OTP-17519</p>
        </item>
        <item>
          <p>
	    Fix code:get_doc/1 to not crash when module is located in
	    an escript.</p>
          <p>
	    Own Id: OTP-17570 Aux Id: PR-5139 GH-4256 ERL-1261 </p>
        </item>
        <item>
          <p>
	    Parsing of the result value in the native DNS resolver
	    has been made more defensive against incorrect results.</p>
          <p>
	    Own Id: OTP-17578 Aux Id: ERIERL-683 </p>
        </item>
        <item>
          <p>
	    A bug in the option handling for the legacy socket
	    adaptor, that is; when using <c>inet_backend =
	    socket</c>, has been fixed. Now socket options are set
	    before the bind() call so options regarding, for example
	    address reuse have the desired effect.</p>
          <p>
	    Own Id: OTP-17580 Aux Id: GH-5122 </p>
        </item>
        <item>
          <p>
	    <c>inet:ntoa/1</c> has been fixed to not accept invalid
	    numerical addresses.</p>
          <p>
	    Own Id: OTP-17583 Aux Id: GH-5136 </p>
        </item>
        <item>
          <p>
	    Parsing of DNS records has been improved for records of
	    known types to not accept and present malformed ones in
	    raw format.</p>
          <p>
	    Own Id: OTP-17584 Aux Id: PR-5145 </p>
        </item>
        <item>
          <p>
	    The <c>ip_mreq()</c> type for the
	    <c>{ip,add_membership}</c> and
	    <c>{ip,drop_membership}</c> socket options has been
	    corrected to have an <c>interface</c> field instead of,
	    incorrectly, an <c>address</c> field.</p>
          <p>
	    Own Id: OTP-17590 Aux Id: PR-5170 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add simple utility function to display existing sockets i
	    the erlang shell (socket:i/0).</p>
          <p>
	    Own Id: OTP-17376 Aux Id: OTP-17157 </p>
        </item>
        <item>
          <p>
	    gen_udp can now be configured to use the socket
	    inet-backend (in the same way as gen_tcp).</p>
          <p>
	    Own Id: OTP-17410</p>
        </item>
        <item>
	    <p>Functions <c>erlang:set_cookie(Cookie)</c> and
	    <c>erlang:get_cookie(Node)</c> have been added for
	    completeness and to facilitate configuring distributed
	    nodes with different cookies. </p><p> The documentation
	    regarding distribution cookies has been improved to be
	    less vague. </p>
          <p>
	    Own Id: OTP-17538 Aux Id: GH-5063, PR-5111 </p>
        </item>
        <item>
	    <p>A workaround has been implemented for Linux's quirky
	    behaviour to not adjust the source IP address when
	    connecting a connected (reconnecing) UDP socket. </p><p>
	    The workaround is to, on Linux, always dissolve any
	    connection before connecting an UDP socket. </p>
          <p>
	    Own Id: OTP-17559 Aux Id: GH-5092, PR-5120 </p>
        </item>
        <item>
	    <p>Documented our recommendation against opening
	    NFS-mounted files, FIFOs, devices, and similar using
	    <c>file:open/2</c>.</p>
          <p>
	    Own Id: OTP-17576 Aux Id: ERIERL-685 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.0.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>For <c>gen_tcp:connect/3,4</c> it is possible to
	    specify a specific source port, which should be enough to
	    bind the socket to an address with that port before
	    connecting. </p><p>Unfortunately that feature was lost in
	    OTP-17216 that made it mandatory to specify the source
	    address to get an address binding, and ignored a
	    specified source port if no source address was specified.
	    </p><p>That bug has now been corrected. </p>
          <p>
	    Own Id: OTP-17536 Aux Id: OTP-17216, ERIERL-677 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.0.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix a race condition in Global.</p>
          <p>
	    Own Id: OTP-16033 Aux Id: ERIERL-329, ERL-1414, GH-4448,
	    ERL-885, GH-3923 </p>
        </item>
        <item>
	    <p> After a node restart with <c>init:restart/0,1</c>,
	    the module <c>socket</c> was not usable because
	    supporting tables had been cleared and not
	    re-initialized. This has now been fixed. </p><p> Handling
	    of the "." domain as a search domain was incorrect and
	    caused a crash in the DNS resolver <c>inet_res</c>, which
	    has now been fixed. </p>
          <p>
	    Own Id: OTP-17439 Aux Id: GH-4827, PR-4888, GH-4838 </p>
        </item>
        <item>
          <p>
	    Handling of combinations of the <c>fd</c> option and
	    binding to an address has been corrected, especially for
	    the <c>local</c> address family.</p>
          <p>
	    Own Id: OTP-17451 Aux Id: OTP-17374 </p>
        </item>
        <item>
	    <p> Bug fixes and code cleanup for the new <c>socket</c>
	    implementation, such as: </p><p> Assertions on the result
	    of demonitoring has been added in the NIF code, where
	    appropriate. </p><p> Internal state handling for socket
	    close in the NIF code has been reviewed. </p><p> Looping
	    over <c>close()</c> for <c>EINTR</c> in the NIF code has
	    been removed, since it is strongly discouraged on Linux
	    and Posix is not clear about if it is allowed. </p><p>
	    The <c>inet_backend</c> temporary socket option for
	    legacy <c>gen_tcp</c> sockets has been documented.
	    </p><p> The return value from <c>net:getaddrinfo/2</c>
	    has been corrected: the <c>protocol</c> field is now an
	    <c>atom()</c>, instead of, incorrectly,
	    <c>list(atom())</c>. The documentation has also been
	    corrected about this return type. </p><p> Deferred close
	    of a <c>socket:sendfile/*</c> file was broken and has
	    been corrected. </p><p> Some debug code, not enabled by
	    default, in the socket NIF has been corrected to not
	    accidentally core dump for debug printouts of more or
	    less innocent events. </p>
          <p>
	    Own Id: OTP-17452</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 8.0</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A bug has been fixed for the internal <c>inet_res</c>
	    resolver cache that handled a resolver configuration file
	    status timer incorrectly and caused performance problems
	    due to many unnecessary file system accesses.</p>
          <p>
	    Own Id: OTP-14700 Aux Id: PR-2848 </p>
        </item>
        <item>
          <p>
	    Change the value of the tag <c>head</c> returned by
	    <c>disk_log:info/1</c> from <c>{ok, Head}</c> to just
	    <c>Head</c>.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-16809 Aux Id: ERL-1313 </p>
        </item>
        <item>
          <p>
	    Two options have been added to <c>erl_call</c>. The
	    <c>-fetch_stdout</c> option fetches stdout data resulting
	    from the code invoked by <c>erl_call</c>. The
	    <c>-fetch_stdout</c> option disables printing of the
	    result term. In order to implement the first of these two
	    options a new function called <c>ei_xrpc_from</c> has
	    been added to erl_interface. For details see the
	    <c>erl_call</c> documentation and <c>erl_interface</c>
	    documentation.</p>
          <p>
	    Own Id: OTP-17132</p>
        </item>
        <item>
	    <p>Missing runtime dependencies has been added to this
	    application.</p>
          <p>
	    Own Id: OTP-17243 Aux Id: PR-4557 </p>
        </item>
        <item>
          <p>
	    <c>inet:get_rc/0</c> has been corrected to return host
	    entries as separate entries instead of (incorrectly) in a
	    list within the list. This bug was introduced by
	    OTP-16487 in OTP-23.0-rc1.</p>
          <p>
	    Own Id: OTP-17262 Aux Id: GH-4588, PR-4604, OTP-16487 </p>
        </item>
        <item>
          <p>
	    The type gen_tcp:option_name() had a duplicate pktoptions
	    value.</p>
          <p>
	    Own Id: OTP-17277</p>
        </item>
        <item>
          <p>
	    Fixed removal of empty groups from internal state in
	    <c>pg</c>.</p>
          <p>
	    Own Id: OTP-17286 Aux Id: PR-4619 </p>
        </item>
        <item>
          <p>
	    <c>erl -remsh</c> now prints an error message when it
	    fails to connect to the remote node.</p>
          <p>
	    Own Id: OTP-17287 Aux Id: PR-4581 </p>
        </item>
        <item>
          <p>
	    Fix bugs related to corrupt shell history files.</p>
          <p>
	    Error messages printed by shell history are now logged as
	    logger error reports instead of written to standard
	    error.</p>
          <p>
	    Own Id: OTP-17288 Aux Id: PR-4581 </p>
        </item>
        <item>
          <p>
	    A logger warning is now issues when too many arguments
	    are given to <c>-name</c> or <c>-sname</c>. Example:
	    <c>erl -name a b</c>.</p>
          <p>
	    Own Id: OTP-17315 Aux Id: GH-4626 </p>
        </item>
        <item>
          <p>
	    The cache used by <c>inet_res</c> now, again, can handle
	    multiple IP addresses per domain name, and thus fixes a
	    bug introduced in PR-3041 (OTP-13126) and PR-2891
	    (OTP-14485).</p>
          <p>
	    Own Id: OTP-17344 Aux Id: PR-4633, GH-4631, OTP-14485,
	    OTP-12136 </p>
        </item>
        <item>
          <p>
	    Sockets created with socket:accept not counted
	    (socket:info/0).</p>
          <p>
	    Own Id: OTP-17372</p>
        </item>
        <item>
          <p>
	    The <c>{fd, Fd}</c> option to <c>gen_tcp:listen/2</c> did
	    not work for <c>inet_backend</c> <c>socket</c>, which has
	    been fixed.</p>
          <p>
	    Own Id: OTP-17374 Aux Id: PR-4787, GH-4680, PR-2989,
	    OTP-17216 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The cache used by the DNS resolver <c>inet_res</c> has
	    been improved to use ETS lookups instead of server calls.
	    This is a considerable speed improvement for cache hits.</p>
          <p>
	    Own Id: OTP-13126 Aux Id: PR-3041 </p>
        </item>
        <item>
          <p>
	    The cache ETS table type for the internal DNS resolver
	    <c>inet_res</c> has changed type (internally) to get
	    better speed and atomicity.</p>
          <p>
	    Own Id: OTP-14485 Aux Id: PR-2891 </p>
        </item>
        <item>
          <p>
	    The experimental <c>socket</c> module can now use any
	    protocol (by name) the OS supports. Suggested in PR-2641,
	    implemented in PR-2670.</p>
          <p>
	    Own Id: OTP-14601 Aux Id: PR-2641, PR-2670, OTP-16749 </p>
        </item>
        <item>
          <p>
	    The DNS resolver <c>inet_res</c> has been updated to
	    support CAA (RFC 6844) and URI (RFC 7553) records.</p>
          <p>
	    Own Id: OTP-16517 Aux Id: PR-2827 </p>
        </item>
        <item>
          <p>
	    A compatibility adaptor for <c>gen_tcp</c> to use the new
	    <c>socket</c> API has been implemented
	    (<c>gen_tcp_socket</c>). Used when setting the kernel
	    application variable <c>inet_backend = socket</c>.</p>
          <p>
	    Own Id: OTP-16611 Aux Id: OTP-16749 </p>
        </item>
        <item>
          <p>
	    Extended error information for failing BIF calls as
	    proposed in <url
	    href="https://github.com/erlang/eep/blob/master/eeps/eep-0054.md">EEP
	    54</url> has been implemented.</p>
          <p>
	    When a BIF call from the Erlang shell fails, more
	    information about which argument or arguments that were
	    in error will be printed. The same extended error
	    information will by <c>proc_lib</c>, <c>common_test</c>,
	    and <c>qlc</c> when BIF calls fail.</p>
          <p>
	    For applications that wish to provide the same extended
	    error information, there are new functions
	    <c>erl_error:format_exception/3</c> and
	    <c>erl_error:format_exception/4</c>.</p>
          <p>
	    There is a new <c>error/3</c> BIF that allows
	    applications or libraries to provide extended error
	    information in the same way for their own exceptions.</p>
          <p>
	    Own Id: OTP-16686</p>
        </item>
        <item>
	    <p>The file server can now be bypassed in
	    <c>file:delete/1,2</c> with the <c>raw</c> option.</p>
          <p>
	    Own Id: OTP-16698 Aux Id: PR-2634 </p>
        </item>
        <item>
          <p>
	    An example implementation of Erlang distribution over UDS
	    using distribution processes has been introduced.</p>
          <p>
	    Thanks to Jérôme de Bretagne</p>
          <p>
	    Own Id: OTP-16703 Aux Id: PR-2620 </p>
        </item>
        <item>
          <p>
	    The <seeguide
	    marker="system/reference_manual:processes#process-aliases"><i>process
	    alias</i></seeguide> feature as outlined by <url
	    href="https://github.com/erlang/eep/blob/master/eeps/eep-0053.md">EEP
	    53</url> has been introduced. It is introduced in order
	    to provide a lightweight mechanism that can prevent late
	    replies after timeout or connection loss. For more
	    information, see EEP 53 and the documentation of the new
	    <seemfa
	    marker="erts:erlang#alias/1"><c>alias/1</c></seemfa> BIF
	    and the new options to the <seemfa
	    marker="erts:erlang#monitor/3"><c>monitor/3</c></seemfa>
	    BIF.</p>
          <p>
	    The <c>call</c> operation in the framework used by
	    <c>gen_server</c>, <c>gen_statem</c>, and
	    <c>gen_event</c> has been updated to utilize alias in
	    order to prevent late responses. The <c>gen_statem</c>
	    behavior still use a proxy process in the distributed
	    case, since it has always prevented late replies and
	    aliases won't work against pre OTP 24 nodes. The proxy
	    process can be removed in OTP 26.</p>
          <p>
	    The alias feature also made it possible to introduce new
	    functions similar to the <seemfa
	    marker="kernel:erpc#receive_response/2"><c>erpc:receive_response()</c></seemfa>
	    function in the gen behaviors, so the new functions
	    <seemfa
	    marker="stdlib:gen_server#receive_response/2"><c>gen_server:receive_response()</c></seemfa>,
	    <seemfa
	    marker="stdlib:gen_statem#receive_response/2"><c>gen_statem:receive_response()</c></seemfa>,
	    <seemfa
	    marker="stdlib:gen_event#receive_response/2"><c>gen_event:receive_response()</c></seemfa>
	    have also been introduced.</p>
          <p>
	    Own Id: OTP-16718 Aux Id: PR-2735 </p>
        </item>
        <item>
	    <p> The experimental new socket API has been further
	    developed. Some backwards incompatible changes with
	    respect to OTP 23 have been made. </p><p> The control
	    message format has been changed so a decoded value is now
	    in the 'value' field instead of in the 'data' field. The
	    'data' field now always contains binary data. </p><p>
	    Some type names have been changed regarding message
	    headers and control message headers. </p><p>
	    <c>socket:bind/2</c> now returns plain <c>ok</c> instead
	    of <c>{ok, Port}</c> which was only relevant for the
	    <c>inet</c> and <c>inet6</c> address families and often
	    not interesting. To find out which port was chosen use
	    <c>socket:sockname/1</c>. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-16749 Aux Id: OTP-14601 </p>
        </item>
        <item>
          <p>
	    New function <c>os:env/0</c> returns all OS environment
	    variables as a list of 2-tuples.</p>
          <p>
	    Own Id: OTP-16793 Aux Id: ERL-1332, PR-2740 </p>
        </item>
        <item>
          <p>
	    Remove the support for distributed disk logs. The new
	    function <c>disk_log:all/0</c> is to be used instead of
	    <c>disk_log:accessible_logs/0</c>. The function
	    <c>disk_log:close/1</c> is to be used instead of
	    <c>disk_log:lclose/1,2</c>.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-16811</p>
        </item>
        <item>
          <p>
	    Expand the spec for <c>erl_epmd:listen_port_please/2</c>
	    to mirror <c>erl_epmd:port_please/2</c>.</p>
          <p>
	    Own Id: OTP-16947 Aux Id: PR-2781 </p>
        </item>
        <item>
          <p>
	    A new erl parameter for specifying a file descriptor with
	    configuration data has been added. This makes it possible
	    to pass the parameter "-configfd FD" when executing the
	    erl command. When this option is given, the system will
	    try to read and parse configuration parameters from the
	    file descriptor.</p>
          <p>
	    Own Id: OTP-16952</p>
        </item>
        <item>
	    <p>The experimental HiPE application has been removed,
	    together with all related functionality in other
	    applications.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-16963</p>
        </item>
        <item>
	    <p>The <c>pg2</c> module has been removed.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-16968</p>
        </item>
        <item>
          <p>
	    Accept references up to a size of 160-bits from remote
	    nodes. This is the first step in an upgrade path toward
	    using references up to 160-bits in a future OTP release.</p>
          <p>
	    Own Id: OTP-17005 Aux Id: OTP-16718 </p>
        </item>
        <item>
          <p>
	    Allow utf-8 binaries as parts of logger_formatter
	    template.</p>
          <p>
	    Own Id: OTP-17015</p>
        </item>
        <item>
          <p>
	    Let <c>disk_log:open/1</c> change the size if a wrap log
	    is opened for the first time, that is, the disk log
	    process does not exist, and the value of option
	    <c>size</c> does not match the current size of the disk
	    log.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-17062 Aux Id: ERL-1418, GH-4469, ERIERL-537 </p>
        </item>
        <item>
          <p>
	    Allow the shell history of an erlang node to be fetched
	    and stores using a custom callback module. See
	    <c>shell_history</c> configuration parameter in the
	    <seeapp marker="kernel:kernel_app">kernel
	    documentation</seeapp> for more details.</p>
          <p>
	    Own Id: OTP-17103 Aux Id: PR-2949 </p>
        </item>
        <item>
          <p>
	    The simple logger (used to log events that happen before
	    kernel has been started) has been improved to print
	    prettier error messages.</p>
          <p>
	    Own Id: OTP-17106 Aux Id: PR-2885 </p>
        </item>
        <item>
          <p>
	    <c>socket:sendfile/2,3,4,5</c> has been implemented, for
	    platforms that support the underlying socket library
	    call.</p>
          <p>
	    Own Id: OTP-17154 Aux Id: OTP-16749 </p>
        </item>
        <item>
          <p>
	    Add socket monitor(s) for all types sockets.</p>
          <p>
	    Own Id: OTP-17155</p>
        </item>
        <item>
          <p>
	    Fix various issues with the gen_tcp_socket. Including
	    documenting some incompatibilities.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-17156</p>
        </item>
        <item>
          <p>
	    inet:i/0 now also shows existing gen_tcp compatibility
	    sockets (based on 'socket').</p>
          <p>
	    Own Id: OTP-17157</p>
        </item>
        <item>
          <p>
	    Added support in logger for setting primary metadata. The
	    primary metadata is passed as a base metadata to all log
	    events in the system. See <seeguide
	    marker="logger_chapter#metadata">Metadata</seeguide> in
	    the Logger chapter of the Kernel User's Guide for more
	    details.</p>
          <p>
	    Own Id: OTP-17181 Aux Id: PR-2457 </p>
        </item>
        <item>
          <p>
	    Recognize new key 'optional_applications' in application
	    resource files.</p>
          <p>
	    Own Id: OTP-17189 Aux Id: PR-2675 </p>
        </item>
        <item>
          <p>
	    The <c>Fun</c>'s passed to logger:log/2,3,4 can now
	    return metadata that will only be fetched when needed.
	    See <seemfa
	    marker="logger#log/2"><c>logger:log/2,3,4</c></seemfa>
	    for more details.</p>
          <p>
	    Own Id: OTP-17198 Aux Id: PR-2721 </p>
        </item>
        <item>
          <p>
	    <c>erpc:multicall()</c> has been rewritten to be able to
	    utilize the newly introduced and improved selective
	    receive optimization.</p>
          <p>
	    Own Id: OTP-17201 Aux Id: PR-4534 </p>
        </item>
        <item>
          <p>
	    Add utility fiunction inet:info/1 to provide
	    miscellaneous info about a socket.</p>
          <p>
	    Own Id: OTP-17203 Aux Id: OTP-17156 </p>
        </item>
        <item>
	    <p> The behaviour for <c>gen_tcp:connect/3,4</c> has been
	    changed to not per default bind to an address, which
	    allows the network stack to delay the address and port
	    selection to when the remote address is known. This
	    allows better port re-use, and thus enables far more
	    outgoing connections, since the ephemeral port range no
	    longer has to be a hard limit. </p><p> There is a
	    theoretical possibility that this behaviour change can
	    affect the set of possible error values, or have other
	    small implications on some platforms. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-17216 Aux Id: PR-2989 </p>
        </item>
        <item>
          <p>
	    An option <c>{nxdomain_reply, boolean()}</c> has been
	    implemented in the DNS resolver <c>inet_res</c>. It is
	    useful since an <c>nxdomain</c> error from a name server
	    does contain the SOA record if the domain exists at all.
	    This record is useful to determine a TTL for negative
	    caching of the failed entry.</p>
          <p>
	    Own Id: OTP-17266 Aux Id: PR-4564 </p>
        </item>
        <item>
          <p>
	    Optimized lookup of local processes part of groups in
	    <c>pg</c>.</p>
          <p>
	    Own Id: OTP-17284 Aux Id: PR-4615 </p>
        </item>
        <item>
	    <p> The return values from module <c>socket</c> functions
	    <c>send()</c>, <c>sendto()</c>, <c>sendmsg()</c>,
	    <c>sendfile()</c> and <c>recv()</c> has been changed to
	    return a tuple tagged with <c>select</c> when a
	    <c>SelectInfo</c> was returned, and not sometimes tagged
	    with <c>ok</c>. </p><p>This is a backwards incompatible
	    change that improves usability for code using
	    asynchronous operations. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-17355 Aux Id: OTP-17154 </p>
        </item>
        <item>
          <p>
	    Fixed warnings in code matching on underscore prefixed
	    variables.</p>
          <p>
	    Own Id: OTP-17385 Aux Id: OTP-17123 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3.1.7</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    A new function <seemfa
	    marker="kernel:global#disconnect/0"><c>global:disconnect/0</c></seemfa>
	    has been introduced with which one can cleanly disconnect
	    a node from all other nodes in a cluster of <c>global</c>
	    nodes.</p>
          <p>
	    Own Id: OTP-18232 Aux Id: OTP-17843, PR-6264 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3.1.6</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A call to <seemfa
	    marker="net_kernel#setopts/2"><c>net_kernel:setopts(new,
	    Opts)</c></seemfa> at the same time as a connection was
	    being set up could cause a deadlock between the
	    <c>net_kernel</c> process and the process setting up the
	    connection.</p>
          <p>
	    Own Id: OTP-18198 Aux Id: GH-6129, PR-6216 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3.1.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p> By default <c>global</c> does <i>not</i> take any
	    actions to restore a fully connected network when
	    connections are lost due to network issues. This is
	    problematic for all applications expecting a fully
	    connected network to be provided, such as for example
	    <c>mnesia</c>, but also for <c>global</c> itself. A
	    network of overlapping partitions might cause the
	    internal state of <c>global</c> to become inconsistent.
	    Such an inconsistency can remain even after such
	    partitions have been brought together to form a fully
	    connected network again. The effect on other applications
	    that expects that a fully connected network is maintained
	    may vary, but they might misbehave in very subtle hard to
	    detect ways during such a partitioning. </p> <p> In order
	    to prevent such issues, we have introduced a <i>prevent
	    overlapping partitions</i> fix which can be enabled using
	    the <seeapp
	    marker="kernel:kernel_app#prevent_overlapping_partitions"><c>prevent_overlapping_partitions</c></seeapp>
	    <c>kernel(6)</c> parameter. When this fix has been
	    enabled, <c>global</c> will actively disconnect from
	    nodes that reports that they have lost connections to
	    other nodes. This will cause fully connected partitions
	    to form instead of leaving the network in a state with
	    overlapping partitions. Note that this fix <i>has</i> to
	    be enabled on <i>all</i> nodes in the network in order to
	    work properly. Since this quite substantially changes the
	    behavior, this fix is currently disabled by default.
	    Since you might get hard to detect issues without this
	    fix you are, however, <i>strongly</i> advised to enable
	    this fix in order to avoid issues such as the ones
	    described above. As of OTP 25 this fix will become
	    enabled by default. </p>
          <p>
	    Own Id: OTP-17843 Aux Id: ERIERL-732, PR-5611 </p>
        </item>
        <item>
          <p>
	    Fix failed accepted connection setup after previous
	    established connection from same node closed down
	    silently.</p>
          <p>
	    Own Id: OTP-17979 Aux Id: ERIERL-780 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    A <seeapp
	    marker="kernel:kernel_app#net_tickintensity"><c>net_tickintensity</c></seeapp>
	    <c>kernel</c> parameter has been introduced. It can be
	    used to control the amount of ticks during a <seeapp
	    marker="kernel:kernel_app#net_ticktime"><c>net_ticktime</c></seeapp>
	    period.</p>
          <p>
	    A new <seemfa
	    marker="kernel:net_kernel#start/2"><c>net_kernel:start/2</c></seemfa>
	    function has also been introduced in order to make it
	    easier to add new options. The use of <seemfa
	    marker="kernel:net_kernel#start/1"><c>net_kernel:start/1</c></seemfa>
	    has been deprecated.</p>
          <p>
	    Own Id: OTP-17905 Aux Id: ERIERL-732, PR-5740 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3.1.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Parsing of the result value in the native DNS resolver
	    has been made more defensive against incorrect results.</p>
          <p>
	    Own Id: OTP-17578 Aux Id: ERIERL-683 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3.1.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix code:get_doc/1 to not crash when module is located in
	    an escript.</p>
          <p>
	    Own Id: OTP-17570 Aux Id: PR-5139 GH-4256 ERL-1261 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3.1.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Handling of the "." domain as a search domain was
	    incorrect and caused a crash in the DNS resolver
	    <c>inet_res</c>, which has now been fixed.</p>
          <p>
	    Own Id: OTP-17473 Aux Id: GH-4838, OTP-17439 </p>
        </item>
        <item>
          <p>
	    Fixed rare bug that could cause net_kernel process to
	    hang for ever. Have seen to happen with massive number of
	    TLS connections while remote nodes are restarting. Bug
	    exists since OTP-22.0.</p>
          <p>
	    Own Id: OTP-17476 Aux Id: GH-4931, PR-4934 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3.1.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix a race condition in Global.</p>
          <p>
	    Own Id: OTP-16033 Aux Id: ERIERL-329, ERL-1414, GH-4448,
	    ERL-885, GH-3923 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A bug in the Erlang DNS resolver has been fixed, where it
	    could be made to bring down the kernel supervisor and
	    thereby the whole node, when getting an incorrect (IN A
	    reply to an IN CNAME query) reply from the DNS server and
	    used the reply record's value without verifying its type.</p>
          <p>
	    Own Id: OTP-17361</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The range check for compression pointers in DNS encoding
	    was faulty, which caused incorrect label compression
	    encoding for very large DNS messages; larger than about
	    16 kBytes, such as AXFR responses. This more than 11 year
	    old bug has now been corrected.</p>
          <p>
	    Own Id: OTP-13641 Aux Id: PR-2959 </p>
        </item>
        <item>
          <p>
	    Fix of internal links in the <c>erpc</c> documentation.</p>
          <p>
	    Own Id: OTP-17202 Aux Id: PR-4516 </p>
        </item>
        <item>
          <p>
	    Fix bug where complex seq_trace tokens (that is lists,
	    tuples, maps etc) could becomes corrupted by the GC. The
	    bug was introduced in OTP-21.</p>
          <p>
	    Own Id: OTP-17209 Aux Id: PR-3039 </p>
        </item>
        <item>
	    <p>When running Xref in the <c>modules</c> mode, the
	    Debugger application would show up as a dependency for the
	    Kernel applications.</p>
          <p>
	    Own Id: OTP-17223 Aux Id: GH-4546, PR-4554 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    <seeerl marker="erl_epmd"><c>erl_epmd</c></seeerl> (the
	    epmd client) will now try to reconnect to the local EPMD
	    if the connection is broken.</p>
          <p>
	    Own Id: OTP-17178 Aux Id: PR-3003 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.2.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    When using the DNS resolver option
	    <c>servfail_retry_timeout</c> it did not honour the
	    overall call time-out in e.g <c>inet_res:getbyname/3</c>.
	    This misbehaviour has now been fixed. Also, the
	    <c>servfail_retry_timeout</c> behaviour has been improved
	    to only be enforced for servers that gives a servfail
	    answer.</p>
          <p>
	    Own Id: OTP-12960 Aux Id: ERIERL-598, PR-4509 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The <c>apply</c> call's in <c>logger.hrl</c> are now
	    called with <c>erlang</c> prefix to avoid clashed with
	    local <c>apply/3</c> functions.</p>
          <p>
	    Own Id: OTP-16976 Aux Id: PR-2807 </p>
        </item>
        <item>
          <p>
	    Fix memory leak in <c>pg</c>.</p>
          <p>
	    Own Id: OTP-17034 Aux Id: PR-2866 </p>
        </item>
        <item>
          <p>
	    Fix crash in <c>logger_proxy</c> due to stray
	    <c>gen_server:call</c> replies not being handled. The
	    stray replies come when logger is under heavy load and
	    the flow control mechanism is reaching its limit.</p>
          <p>
	    Own Id: OTP-17038</p>
        </item>
        <item>
          <p>
	    Fixed a bug in <c>erl_epmd:names()</c> that caused it to
	    return the illegal return value <c>noport</c> instead of
	    <c>{error, Reason}</c> where <c>Reason</c> is the actual
	    error reason. This bug also propagated to
	    <c>net_adm:names()</c>.</p>
          <p>
	    This bug was introduced in <c>kernel</c> version 7.1 (OTP
	    23.1).</p>
          <p>
	    Own Id: OTP-17054 Aux Id: ERL-1424 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add export of some resolver documented types.</p>
          <p>
	    Own Id: OTP-16954 Aux Id: ERIERL-544 </p>
        </item>
        <item>
          <p>
	    Add configurable retry timeout for resolver lookups.</p>
          <p>
	    Own Id: OTP-16956 Aux Id: ERIERL-547 </p>
        </item>
        <item>
          <p>
	    <c>gen_server:multi_call()</c> has been optimized in the
	    special case of only calling the local node with timeout
	    set to <c>infinity</c>.</p>
          <p>
	    Own Id: OTP-17058 Aux Id: PR-2887 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A fallback has been implemented for file:sendfile when
	    using inet_backend socket</p>
          <p>
	    Own Id: OTP-15187 Aux Id: ERL-1293 </p>
        </item>
        <item>
          <p>
	    Make default TCP distribution honour option
	    <c>backlog</c> in <c>inet_dist_listen_options</c>.</p>
          <p>
	    Own Id: OTP-16694 Aux Id: PR-2625 </p>
        </item>
        <item>
          <p>
	    Raw option handling for the experimental
	    <c>gen_tcp_socket</c> backend was broken so that all raw
	    options were ignored by for example
	    <c>gen_tcp:listen/2</c>, a bug that now has been fixed.
	    Reported by Jan Uhlig.</p>
          <p>
	    Own Id: OTP-16743 Aux Id: ERL-1287 </p>
        </item>
        <item>
          <p>
	    Accept fails with inet-backend socket.</p>
          <p>
	    Own Id: OTP-16748 Aux Id: ERL-1284 </p>
        </item>
        <item>
          <p>
	    Fixed various minor errors in the socket backend of
	    gen_tcp.</p>
          <p>
	    Own Id: OTP-16754</p>
        </item>
        <item>
          <p>
	    Correct <c>disk_log:truncate/1</c> to count the header.
	    Also correct the documentation to state that
	    <c>disk_log:truncate/1</c> can be used with external disk
	    logs.</p>
          <p>
	    Own Id: OTP-16768 Aux Id: ERL-1312 </p>
        </item>
        <item>
          <p>
	    Fix erl_epmd:port_please/2,3 type specs to include all
	    possible error values.</p>
          <p>
	    Own Id: OTP-16783</p>
        </item>
        <item>
          <p>
	    Fix <c>erl -erl_epmd_port</c> to work properly. Before
	    this fix it did not work at all.</p>
          <p>
	    Own Id: OTP-16785</p>
        </item>
        <item>
          <p>
	    Fix typespec for internal function
	    <c>erlang:seq_trace_info/1</c> to allow <c>term()</c> as
	    returned label. This in turn fixes so that calls to
	    <c>seq_trace:get_token/1</c> can be correctly analyzer by
	    dialyzer.</p>
          <p>
	    Own Id: OTP-16823 Aux Id: PR-2722 </p>
        </item>
        <item>
          <p>
	    Fix erroneous double registration of processes in
	    <c>pg</c> when distribution is dynamically started.</p>
          <p>
	    Own Id: OTP-16832 Aux Id: PR-2738 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Make (use of) the socket registry optional (still enabled
	    by default). Its now possible to build OTP with the
	    socket registry turned off, turn it off by setting an
	    environment variable and controlling in runtime (via
	    function calls and arguments when creating sockets).</p>
          <p>
	    Own Id: OTP-16763</p>
        </item>
        <item>
          <p>
	    <c>erl -remsh nodename</c> no longer requires the
	    hostname to be given when used together with dynamic
	    nodenames.</p>
          <p>
	    Own Id: OTP-16784</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 7.0</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix race condition during shutdown when
	    <c>shell_history</c> is enabled. The race condition would
	    trigger crashes in <c>disk_log</c>.</p>
          <p>
	    Own Id: OTP-16008 Aux Id: PR-2302 </p>
        </item>
        <item>
          <p>
	    Fix the Erlang distribution to handle the scenario when a
	    node connects that can handle message fragmentation but
	    can not handle the atom cache. This bug only affects
	    users that have implemented a custom distribution
	    carrier. It has been present since OTP-21.</p>
          <p>
	    The <c>DFLAG_FRAGMENT</c> distribution flag was added to
	    the set of flags that can be rejected by a distribution
	    implementation.</p>
          <p>
	    Own Id: OTP-16284</p>
        </item>
        <item>
          <p>
	    Fix bug where a binary was not allowed to be the format
	    string in calls to <c>logger:log</c>.</p>
          <p>
	    Own Id: OTP-16395 Aux Id: PR-2444 </p>
        </item>
        <item>
          <p>
	    Fix bug where <c>logger</c> would end up in an infinite
	    loop when trying to log the crash of a handler or
	    formatter.</p>
          <p>
	    Own Id: OTP-16489 Aux Id: ERL-1134 </p>
        </item>
        <item>
          <p>
	    <c>code:lib_dir/1</c> has been fixed to also return the
	    lib dir for <c>erts</c>.</p>
          <p>
	    This is been marked as an incompatibility for any
	    application that depended on <c>{error,bad_name}</c> to
	    be returned for <c>erts</c>.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-16502</p>
        </item>
        <item>
          <p>
	    The application <c>stop/1</c> callback was not called if
	    the application master of the application terminated.</p>
          <p>
	    Own Id: OTP-16504 Aux Id: PR-2328 </p>
        </item>
        <item>
          <p>
	    Fix bug in <c>application:loaded_applications/0</c> that
	    could cause it to fail with <c>badarg</c> if for example
	    a concurrent upgrade/downgrade is running.</p>
          <p>
	    Own Id: OTP-16627 Aux Id: PR-2601 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>A new module <seeerl
	    marker="kernel:erpc"><c>erpc</c></seeerl> has been
	    introduced in the <c>kernel</c> application. The
	    <c>erpc</c> module implements an enhanced subset of the
	    operations provided by the <seeerl
	    marker="kernel:rpc"><c>rpc</c></seeerl> module. Enhanced
	    in the sense that it makes it possible to distinguish
	    between returned value, raised exceptions, and other
	    errors. <c>erpc</c> also has better performance and
	    scalability than the original <c>rpc</c> implementation.
	    This by utilizing the newly introduced <seemfa
	    marker="erts:erlang#spawn_request/5"><c>spawn_request()</c></seemfa>
	    BIF. Also the <c>rpc</c> module benefits from these
	    improvements by utilizing <c>erpc</c> when it is
	    possible. </p><p> This change has been marked as a
	    potential incompatibility since <seemfa
	    marker="kernel:rpc#block_call/5"><c>rpc:block_call()</c></seemfa>
	    now only is guaranteed to block other <c>block_call()</c>
	    operations. The documentation previously claimed that it
	    would block all <c>rpc</c> operations. This has however
	    never been the case. It previously did not block
	    node-local <c>block_call()</c> operations.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-13450 Aux Id: OTP-15251 </p>
        </item>
        <item>
	    <p>A client node can receive its node name dynamically
	    from the node that it first connects to. This featured
	    can by used by</p> <list> <item><p>starting with <c>erl
	    -sname undefined</c></p></item> <item><p>erl_interface
	    functions <c>ei_connect_init</c> and friends</p></item>
	    <item><p><c>erl_call -R</c></p></item> </list>
          <p>
	    Own Id: OTP-13812</p>
        </item>
        <item>
          <p>
	    Improved the printout of single line logger events for
	    most of the OTP behaviours in STDLIB and Kernel. This
	    includes <c>proc_lib</c>, <c>gen_server</c>,
	    <c>gen_event</c>, <c>gen_statem</c>, <c>gen_fsm</c>,
	    <c>supervisor</c>, <c>supervisor_bridge</c> and
	    <c>application</c>.</p>
          <p>
	    Improved the <seeerl
	    marker="kernel:logger_formatter#chars_limit"><c>chars_limit</c></seeerl>
	    and <seeerl
	    marker="kernel:logger_formatter#depth"><c>depth</c></seeerl>
	    handling in <c>proc_lib</c> and when formatting of
	    exceptions.</p>
          <p>
	    Own Id: OTP-15299</p>
        </item>
        <item>
          <p>
	    Remove usage and documentation of old requests of the
	    I/O-protocol.</p>
          <p>
	    Own Id: OTP-15695</p>
        </item>
        <item>
	    <p>Directories can now be opened by <c>file:open/2</c>
	    when passing the <c>directory</c> option.</p>
          <p>
	    Own Id: OTP-15835 Aux Id: PR-2212 </p>
        </item>
        <item>
          <p>
	    The check of whether to log or not based on the log level
	    in <c>logger</c> has been optimized by using
	    <c>persistent_term</c> to store the log level.</p>
          <p>
	    Own Id: OTP-15948 Aux Id: PR-2356 </p>
        </item>
        <item>
	    <p><c>file:read_file_info/2</c> can now be used on opened
	    files and directories.</p>
          <p>
	    Own Id: OTP-15956 Aux Id: PR-2231 </p>
        </item>
        <item>
          <p>
	    The <c>-config</c> option to <c>erl</c> now can take
	    multiple config files without repeating the
	    <c>-config</c> option. Example:</p>
          <p>
	    erl -config sys local</p>
          <p>
	    Own Id: OTP-16148 Aux Id: PR-2373 </p>
        </item>
        <item>
          <p>
	    Improved node connection setup handshake protocol. Made
	    possible to agree on protocol version without dependence
	    on <c>epmd</c> or other prior knowledge of peer node
	    version. Also added exchange of node incarnation
	    ("creation") values and expanded the distribution
	    capability flag field from 32 to 64 bits.</p>
          <p>
	    Own Id: OTP-16229</p>
        </item>
        <item>
	    <p>The possibility to run Erlang distribution without
	    relying on EPMD has been extended. To achieve this a
	    couple of new options to the inet distribution has been
	    added.</p> <taglist> <tag>-dist_listen false</tag>
	    <item>Setup the distribution channel, but do not listen
	    for incoming connection. This is useful when you want to
	    use the current node to interact with another node on the
	    same machine without it joining the entire
	    cluster.</item> <tag>-erl_epmd_port Port</tag>
	    <item>Configure a default port that the built-in EPMD
	    client should return. This allows the local node to know
	    the port to connect to for any other node in the
	    cluster.</item> </taglist> <p>The <c>erl_epmd</c>
	    callback API has also been extended to allow returning
	    <c>-1</c> as the creation which means that a random
	    creation will be created by the node.</p>
	    <p>In addition a new callback function called
	    <c>listen_port_please</c> has been added that allows the
	    callback to return which listen port the distribution
	    should use. This can be used instead of
	    <c>inet_dist_listen_min/max</c> if the listen port is to
	    be fetched from an external service.</p>
          <p>
	    Own Id: OTP-16250</p>
        </item>
        <item>
          <p>
	    A first EXPERIMENTAL module that is a <c>socket</c>
	    backend to <c>gen_tcp</c> and <c>inet</c> has been
	    implemented. Others will follow. Feedback will be
	    appreciated.</p>
          <p>
	    Own Id: OTP-16260 Aux Id: OTP-15403 </p>
        </item>
        <item>
          <p>
	    The new experimental <c>socket</c> module has been moved
	    to the Kernel application.</p>
          <p>
	    Own Id: OTP-16312</p>
        </item>
        <item>
          <p>
	    Replace usage of deprecated function in the <c>group</c>
	    module.</p>
          <p>
	    Own Id: OTP-16345</p>
        </item>
        <item>
          <p>
	    Minor updates due to the new spawn improvements made.</p>
          <p>
	    Own Id: OTP-16368 Aux Id: OTP-15251 </p>
        </item>
        <item>
          <p>
	    Update of <seeerl
	    marker="kernel:seq_trace#whatis">sequential
	    tracing</seeerl> to also support other information
	    transfers than message passing.</p>
          <p>
	    Own Id: OTP-16370 Aux Id: OTP-15251, OTP-15232 </p>
        </item>
        <item>
	    <p><c>code:module_status/1</c> now accepts a list of
	    modules. <c>code:module_status/0</c>, which returns the
	    statuses for all loaded modules, has been added.</p>
          <p>
	    Own Id: OTP-16402</p>
        </item>
        <item>
	    <p><c>filelib:wildcard/1,2</c> is now twice as fast when
	    a double star (<c>**</c>) is part of the pattern.</p>
          <p>
	    Own Id: OTP-16419</p>
        </item>
        <item>
	    <p> A new implementation of distributed named process
	    groups has been introduced. It is available in the
	    <seeerl marker="kernel:pg"><c>pg</c></seeerl> module.
	    </p><p> Note that this <c>pg</c> module only has the name
	    in common with the experimental <c>pg</c> module that was
	    present in <c>stdlib</c> up until OTP 17. </p><p> Thanks
	    to Maxim Fedorov for the implementation. </p>
          <p>
	    Own Id: OTP-16453 Aux Id: PR-2524 </p>
        </item>
        <item>
	    <p> The <c>pg2</c>
	    module has been deprecated. It has also been scheduled
	    for removal in OTP 24. </p><p> You are advised to replace
	    the usage of <c>pg2</c> with the newly introduced <seeerl
	    marker="kernel:pg"><c>pg</c></seeerl> module. <c>pg</c>
	    has a similar API, but with a more scalable
	    implementation. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-16455</p>
        </item>
        <item>
	    <p>Refactored the internal handling of deprecated and
	    removed functions.</p>
          <p>
	    Own Id: OTP-16469</p>
        </item>
        <item>
          <p>
	    The internal hosts file resolver cache <c>inet_hosts</c>
	    has been rewritten to behave better when the hosts file
	    changes. For example the cache is updated per entry
	    instead of cleared and reloaded so lookups do not
	    temporarily fail during reloading, and; when multiple
	    processes simultaneously request reload these are now
	    folded into one instead of all done in sequence. Reported
	    and first solution suggestion by Maxim Fedorov.</p>
          <p>
	    Own Id: OTP-16487 Aux Id: PR-2516 </p>
        </item>
        <item>
          <p>
	    Add <c>code:all_available/0</c> that can be used to get
	    all available modules.</p>
          <p>
	    Own Id: OTP-16494</p>
        </item>
        <item>
          <p>
	    As of OTP 23, the distributed <seeerl
	    marker="kernel:disk_log"><c>disk_log</c></seeerl> feature
	    has been deprecated. It has also been scheduled for
	    removal in OTP 24.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-16495</p>
        </item>
        <item>
          <p>
	    Add the function <c>code:fetch_docs/1</c> for fetching
	    embedded documentation for aa Erlang module.</p>
          <p>
	    Own Id: OTP-16499</p>
        </item>
        <item>
          <p>
	    Improve configure for the net nif, which should increase
	    portability.</p>
          <p>
	    Own Id: OTP-16530 Aux Id: OTP-16464 </p>
        </item>
        <item>
          <p>
	    socket: Socket counters and socket global counters are
	    now represented as maps (instead of property lists).</p>
          <p>
	    Own Id: OTP-16535</p>
        </item>
        <item>
          <p>
	    The experimental socket module has gotten restrictions
	    removed so now the 'seqpacket' socket type should work
	    for any communication domain (protocol family) where the
	    OS supports it, typically the Unix Domain.</p>
          <p>
	    Own Id: OTP-16550 Aux Id: ERIERL-476 </p>
        </item>
        <item>
          <p>
	    Allow using custom IO devices in <c>logger_std_h</c>.</p>
          <p>
	    Own Id: OTP-16563 Aux Id: PR-2523 </p>
        </item>
        <item>
	    <p>Added <c>file:del_dir_r/1</c> which deletes a
	    directory together with all of its contents, similar to
	    <c>rm -rf</c> on Unix systems.</p>
          <p>
	    Own Id: OTP-16570 Aux Id: PR-2565 </p>
        </item>
        <item>
          <p>
	    socket: By default the socket options rcvtimeo and
	    sndtimeo are now disabled. To enable these, OTP now has
	    to be built with the configure option
	    --enable-esock-rcvsndtimeo</p>
          <p>
	    Own Id: OTP-16620</p>
        </item>
        <item>
          <p>
	    The experimental gen_tcp compatibility code utilizing the
	    socket module could loose buffered data when receiving a
	    specified number of bytes. This bug has been fixed.
	    Reported by Maksim Lapshin on bugs.erlang.org ERL-1234</p>
          <p>
	    Own Id: OTP-16632 Aux Id: ERL-1234 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.5.2.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p> By default <c>global</c> does <i>not</i> take any
	    actions to restore a fully connected network when
	    connections are lost due to network issues. This is
	    problematic for all applications expecting a fully
	    connected network to be provided, such as for example
	    <c>mnesia</c>, but also for <c>global</c> itself. A
	    network of overlapping partitions might cause the
	    internal state of <c>global</c> to become inconsistent.
	    Such an inconsistency can remain even after such
	    partitions have been brought together to form a fully
	    connected network again. The effect on other applications
	    that expects that a fully connected network is maintained
	    may vary, but they might misbehave in very subtle hard to
	    detect ways during such a partitioning. </p> <p> In order
	    to prevent such issues, we have introduced a <i>prevent
	    overlapping partitions</i> fix which can be enabled using
	    the <c>prevent_overlapping_partitions</c>
	    <c>kernel(6)</c> parameter. When this fix has been
	    enabled, <c>global</c> will actively disconnect from
	    nodes that reports that they have lost connections to
	    other nodes. This will cause fully connected partitions
	    to form instead of leaving the network in a state with
	    overlapping partitions. Note that this fix <i>has</i> to
	    be enabled on <i>all</i> nodes in the network in order to
	    work properly. Since this quite substantially changes the
	    behavior, this fix is currently disabled by default.
	    Since you might get hard to detect issues without this
	    fix you are, however, <i>strongly</i> advised to enable
	    this fix in order to avoid issues such as the ones
	    described above. As of OTP 25 this fix will become
	    enabled by default. </p>
          <p>
	    Own Id: OTP-17843 Aux Id: ERIERL-732, PR-5611 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    A <c>net_tickintensity</c> <c>kernel</c> parameter has
	    been introduced. It can be used to control the amount of
	    ticks during a <c>net_ticktime</c> period.</p>
          <p>
	    A new <c>net_kernel:start/2</c> function has also been
	    introduced in order to make it easier to add new options.
	    The use of <c>net_kernel:start/1</c> has been deprecated.</p>
          <p>
	    Own Id: OTP-17905 Aux Id: ERIERL-732, PR-5740 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.5.2.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fixed rare bug that could cause net_kernel process to
	    hang for ever. Have seen to happen with massive number of
	    TLS connections while remote nodes are restarting. Bug
	    exists since OTP-22.0.</p>
          <p>
	    Own Id: OTP-17476 Aux Id: GH-4931, PR-4934 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.5.2.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix a race condition in Global.</p>
          <p>
	    Own Id: OTP-16033 Aux Id: ERIERL-329, ERL-1414, GH-4448,
	    ERL-885, GH-3923 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.5.2.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>When running Xref in the <c>modules</c> mode, the
	    Debugger application would show up as a dependency for the
	    Kernel applications.</p>
          <p>
	    Own Id: OTP-17223 Aux Id: GH-4546, PR-4554 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.5.2.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix bug in <c>application:loaded_applications/0</c> that
	    could cause it to fail with <c>badarg</c> if for example
	    a concurrent upgrade/downgrade is running.</p>
          <p>
	    Own Id: OTP-16627 Aux Id: PR-2601 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.5.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The DNS resolver `inet_res` has been fixed to return the
	    last intermediate error when subsequent requests times
	    out.</p>
          <p>
	    Own Id: OTP-16414 Aux Id: ERIERL-452 </p>
        </item>
        <item>
          <p>
	    The prim_net nif (net/kernel) made use of an undefined
	    atom, notsup. This has now been corrected.</p>
          <p>
	    Own Id: OTP-16440</p>
        </item>
        <item>
          <p>
	    Fix a crash when attempting to log faults when loading
	    files during early boot.</p>
          <p>
	    Own Id: OTP-16491</p>
        </item>
        <item>
          <p>
	    Fix crash in logger when logging to a remote node during
	    boot.</p>
          <p>
	    Own Id: OTP-16493 Aux Id: ERIERL-459 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Improved <c>net_kernel</c> debug functionality.</p>
          <p>
	    Own Id: OTP-16458 Aux Id: PR-2525 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.5.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The 'socket state' info provided by the inet info
	    function has been improved</p>
          <p>
	    Own Id: OTP-16043 Aux Id: ERL-1036 </p>
        </item>
        <item>
          <p>
	    Fix bug where <c>logger</c> would crash when starting
	    when a very large log file needed to be rotated and
	    compressed.</p>
          <p>
	    Own Id: OTP-16145 Aux Id: ERL-1034 </p>
        </item>
        <item>
          <p>
	    Fixed a bug causing actual nodedown reason reported by
	    <seemfa
	    marker="kernel:net_kernel#monitor_nodes/2"><c>net_kernel:monitor_nodes(true,
	    [nodedown_reason])</c></seemfa> to be lost and replaced
	    by the reason <c>killed</c>.</p>
          <p>
	    Own Id: OTP-16216</p>
        </item>
        <item>
	    <p>The documentation for <c>rpc:call/4,5/</c> has been
	    updated to describe what happens when the called function
	    throws or return an <c>'EXIT'</c> tuple. </p>
          <p>
	    Own Id: OTP-16279 Aux Id: ERL-1066 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The type specification for <c>gen_sctp:connect/4,5</c>
	    has been corrected.</p>
          <p>
	    Own Id: OTP-15344 Aux Id: ERL-947 </p>
        </item>
        <item>
          <p>
	    Extra <c>-mode</c> flags given to <c>erl</c> are ignored
	    with a warning.</p>
          <p>
	    Own Id: OTP-15852</p>
        </item>
        <item>
          <p>
	    Fix type spec for <c>seq_trace:set_token/2</c>.</p>
          <p>
	    Own Id: OTP-15858 Aux Id: ERL-700 </p>
        </item>
        <item>
          <p>
	    <c>logger:compare_levels/2</c> would fail with a
	    <c>badarg</c> exception if given the values <c>all</c> or
	    <c>none</c> as any of the parameters. This is now
	    corrected.</p>
          <p>
	    Own Id: OTP-15942 Aux Id: PR-2301 </p>
        </item>
        <item>
          <p>
	    Fix bug where the log file in <c>logger_std_h</c> would
	    not be closed when the inode of the file changed. This
	    would in turn cause a file descriptor leak when tools
	    like logrotate are used.</p>
          <p>
	    Own Id: OTP-15997 Aux Id: PR-2331 </p>
        </item>
        <item>
          <p>
	    Fix a race condition in the debugging function
	    <c>net_kernel:nodes_info/0</c>.</p>
          <p>
	    Own Id: OTP-16022</p>
        </item>
        <item>
          <p>
	    Fix race condition when closing a file opened in
	    <c>compressed</c> or <c>delayed_write</c> mode.</p>
          <p>
	    Own Id: OTP-16023</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The possibility to send ancillary data, in particular the
	    TOS field, has been added to <c>gen_udp:send/4,5</c>.</p>
          <p>
	    Own Id: OTP-15747 Aux Id: ERIERL-294 </p>
        </item>
        <item>
          <p>
	    If the log file was given with relative path, the
	    standard logger handler (<c>logger_std_h</c>) would store
	    the file name with relative path. If the current
	    directory of the node was later changed, a new file would
	    be created relative the new current directory,
	    potentially failing with an <c>enoent</c> if the new
	    directory did not exist. This is now corrected and
	    <c>logger_std_h</c> always stores the log file name as an
	    absolute path, calculated from the current directory at
	    the time of the handler startup.</p>
          <p>
	    Own Id: OTP-15850</p>
        </item>
        <item>
          <p>
	    Support local sockets with inet:i/0.</p>
          <p>
	    Own Id: OTP-15935 Aux Id: PR-2299 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.4.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p><c>user</c>/<c>user_drv</c> could respond to io
	    requests before they had been processed, which could
	    cause data to be dropped if the emulator was halted soon
	    after a call to <c>io:format/2</c>, such as in an
	    escript.</p>
          <p>
	    Own Id: OTP-15805</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix so that when multiple <c>-sname</c> or <c>-name</c>
	    are given to <c>erl</c> the first one is chosen. Before
	    this fix distribution was not started at all when
	    multiple name options were given.</p>
          <p>
	    Own Id: OTP-15786 Aux Id: ERL-918 </p>
        </item>
        <item>
          <p>
	    Fix <c>inet_res</c> configuration pointing to
	    non-existing files to work again. This was broken in
	    KERNEL-6.3 (OTP-21.3).</p>
          <p>
	    Own Id: OTP-15806</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    A simple socket API is provided through the socket
	    module. This is a low level API that does *not* replace
	    gen_[tcp|udp|sctp]. It is intended to *eventually*
	    replace the inet driver, but not the high level
	    gen-modules (gen_tcp, gen_udp and gen_sctp). It also
	    provides a basic API that facilitates the implementation
	    of other protocols, that is TCP, UDP and SCTP. </p>
          <p>
	    Known issues are; No support for the Windows OS
	    (currently).</p>
          <p>
	    Own Id: OTP-14831</p>
        </item>
        <item>
          <p>
	    Improved the documentation for the linger option.</p>
          <p>
	    Own Id: OTP-15491 Aux Id: PR-2019 </p>
        </item>
        <item>
	    <p> Global no longer tries more than once when connecting
	    to other nodes. </p>
          <p>
	    Own Id: OTP-15607 Aux Id: ERIERL-280 </p>
        </item>
        <item>
          <p>
	    The dist messages EXIT, EXIT2 and MONITOR_DOWN have been
	    updated with new versions that send the reason term as
	    part of the payload of the message instead of as part of
	    the control message.</p>
          <p>
	    The old versions are still present and can be used when
	    communicating with nodes that don't support the new
	    versions.</p>
          <p>
	    Own Id: OTP-15611</p>
        </item>
        <item>
          <p>
	    Kernel configuration parameter <c>start_distribution =
	    boolean()</c> is added. If set to <c>false</c>, the
	    system is started with all distribution functionality
	    disabled. Defaults to <c>true</c>.</p>
          <p>
	    Own Id: OTP-15668 Aux Id: PR-2088 </p>
        </item>
        <item>
          <p>
	    In OTP-21.3, a warning was introduced for duplicated
	    applications/keys in configuration. This warning would be
	    displayed both when the configuration was given as a file
	    on system start, and during runtime via
	    <c>application:set_env/1,2</c>.</p>
          <p>
	    The warning is now changed to a <c>badarg</c> exception
	    in <c>application:set_env/1,2</c>. If the faulty
	    configuration is given in a configuration file on system
	    start, the startup will fail.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-15692 Aux Id: PR-2170 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.3.1.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix bug where the log file in <c>logger_std_h</c> would
	    not be closed when the inode of the file changed. This
	    would in turn cause a file descriptor leak when tools
	    like logrotate are used.</p>
          <p>
	    Own Id: OTP-15997 Aux Id: PR-2331 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.3.1.2</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The possibility to send ancillary data, in particular the
	    TOS field, has been added to <c>gen_udp:send/4,5</c>.</p>
          <p>
	    Own Id: OTP-15747 Aux Id: ERIERL-294 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.3.1.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix type spec for <c>seq_trace:set_token/2</c>.</p>
          <p>
	    Own Id: OTP-15858 Aux Id: ERL-700 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.3.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>Fixed a performance regression when reading files
	    opened with the <c>compressed</c> flag.</p>
          <p>
	    Own Id: OTP-15706 Aux Id: ERIERL-336 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    If for example the <c>/etc/hosts</c> did not come into
	    existence until after the kernel application had started,
	    its content was never read. This bug has now been
	    corrected.</p>
          <p>
	    Own Id: OTP-14702 Aux Id: PR-2066 </p>
        </item>
        <item>
          <p>
	    Fix bug where doing <c>seq_trace:reset_trace()</c> while
	    another process was doing a garbage collection could
	    cause the run-time system to segfault.</p>
          <p>
	    Own Id: OTP-15490</p>
        </item>
        <item>
          <p>
	    Fix <c>erl_epmd:port_please</c> spec to include
	    <c>atom()</c> and <c>string()</c>.</p>
          <p>
	    Own Id: OTP-15557 Aux Id: PR-2117 </p>
        </item>
        <item>
          <p>
	    The Logger handler logger_std_h now keeps track of the
	    inode of its log file in order to re-open the file if the
	    inode changes. This may happen, for instance, if the log
	    file is opened and saved by an editor.</p>
          <p>
	    Own Id: OTP-15578 Aux Id: ERL-850 </p>
        </item>
        <item>
          <p>
	    When user specific file modes are given to the logger
	    handler <c>logger_std_h</c>, they were earlier accepted
	    without any control. This is now changes, so Logger will
	    adjust the file modes as follows:</p>
          <p>
	    - If <c>raw</c> is not found in the list, it is
	    added.<br/> - If none of <c>write</c>, <c>append</c> or
	    <c>exclusive</c> are found in the list, <c>append</c> is
	    added.<br/> - If none of <c>delayed_write</c> or
	    <c>{delayed_write,Size,Delay}</c> are found in the list,
	    <c>delayed_write</c> is added.</p>
          <p>
	    Own Id: OTP-15602</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The standard logger handler, <c>logger_std_h</c>, now has
	    a new internal feature for log rotation. The rotation
	    scheme is as follows:</p>
          <p>
	    The log file to which the handler currently writes always
	    has the same name, i.e. the name which is configured for
	    the handler. The archived files have the same name, but
	    with extension ".N", where N is an integer. The newest
	    archive has extension ".0", and the oldest archive has
	    the highest number. </p>
          <p>
	    The size at which the log file is rotated, and the number
	    of archive files that are kept, is specified with the
	    handler specific configuration parameters
	    <c>max_no_bytes</c> and <c>max_no_files</c> respectively. </p>
          <p>
	    Archives can be compressed, in which case they get a
	    ".gz" file extension after the integer. Compression is
	    specified with the handler specific configuration
	    parameter <c>compress_on_rotate</c>.</p>
          <p>
	    Own Id: OTP-15479</p>
        </item>
        <item>
          <p>
	    The new functions <c>logger:i/0</c> and <c>logger:i/1</c>
	    are added. These provide the same information as
	    <c>logger:get_config/0</c> and other
	    <c>logger:get_*_config</c> functions, but the information
	    is more logically sorted and more readable.</p>
          <p>
	    Own Id: OTP-15600</p>
        </item>
        <item>
          <p>
	    Logger is now protected against overload due to massive
	    amounts of log events from the emulator or from remote
	    nodes.</p>
          <p>
	    Own Id: OTP-15601</p>
        </item>
        <item>
          <p>
	    Logger now uses os:system_time/1 instead of
	    erlang:system_time/1 to generate log event timestamps.</p>
          <p>
	    Own Id: OTP-15625</p>
        </item>
        <item>
          <p>
	    Add functions <c>application:set_env/1,2</c> and
	    <c>application:set_env/2</c>. These take a list of
	    application configuration parameters, and the behaviour
	    is equivalent to calling <c>application:set_env/4</c>
	    individually for each application/key combination, except
	    it is more efficient.</p>
          <p>
	    <c>set_env/1,2</c> warns about duplicated applications or
	    keys. The warning is also emitted during boot, if
	    applications or keys are duplicated within one
	    configuration file, e.g. sys.config.</p>
          <p>
	    Own Id: OTP-15642 Aux Id: PR-2164 </p>
        </item>
        <item>
          <p>
	    Handler specific configuration parameters for the
	    standard handler <c>logger_std_h</c> are changed to be
	    more intuitive and more similar to the disk_log handler.</p>
          <p>
	    Earlier there was only one parameter, <c>type</c>, which
	    could have the values <c>standard_io</c>,
	    <c>standard_error</c>, <c>{file,FileName}</c> or
	    <c>{file,FileName,Modes}</c>.</p>
          <p>
	    This is now changed, so the following parameters are
	    allowed:</p>
          <p>
	    <c>type = standard_io | standard_error | file</c><br/>
	    <c>file = file:filename()</c><br/> <c>modes =
	    [file:mode()]</c></p>
          <p>
	    All parameters are optional. <c>type</c> defaults to
	    <c>standard_io</c>, unless a file name is given, in which
	    case it defaults to <c>file</c>. If <c>type</c> is set to
	    <c>file</c>, the file name defaults to the same as the
	    handler id.</p>
          <p>
	    The potential incompatibility is that
	    <c>logger:get_config/0</c> and
	    <c>logger:get_handler_config/1</c> now returns the new
	    parameters, even if the configuration was set with the
	    old variant, e.g. <c>#{type=>{file,FileName}}</c>.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-15662</p>
        </item>
        <item>
          <p>
	    The new configuration parameter <c>file_check</c> is
	    added to the Logger handler <c>logger_std_h</c>. This
	    parameter specifies how long (in milliseconds) the
	    handler may wait before checking if the log file still
	    exists and the inode is the same as when it was opened.</p>
          <p>
	    The default value is 0, which means that this check is
	    done prior to each write operation. Setting a higher
	    number may improve performance, but adds the risk of
	    losing log events.</p>
          <p>
	    Own Id: OTP-15663</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.2.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Setting the <c>recbuf</c> size of an inet socket the
	    <c>buffer</c> is also automatically increased. Fix a bug
	    where the auto adjustment of inet buffer size would be
	    triggered even if an explicit inet buffer size had
	    already been set.</p>
          <p>
	    Own Id: OTP-15651 Aux Id: ERIERL-304 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A new function, <c>logger:update_handler_config/3</c> is
	    added, and the handler callback <c>changing_config</c>
	    now has a new argument, <c>SetOrUpdate</c>, which
	    indicates if the configuration change comes from
	    <c>set_handler_config/2,3</c> or
	    <c>update_handler_config/2,3</c>.</p>
          <p>
	    This allows the handler to consistently merge the new
	    configuration with the old (if the change comes from
	    <c>update_handler_config/2,3</c>) or with the default (if
	    the change comes from <c>set_handler_config/2,3</c>).</p>
          <p>
	    The built-in handlers <c>logger_std_h</c> and
	    <c>logger_disk_log_h</c> are updated accordingly. A bug
	    which could cause inconsistency between the handlers'
	    internal state and the stored configuration is also
	    corrected.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-15364</p>
        </item>
        <item>
          <p>
	    Fix fallback when custom erl_epmd client does not
	    implement address_please.</p>
          <p>
	    Own Id: OTP-15388 Aux Id: PR-1983 </p>
        </item>
        <item>
          <p>
	    The logger ets table did not have the
	    <c>read_concurrency</c> option. This is now added.</p>
          <p>
	    Own Id: OTP-15453 Aux Id: ERL-782 </p>
        </item>
        <item>
          <p>
	    During system start, logger has a simple handler which
	    prints to stdout. After the kernel supervision is
	    started, this handler is removed and replaced by the
	    default handler. Due to a bug, logger earlier issued a
	    debug printout saying it received an unexpected message,
	    which was the EXIT message from the simple handler's
	    process. This is now corrected. The simple handler's
	    process now unlinks from the logger process before
	    terminating.</p>
          <p>
	    Own Id: OTP-15466 Aux Id: ERL-788 </p>
        </item>
        <item>
          <p>
	    The logger handler <c>logger_std_h</c> would not
	    re-create it's log file if it was removed. Due to this it
	    could not be used with tools like 'logrotate'. This is
	    now corrected.</p>
          <p>
	    Own Id: OTP-15469</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    A function <c>inet:getifaddrs/1</c> that takes a list
	    with a namespace option has been added, for platforms
	    that support that feature, for example Linux (only?).</p>
          <p>
	    Own Id: OTP-15121 Aux Id: ERIERL-189, PR-1974 </p>
        </item>
        <item>
	    <p>Added the <c>nopush</c> option for TCP sockets, which
	    corresponds to <c>TCP_NOPUSH</c> on *BSD and
	    <c>TCP_CORK</c> on Linux.</p>
	    <p>This is also used internally in <c>file:sendfile</c>
	    to reduce latency on subsequent send operations.</p>
          <p>
	    Own Id: OTP-15357 Aux Id: ERL-698 </p>
        </item>
        <item>
          <p>
	    Optimize handling of send_delay for tcp sockes to better
	    work with the new pollthread implementation introduced in
	    OTP-21.</p>
          <p>
	    Own Id: OTP-15471 Aux Id: ERIERL-229 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.1.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix bug causing net_kernel process crash on connection
	    attempt from node with name identical to local node.</p>
          <p>
	    Own Id: OTP-15438 Aux Id: ERL-781 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The values <c>all</c> and <c>none</c> are documented as
	    valid value for the Kernel configuration parameter
	    <c>logger_level</c>, but would cause a crash during node
	    start. This is now corrected.</p>
          <p>
	    Own Id: OTP-15143</p>
        </item>
        <item>
          <p>
	    Fix some potential buggy behavior in how ticks are sent
	    on inter node distribution connections. Tick is now sent
	    to c-node even if there are unsent buffered data, as
	    c-nodes need ticks in order to send reply ticks. The
	    amount of sent data was also calculated wrongly when
	    ticks were suppressed due to unsent buffered data.</p>
          <p>
	    Own Id: OTP-15162 Aux Id: ERIERL-191 </p>
        </item>
        <item>
          <p>
	    Non semantic change in dist_util.erl to silence dialyzer
	    warning.</p>
          <p>
	    Own Id: OTP-15170</p>
        </item>
        <item>
          <p>
	    Fixed <c>net_kernel:connect_node(node())</c> to return
	    <c>true</c> (and do nothing) as it always has before
	    OTP-21.0. Also documented this successful "self connect"
	    as the expected behavior.</p>
          <p>
	    Own Id: OTP-15182 Aux Id: ERL-643 </p>
        </item>
        <item>
          <p>
	    The single_line option on logger_formatter would in some
	    cases add an unwanted comma after the association arrows
	    in a map. This is now corrected.</p>
          <p>
	    Own Id: OTP-15228</p>
        </item>
        <item>
          <p>
	    Improved robustness of distribution connection setup. In
	    OTP-21.0 a truly asynchronous connection setup was
	    introduced. This is further improvement on that work to
	    make the emulator more robust and also be able to recover
	    in cases when involved Erlang processes misbehave.</p>
          <p>
	    Own Id: OTP-15297 Aux Id: OTP-15279, OTP-15280 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    A new macro, <c>?LOG(Level,...)</c>, is added. This is
	    equivalent to the existing <c>?LOG_&lt;LEVEL&gt;(...)</c>
	    macros.</p>
          <p>
	    A new variant of Logger report callback is added, which
	    takes an extra argument containing options for size
	    limiting and line breaks. Module <c>proc_lib</c> in
	    <c>STDLIB</c> uses this for crash reports.</p>
          <p>
	    Logger configuration is now checked a bit more for
	    errors.</p>
          <p>
	    Own Id: OTP-15132</p>
        </item>
        <item>
          <p>
	    The socket options <c>recvtos</c>, <c>recvttl</c>,
	    <c>recvtclass</c> and <c>pktoptions</c> have been
	    implemented in the socket modules. See the documentation
	    for the <c>gen_tcp</c>, <c>gen_udp</c> and <c>inet</c>
	    modules. Note that support for these in the runtime
	    system is platform dependent. Especially for
	    <c>pktoptions</c> which is very Linux specific and
	    obsoleted by the RFCs that defined it.</p>
          <p>
	    Own Id: OTP-15145 Aux Id: ERIERL-187 </p>
        </item>
        <item>
          <p>
	    Add <c>logger:set_application_level/2</c> for setting the
	    logger level of all modules in one application.</p>
          <p>
	    Own Id: OTP-15146</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.0.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fixed bug in <c>net_kernel</c> that could cause an
	    emulator crash if certain connection attempts failed. Bug
	    exists since kernel-6.0 (OTP-21.0).</p>
          <p>
	    Own Id: OTP-15280 Aux Id: ERIERL-226, OTP-15279 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 6.0</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p> Clarify the documentation of <c>rpc:multicall/5</c>.
	    </p>
          <p>
	    Own Id: OTP-10551</p>
        </item>
        <item>
          <p>
	    The DNS resolver when getting econnrefused from a server
	    retained an invalid socket so look up towards the next
	    server(s) also failed.</p>
          <p>
	    Own Id: OTP-13133 Aux Id: PR-1557 </p>
        </item>
        <item>
          <p>
	    No resolver backend returns V4Mapped IPv6 addresses any
	    more. This was inconsistent before, some did, some did
	    not. To facilitate working with such addresses a new
	    function <c>inet:ipv4_mapped_ipv6_address/1</c> has been
	    added.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-13761 Aux Id: ERL-503 </p>
        </item>
        <item>
          <p>
	    The type specifications for <c>file:posix/0</c> and
	    <c>inet:posix/0</c> have been updated according to which
	    errors file and socket operations should be able to
	    return.</p>
          <p>
	    Own Id: OTP-14019 Aux Id: ERL-550 </p>
        </item>
        <item>
          <p>
	    Fix name resolving in IPv6 only environments when doing
	    the initial distributed connection.</p>
          <p>
	    Own Id: OTP-14501</p>
        </item>
        <item>
	    <p> File operations used to accept <seetype
	    marker="kernel:file#name_all">filenames</seetype>
	    containing null characters (integer value zero). This
	    caused the name to be truncated and in some cases
	    arguments to primitive operations to be mixed up.
	    Filenames containing null characters inside the filename
	    are now <em>rejected</em> and will cause primitive file
	    operations to fail. </p> <p> Also environment variable
	    operations used to accept <seetype
	    marker="kernel:os#env_var_name">names</seetype> and
	    <seetype
	    marker="kernel:os#env_var_value">values</seetype> of
	    environment variables containing null characters (integer
	    value zero). This caused operations to silently produce
	    erroneous results. Environment variable names and values
	    containing null characters inside the name or value are
	    now <em>rejected</em> and will cause environment variable
	    operations to fail. </p> <p>Primitive environment
	    variable operations also used to accept the <c>$=</c>
	    character in environment variable names causing various
	    problems. <c>$=</c> characters in environment variable
	    names are now also <em>rejected</em>. </p> <p>Also
	    <seemfa
	    marker="kernel:os#cmd/1"><c>os:cmd/1</c></seemfa> now
	    reject null characters inside its <seetype
	    marker="kernel:os#os_command">command</seetype>.
	    </p> <p><seemfa
	    marker="erts:erlang#open_port/2"><c>erlang:open_port/2</c></seemfa>
	    will also reject null characters inside the port name
	    from now on.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-14543 Aux Id: ERL-370 </p>
        </item>
        <item>
	    <p><c>os:putenv</c> and <c>os:getenv</c> no longer access
	    the process environment directly and instead work on a
	    thread-safe emulation. The only observable difference is
	    that it's <em>not</em> kept in sync with libc
	    <c>getenv(3)</c> / <c>putenv(3)</c>, so those who relied
	    on that behavior in drivers or NIFs will need to add
	    manual synchronization.</p> <p>On Windows this means that
	    you can no longer resolve DLL dependencies by modifying
	    the <c>PATH</c> just before loading the driver/NIF. To
	    make this less of a problem, the emulator now adds the
	    target DLL's folder to the DLL search path.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-14666</p>
        </item>
        <item>
          <p>
	    Fixed connection tick toward primitive hidden nodes
	    (erl_interface) that could cause faulty tick timeout in
	    rare cases when payload data is sent to hidden node but
	    not received.</p>
          <p>
	    Own Id: OTP-14681</p>
        </item>
        <item>
          <p>
	    Make group react immediately on an EXIT-signal from shell
	    in e.g ssh.</p>
          <p>
	    Own Id: OTP-14991 Aux Id: PR1705 </p>
        </item>
        <item>
          <p>
	    Calls to <c>gen_tcp:send/2</c> on closed sockets now
	    returns <c>{error, closed}</c> instead of
	    <c>{error,enotconn}</c>.</p>
          <p>
	    Own Id: OTP-15001</p>
        </item>
        <item>
          <p>
	    The <c>included_applications</c> key are no longer
	    duplicated as application environment variable. Earlier,
	    the included applications could be read both with
	    <c>application:get[_all]_env(...)</c> and
	    <c>application:get[_all]_key(...)</c> functions. Now, it
	    can only be read with
	    <c>application:get[_all]_key(...)</c>.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-15071</p>
        </item>
        <item>
	    <p>Owner and group changes through
	    <c>file:write_file_info</c>, <c>file:change_owner</c>,
	    and <c>file:change_group</c> will no longer report
	    success on permission errors.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-15118</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>A new logging API is added to Erlang/OTP, see the
	    <seeerl
	    marker="kernel:logger"><c>logger(3)</c></seeerl> manual
	    page, and section <seeguide
	    marker="kernel:logger_chapter">Logging</seeguide> in the
	    Kernel User's Guide.</p>
	    <p>Calls to <c>error_logger</c> are automatically
	    redirected to the new API, and legacy error logger event
	    handlers can still be used. It is, however, recommended
	    to use the Logger API directly when writing new code.</p>
	    <p>Notice the following potential incompatibilities:</p>
	    <list> <item><p>Kernel configuration parameters
	    <c>error_logger</c> still works, but is overruled if the
	    default handler's output destination is configured with
	    Kernel configuration parameter <c>logger</c>.</p> <p>In
	    general, parameters for configuring error logger are
	    overwritten by new parameters for configuring
	    Logger.</p></item> <item><p>The concept of SASL error
	    logging is deprecated, meaning that by default the SASL
	    application does not affect which log events are
	    logged.</p> <p>By default, supervisor reports and crash
	    reports are logged by the default Logger handler started
	    by Kernel, and end up at the same destination (terminal
	    or file) as other standard log event from Erlang/OTP.</p>
	    <p>Progress reports are not logged by default, but can be
	    enabled by setting the primary log level to info, for
	    example with the Kernel configuration parameter
	    <c>logger_level</c>.</p> <p>To obtain backwards
	    compatibility with the SASL error logging functionality
	    from earlier releases, set Kernel configuration parameter
	    <c>logger_sasl_compatible</c> to <c>true</c>. This
	    prevents the default Logger handler from logging any
	    supervisor-, crash-, or progress reports. Instead, SASL
	    adds a separate Logger handler during application start,
	    which takes care of these log events. The SASL
	    configuration parameters <c>sasl_error_logger</c> and
	    <c>sasl_errlog_type</c> specify the destination (terminal
	    or file) and severity level to log for these
	    events.</p></item></list>
          <p>
	    Since Logger is new in Erlang/OTP 21.0, we do reserve the
	    right to introduce changes to the Logger API and
	    functionality in patches following this release. These
	    changes might or might not be backwards compatible with
	    the initial version.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-13295</p>
        </item>
        <item>
          <p>
	    The function <c>inet:i/0</c> has been documented.</p>
          <p>
	    Own Id: OTP-13713 Aux Id: PR-1645 </p>
        </item>
        <item>
          <p>
	    Typespecs for <c>netns</c> and <c>bind_to_device</c>
	    options have been added to <c>gen_tcp</c>, <c>gen_udp</c>
	    and <c>gen_sctp</c> functions.</p>
          <p>
	    Own Id: OTP-14359 Aux Id: PR-1816 </p>
        </item>
        <item>
          <p>
	    New functionality for implementation of alternative
	    carriers for the Erlang distribution has been introduced.
	    This mainly consists of support for usage of distribution
	    controller processes (previously only ports could be used
	    as distribution controllers). For more information see
	    <seeguide marker="erts:alt_dist#distribution_module">ERTS
	    User's Guide ➜ How to implement an Alternative Carrier
	    for the Erlang Distribution ➜ Distribution
	    Module</seeguide>.</p>
          <p>
	    Own Id: OTP-14459</p>
        </item>
        <item>
	    <p><c>seq_trace</c> labels may now be any erlang
	    term.</p>
          <p>
	    Own Id: OTP-14899</p>
        </item>
        <item>
          <p>
	    The SSL distribution protocol <c>-proto inet_tls</c> has
	    stopped setting the SSL option
	    <c>server_name_indication</c>. New verify funs for client
	    and server in <c>inet_tls_dist</c> has been added, not
	    documented yet, that checks node name if present in peer
	    certificate. Usage is still also yet to be documented.</p>
          <p>
	    Own Id: OTP-14969 Aux Id: OTP-14465, ERL-598 </p>
        </item>
        <item>
          <p>
	    Changed timeout of <c>gen_server</c> calls to <c>auth</c>
	    server from default 5 seconds to <c>infinity</c>.</p>
          <p>
	    Own Id: OTP-15009 Aux Id: ERL-601 </p>
        </item>
        <item>
	    <p>The callback module passed as <c>-epmd_module</c> to
	    erl has been expanded to be able to do name and port
	    resolving.</p> <p>Documentation has also been added in
	    the <seeerl
	    marker="kernel:erl_epmd"><c>erl_epmd</c></seeerl>
	    reference manual and ERTS User's Guide <seeguide
	    marker="erts:alt_disco">How to Implement an Alternative
	    Node Discovery for Erlang Distribution</seeguide>.</p>
          <p>
	    Own Id: OTP-15086 Aux Id: PR-1694 </p>
        </item>
        <item>
          <p>
	    Included config file specified with relative path in
	    sys.config are now first searched for relative to the
	    directory of sys.config itself. If not found, it is also
	    searched for relative to the current working directory.
	    The latter is for backwards compatibility.</p>
          <p>
	    Own Id: OTP-15137 Aux Id: PR-1838 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.4.3.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Non semantic change in dist_util.erl to silence dialyzer
	    warning.</p>
          <p>
	    Own Id: OTP-15170</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.4.3.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix some potential buggy behavior in how ticks are sent
	    on inter node distribution connections. Tick is now sent
	    to c-node even if there are unsent buffered data, as
	    c-nodes need ticks in order to send reply ticks. The
	    amount of sent data was calculated wrongly when ticks
	    where suppressed due to unsent buffered data.</p>
          <p>
	    Own Id: OTP-15162 Aux Id: ERIERL-191 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.4.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p> Correct a few contracts. </p>
          <p>
	    Own Id: OTP-14889</p>
        </item>
        <item>
          <p>
	    Reject loading modules with names containing directory
	    separators ('/' or '\' on Windows).</p>
          <p>
	    Own Id: OTP-14933 Aux Id: ERL-564, PR-1716 </p>
        </item>
        <item>
          <p>
	    Fix bug in handling of os:cmd/2 option max_size on
	    windows.</p>
          <p>
	    Own Id: OTP-14940</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.4.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Add <c>os:cmd/2</c> that takes an options map as the
	    second argument.</p>
          <p>
	    Add <c>max_size</c> as an option to <c>os:cmd/2</c> that
	    control the maximum size of the result that
	    <c>os:cmd/2</c> will return.</p>
          <p>
	    Own Id: OTP-14823</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.4.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Refactored an internal API.</p>
          <p>
	    Own Id: OTP-14784</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Processes which did output after switching jobs (Ctrl+G)
	    could be left forever stuck in the io request.</p>
          <p>
	    Own Id: OTP-14571 Aux Id: ERL-472 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>Lock counting can now be fully toggled at runtime in
	    the lock counting emulator (<c>-emu_type lcnt</c>).
	    Everything is enabled by default to match the old
	    behavior, but specific categories can be toggled at will
	    with minimal runtime overhead when disabled. Refer to the
	    documentation on <c>lcnt:rt_mask/1</c> for details.</p>
          <p>
	    Own Id: OTP-13170</p>
        </item>
        <item>
	    <p><c>lcnt:collect</c> and <c>lcnt:clear</c> will no
	    longer block all other threads in the runtime system.</p>
          <p>
	    Own Id: OTP-14412</p>
        </item>
        <item>
          <p>
	    General Unicode improvements.</p>
          <p>
	    Own Id: OTP-14462</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.3.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>The documentation for the 'quiet' option in
	    disk_log:open/1 had an incorrect default value.</p>
          <p>
	    Own Id: OTP-14498</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>Function <c>inet:ntoa/1</c> has been fixed to return
	    lowercase letters according to RFC 5935 that has been
	    approved after this function was written. Previously
	    uppercase letters were returned so this may be a
	    backwards incompatible change depending on how the
	    returned address string is used.</p>
	    <p>Function <c>inet:parse_address/1</c> has been fixed to
	    accept %-suffixes on scoped addresses. The addresses does
	    not work yet, but gives no parse errors.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-13006 Aux Id: ERIERL-20, ERL-429 </p>
        </item>
        <item>
          <p>
	    Fix bug where gethostname would incorrectly fail with
	    enametoolong on Linux.</p>
          <p>
	    Own Id: OTP-14310</p>
        </item>
        <item>
          <p>
	    Fix bug causing <c>code:is_module_native</c> to falsely
	    return true when <c>local</c> call trace is enabled for
	    the module.</p>
          <p>
	    Own Id: OTP-14390</p>
        </item>
        <item>
          <p>
	    Add early reject of invalid node names from distributed
	    nodes.</p>
          <p>
	    Own Id: OTP-14426</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Since Unicode is now allowed in atoms an extra check is
	    needed for node names, which are restricted to Latin-1.</p>
          <p>
	    Own Id: OTP-13805</p>
        </item>
        <item>
	    <p>Replaced usage of deprecated symbolic <seetype
	    marker="erts:erlang#time_unit"><c>time
	    unit</c></seetype> representations.</p>
          <p>
	    Own Id: OTP-13831 Aux Id: OTP-13735 </p>
        </item>
        <item>
	    <p><c>file:write_file(Name, Data, [raw])</c> would turn
	    <c>Data</c> into a single binary before writing. This
	    meant it could not take advantage of the <c>writev()</c>
	    system call if it was given a list of binaries and told
	    to write with <c>raw</c> mode.</p>
          <p>
	    Own Id: OTP-13909</p>
        </item>
        <item>
	    <p>The performance of the <c>disk_log</c> has been
	    somewhat improved in some corner cases (big items), and
	    the documentation has been clarified. </p>
          <p>
	    Own Id: OTP-14057 Aux Id: PR-1245 </p>
        </item>
        <item>
	    <p>Functions for detecting changed code has been added.
	    <c>code:modified_modules/0</c> returns all currently
	    loaded modules that have changed on disk.
	    <c>code:module_status/1</c> returns the status for a
	    module. In the shell and in <c>c</c> module, <c>mm/0</c>
	    is short for <c>code:modified_modules/0</c>, and
	    <c>lm/0</c> reloads all currently loaded modules that
	    have changed on disk.</p>
          <p>
	    Own Id: OTP-14059</p>
        </item>
        <item>
          <p>
	    Introduce an event manager in Erlang to handle OS
	    signals. A subset of OS signals may be subscribed to and
	    those are described in the Kernel application.</p>
          <p>
	    Own Id: OTP-14186</p>
        </item>
        <item>
	    <p> Sockets can now be bound to device (SO_BINDTODEVICE)
	    on platforms where it is supported. </p> <p> This has
	    been implemented e.g to support VRF-Lite under Linux; see
	    <url
	    href="https://www.kernel.org/doc/Documentation/networking/vrf.txt">
	    VRF </url>, and GitHub pull request <url
	    href="https://github.com/erlang/otp/pull/1326">#1326</url>.
	    </p>
          <p>
	    Own Id: OTP-14357 Aux Id: PR-1326 </p>
        </item>
        <item>
          <p>
	    Added option to store shell_history on disk so that the
	    history can be reused between sessions.</p>
          <p>
	    Own Id: OTP-14409 Aux Id: PR-1420 </p>
        </item>
        <item>
	    <p> The size of crash reports created by
	    <c>gen_server</c>, <c>gen_statem</c> and <c>proc_lib</c>
	    is limited with aid of the Kernel application variable
	    <c>error_logger_format_depth</c>. The purpose is to limit
	    the size of the messages sent to the <c>error_logger</c>
	    process when processes with huge message queues or states
	    crash. </p> <p>The crash report generated by
	    <c>proc_lib</c> includes the new tag
	    <c>message_queue_len</c>. The neighbour report also
	    includes the new tag <c>current_stacktrace</c>. Finally,
	    the neighbour report no longer includes the tags
	    <c>messages</c> and <c>dictionary</c>. </p> <p> The new
	    function <c>error_logger:get_format_depth/0</c> can be
	    used to retrieve the value of the Kernel application
	    variable <c>error_logger_format_depth</c>. </p>
          <p>
	    Own Id: OTP-14417</p>
        </item>
        <item>
	    <p> One of the ETS tables used by the <c>global</c>
	    module is created with <c>{read_concurrency, true}</c> in
	    order to reduce contention. </p>
          <p>
	    Own Id: OTP-14419</p>
        </item>
        <item>
          <p>
	    Warnings have been added to the relevant documentation
	    about not using un-secure distributed nodes in exposed
	    environments.</p>
          <p>
	    Own Id: OTP-14425</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix a race during cleanup of os:cmd that would cause
	    os:cmd to hang indefinitely.</p>
          <p>
	    Own Id: OTP-14232 Aux Id: seq13275 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>The functions in the '<c>file</c>' module that take a
	    list of paths (e.g. <c>file:path_consult/2</c>) will now
	    continue to search in the path if the path contains
	    something that is not a directory.</p>
          <p>
	    Own Id: OTP-14191</p>
        </item>
        <item>
	    <p>Two OTP processes that are known to receive many
	    messages are 'rex' (used by 'rpc') and 'error_logger'.
	    Those processes will now store unprocessed messages
	    outside the process heap, which will potentially decrease
	    the cost of garbage collections.</p>
          <p>
	    Own Id: OTP-14192</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.1.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    <c>code:add_pathsa/1</c> and command line option
	    <c>-pa</c> both revert the given list of directories when
	    adding it at the beginning of the code path. This is now
	    documented.</p>
          <p>
	    Own Id: OTP-13920 Aux Id: ERL-267 </p>
        </item>
        <item>
          <p>
	    Add lost runtime dependency to erts-8.1. This should have
	    been done in kernel-5.1 (OTP-19.1) as it cannot run
	    without at least erts-8.1 (OTP-19.1).</p>
          <p>
	    Own Id: OTP-14003</p>
        </item>
        <item>
          <p>
	    Type and doc for gen_{tcp,udp,sctp}:controlling_process/2
	    has been improved.</p>
          <p>
	    Own Id: OTP-14022 Aux Id: PR-1208 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix a memory leak when calling
	    seq_trace:get_system_tracer().</p>
          <p>
	    Own Id: OTP-13742</p>
        </item>
        <item>
          <p>
	    Fix for the problem that when adding the ebin directory
	    of an application to the code path, the
	    <c>code:priv_dir/1</c> function returns an incorrect path
	    to the priv directory of the same application.</p>
          <p>
	    Own Id: OTP-13758 Aux Id: ERL-195 </p>
        </item>
        <item>
          <p>
	    Fix code_server crash when adding code paths of two
	    levels.</p>
          <p>
	    Own Id: OTP-13765 Aux Id: ERL-194 </p>
        </item>
        <item>
          <p>
	    Respect -proto_dist switch while connection to EPMD</p>
          <p>
	    Own Id: OTP-13770 Aux Id: PR-1129 </p>
        </item>
        <item>
          <p>
	    Fixed a bug where init:stop could deadlock if a process
	    with infinite shutdown timeout (e.g. a supervisor)
	    attempted to load code while terminating.</p>
          <p>
	    Own Id: OTP-13802</p>
        </item>
        <item>
          <p>
	    Close stdin of commands run in os:cmd. This is a
	    backwards compatibility fix that restores the behaviour of
	    pre 19.0 os:cmd.</p>
          <p>
	    Own Id: OTP-13867 Aux Id: seq13178 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add <c>net_kernel:setopts/2</c> and
	    <c>net_kernel:getopts/2</c> to control options for
	    distribution sockets in runtime.</p>
          <p>
	    Own Id: OTP-13564</p>
        </item>
        <item>
          <p>
	    Rudimentary support for DSCP has been implemented
	    in the guise of a <c>tclass</c> socket option
	    for IPv6 sockets.</p>
          <p>
	    Own Id: OTP-13582</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.0.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    When calling os:cmd from a process that has set trap_exit
	    to true an 'EXIT' message would be left in the message
	    queue. This bug was introduced in kernel vsn 5.0.1.</p>
          <p>
	    Own Id: OTP-13813</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.0.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix a os:cmd bug where creating a background job using
	    &amp; would cause os:cmd to hang until the background job
	    terminated or closed its stdout and stderr file
	    descriptors. This bug has existed from kernel 5.0.</p>
          <p>
	    Own Id: OTP-13741</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 5.0</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>The handling of <c>on_load</c> functions has been
	    improved. The major improvement is that if a code upgrade
	    fails because the <c>on_load</c> function fails, the
	    previous version of the module will now be retained.</p>
          <p>
	    Own Id: OTP-12593</p>
        </item>
        <item>
	    <p><c>rpc:call()</c> and <c>rpc:block_call()</c> would
	    sometimes cause an exception (which was not mentioned in
	    the documentation). This has been corrected so that
	    <c>{badrpc,Reason}</c> will be returned instead.</p>
          <p>
	    Own Id: OTP-13409</p>
        </item>
        <item>
	    <p>On Windows, for modules that were loaded early (such
	    as the <c>lists</c> module), <c>code:which/1</c> would
	    return the path with mixed slashes and backslashes, for
	    example: <c>"C:\\Program
	    Files\\erl8.0/lib/stdlib-2.7/ebin/lists.beam"</c>. This
	    has been corrected.</p>
          <p>
	    Own Id: OTP-13410</p>
        </item>
        <item>
          <p>
	    Make file:datasync use fsync instead of fdatasync on Mac
	    OSX.</p>
          <p>
	    Own Id: OTP-13411</p>
        </item>
        <item>
          <p>
	    The default chunk size for the fallback sendfile
	    implementation, used on platforms that do not have a
	    native sendfile, has been decreased in order to reduce
	    connectivity issues.</p>
          <p>
	    Own Id: OTP-13444</p>
        </item>
        <item>
          <p>
	    Large file writes (2Gb or more) could fail on some Unix
	    platforms (for example, OS X and FreeBSD).</p>
          <p>
	    Own Id: OTP-13461</p>
        </item>
        <item>
          <p>
	    A bug has been fixed where the DNS resolver inet_res did
	    not refresh its view of the contents of for example
	    resolv.conf immediately after start and hence then failed
	    name resolution. Reported and fix suggested by Michal
	    Ptaszek in GitHUB pull req #949.</p>
          <p>
	    Own Id: OTP-13470 Aux Id: Pull #969 </p>
        </item>
        <item>
          <p>
	    Fix process leak from global_group.</p>
          <p>
	    Own Id: OTP-13516 Aux Id: PR-1008 </p>
        </item>
        <item>
          <p>
	    The function <c>inet:gethostbyname/1</c> now honors the
	    resolver option <c>inet6</c> instead of always looking up
	    IPv4 addresses.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-13622 Aux Id: PR-1065 </p>
        </item>
        <item>
          <p>
	    The <c>Status</c> argument to <c>init:stop/1</c> is now
	    sanity checked to make sure <c>erlang:halt</c> does not
	    fail.</p>
          <p>
	    Own Id: OTP-13631 Aux Id: PR-911 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add {line_delim, byte()} option to inet:setopts/2 and
	    decode_packet/3</p>
          <p>
	    Own Id: OTP-12837</p>
        </item>
        <item>
          <p>
	    Added <seemfa
	    marker="kernel:os#perf_counter/1">os:perf_counter/1</seemfa>.</p>
          <p>
	    The perf_counter is a very very cheap and high resolution
	    timer that can be used to timestamp system events. It
	    does not have monoticity guarantees, but should on most
	    OS's expose a monotonous time.</p>
          <p>
	    Own Id: OTP-12908</p>
        </item>
        <item>
          <p>
	    The os:cmd call has been optimized on unix platforms to
	    be scale better with the number of schedulers.</p>
          <p>
	    Own Id: OTP-13089</p>
        </item>
        <item>
	    <p>New functions that can load multiple modules at once
	    have been added to the '<c>code</c>' module. The
	    functions are <c>code:atomic_load/1</c>,
	    <c>code:prepare_loading/1</c>,
	    <c>code:finish_loading/1</c>, and
	    <c>code:ensure_modules_loaded/1</c>.</p>
          <p>
	    Own Id: OTP-13111</p>
        </item>
        <item>
          <p>
	    The code path cache feature turned out not to be very
	    useful in practice and has been removed. If an attempt is
	    made to enable the code path cache, there will be a
	    warning report informing the user that the feature has
	    been removed.</p>
          <p>
	    Own Id: OTP-13191</p>
        </item>
        <item>
	    <p>When an attempt is made to start a distributed Erlang
	    node with the same name as an existing node, the error
	    message will be much shorter and easier to read than
	    before. Example:</p>
	    <p><c>Protocol 'inet_tcp': the name somename@somehost
	    seems to be in use by another Erlang node</c></p>
          <p>
	    Own Id: OTP-13294</p>
        </item>
        <item>
          <p>
	    The output of the default error logger is somewhat
	    prettier and easier to read. The default error logger is
	    used during start-up of the OTP system. If the start-up
	    fails, the output will be easier to read.</p>
          <p>
	    Own Id: OTP-13325</p>
        </item>
        <item>
	    <p>The functions <c>rpc:safe_multi_server_call/2,3</c>
	    that were deprecated in R12B have been removed.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-13449</p>
        </item>
        <item>
          <p>
	    Update the error reasons in dist_util, and show them in
	    the logs if net_kernel:verbose(1) has been called.</p>
          <p>
	    Own Id: OTP-13458</p>
        </item>
        <item>
          <p>
	    Experimental support for Unix Domain Sockets has been
	    implemented. Read the sources if you want to try it out.
	    Example: <c>gen_udp:open(0,
	    [{ifaddr,{local,"/tmp/socket"}}])</c>. Documentation will
	    be written after user feedback on the experimental API.</p>
          <p>
	    Own Id: OTP-13572 Aux Id: PR-612 </p>
        </item>
        <item>
          <p>
	    Allow heart to be configured to not kill the previous
	    emulator before calling the HEART_COMMAND. This is done
	    by setting the environment variable HEART_NO_KILL to
	    TRUE.</p>
          <p>
	    Own Id: OTP-13650</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 4.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p><c>code:load_abs([10100])</c> would bring down the
	    entire runtime system and create a crash dump. Corrected
	    to generate an error exception in the calling
	    process.</p>
	    <p>Also corrected specs for code loading functions and
	    added more information in the documentation about the
	    error reasons returned by code-loading functions.</p>
          <p>
	    Own Id: OTP-9375</p>
        </item>
        <item>
          <p>
	    <seemfa
	    marker="kernel:gen_tcp#accept/2"><c>gen_tcp:accept/2</c></seemfa>
	    was not <seeguide
	    marker="erts:time_correction#Time_Warp_Safe_Code">time
	    warp safe</seeguide>. This since it used the same time as
	    returned by <seemfa
	    marker="erts:erlang#now/0"><c>erlang:now/0</c></seemfa>
	    when calculating timeout. This has now been fixed.</p>
          <p>
	    Own Id: OTP-13254 Aux Id: OTP-11997, OTP-13222 </p>
        </item>
        <item>
	    <p> Correct the contract for <c>inet:getifaddrs/1</c>.
	    </p>
          <p>
	    Own Id: OTP-13335 Aux Id: ERL-95 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Time warp safety improvements.</p>
          <p>
	    Introduced the options <c>monotonic_timestamp</c>, and
	    <c>strict_monotonic_timestamp</c> to the trace,
	    sequential trace, and system profile functionality. This
	    since the already existing <c>timestamp</c> option is not
	    time warp safe.</p>
          <p>
	    Introduced the option <c>safe_fixed_monotonic_time</c> to
	    <c>ets:info/2</c> and <c>dets:info/2</c>. This since the
	    already existing <c>safe_fixed</c> option is not time
	    warp safe.</p>
          <p>
	    Own Id: OTP-13222 Aux Id: OTP-11997 </p>
        </item>
        <item>
          <p>
	    Add validation callback for heart</p>
          <p>
	    The erlang heart process may now have a validation
	    callback installed. The validation callback will be
	    executed, if present, before any heartbeat to heart port
	    program. If the validation fails, or stalls, no heartbeat
	    will be sent and the node will go down.</p>
          <p>
	    With the option <c>'check_schedulers'</c> heart executes
	    a responsiveness check of the schedulers before a
	    heartbeat is sent to the port program. If the
	    responsiveness check fails, the heartbeat will not be
	    performed (as intended).</p>
          <p>
	    Own Id: OTP-13250</p>
        </item>
        <item>
          <p>
	    Clarify documentation of <c>net_kernel:allow/1</c></p>
          <p>
	    Own Id: OTP-13299</p>
        </item>
        <item>
          <p>
	    EPMD supports both IPv4 and IPv6</p>
          <p>
	    Also affects oldest supported windows version.</p>
          <p>
	    Own Id: OTP-13364</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 4.1.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Host name lookups though inet_res, the Erlang DNS
	    resolver, are now done case insensitively according to
	    RFC 4343. Patch by Holger Weiß.</p>
          <p>
	    Own Id: OTP-12836</p>
        </item>
        <item>
          <p>
	    IPv6 distribution handler has been updated to share code
	    with IPv4 so that all features are supported in IPv6 as
	    well. A bug when using an IPv4 address as hostname has
	    been fixed.</p>
          <p>
	    Own Id: OTP-13040</p>
        </item>
        <item>
          <p>
	    Caching of host names in the internal DNS resolver
	    inet_res has been made character case insensitive for
	    host names according to RFC 4343.</p>
          <p>
	    Own Id: OTP-13083</p>
        </item>
        <item>
	    <p>Cooked file mode buffering has been fixed so
	    file:position/2 now works according to Posix on Posix
	    systems i.e. when file:position/2 returns an error the
	    file pointer is unaffected.</p> <p>The Windows system
	    documentation, however, is unclear on this point so the
	    documentation of file:position/2 still does not promise
	    anything.</p> <p>Cooked file mode file:pread/2,3 and
	    file:pwrite/2,3 have been corrected to honor character
	    encoding like the combination of file:position/2 and
	    file:read/2 or file:write/2 already does. This is
	    probably not very useful since the character
	    representation on the caller's side is latin1,
	    period.</p>
          <p>
	    Own Id: OTP-13155 Aux Id: PR#646 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add {line_delim, byte()} option to inet:setopts/2 and
	    decode_packet/3</p>
          <p>
	    Own Id: OTP-12837</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 4.1</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>A mechanism for limiting the amount of text that the
	    built-in error logger events will produce has been
	    introduced. It is useful for limiting both the size of
	    log files and the CPU time used to produce them.</p>
	    <p>This mechanism is experimental in the sense that it
	    may be changed if it turns out that it does not solve the
	    problem it is supposed to solve. In that case, there may
	    be backward incompatible improvements to this
	    mechanism.</p>
	    <p>See the documentation for the config parameter
	    <c>error_logger_format_depth</c> in the Kernel
	    application for information about how to turn on this
	    feature.</p>
          <p>
	    Own Id: OTP-12864</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 4.0</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix error handling in <c>file:read_line/1</c> for Unicode
	    contents.</p>
          <p>
	    Own Id: OTP-12144</p>
        </item>
        <item>
          <p>
	    Introduce <c>os:getenv/2</c> which is similar to
	    <c>os:getenv/1</c> but returns the passed default value
	    if the required environment variable is undefined.</p>
          <p>
	    Own Id: OTP-12342</p>
        </item>
        <item>
          <p>
	    It is now possible to paste text in JCL mode (using
	    Ctrl-Y) that has been copied in the previous shell
	    session. Also a bug that caused the JCL mode to crash
	    when pasting text has been fixed.</p>
          <p>
	    Own Id: OTP-12673</p>
        </item>
        <item>
          <p>
	    Ensure that each segment of an IPv6 address when parsed
	    from a string has a maximum of 4 hex digits</p>
          <p>
	    Own Id: OTP-12773</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    New BIF: <c>erlang:get_keys/0</c>, lists all keys
	    associated with the process dictionary. Note:
	    <c>erlang:get_keys/0</c> is auto-imported.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-12151 Aux Id: seq12521 </p>
        </item>
        <item>
          <p>
	    The internal group to user_drv protocol has been changed
	    to be synchronous in order to guarantee that output sent
	    to a process implementing the user_drv protocol is
	    printed before replying. This protocol is used by the
	    standard_output device and the ssh application when
	    acting as a client. </p>
          <p>
	    This change changes the previous unlimited buffer when
	    printing to standard_io and other devices that end up in
	    user_drv to 1KB.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-12240</p>
        </item>
        <item>
	    <p>The <c>inflateInit/2</c> and <c>deflateInit/6</c>
	    functions now accepts a WindowBits argument equal to 8
	    and -8.</p>
          <p>
	    Own Id: OTP-12564</p>
        </item>
        <item>
          <p>
	    Map error logger warnings to warning messages by default.</p>
          <p>
	    Own Id: OTP-12755</p>
        </item>
        <item>
          <p>
	    Map beam error logger warnings to warning messages by
	    default. Previously these messages were mapped to the
	    error channel by default.</p>
          <p>
	    Own Id: OTP-12781</p>
        </item>
        <item>
          <p>
	    gen_tcp:shutdown/2 is now asynchronous</p>
          <p>
	    This solves the following problems with the old
	    implementation:</p>
          <p>
	    It doesn't block when the TCP peer is idle or slow. This
	    is the expected behaviour when shutdown() is called: the
	    caller needs to be able to continue reading from the
	    socket, not be prevented from doing so.</p>
          <p>
	    It doesn't truncate the output. The current version of
	    gen_tcp:shutdown/2 will truncate any outbound data in the
	    driver queue after about 10 seconds if the TCP peer is
	    idle of slow. Worse yet, it doesn't even inform anyone
	    that the data has been truncated: 'ok' is returned to the
	    caller; and a FIN rather than an RST is sent to the TCP
	    peer.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-12797</p>
        </item>
        <item>
          <p>
	    There are many cases where user code needs to be able to
	    distinguish between a socket that was closed normally and
	    one that was aborted. Setting the option
	    {show_econnreset, true} enables the user to receive
	    ECONNRESET errors on both active and passive sockets.</p>
          <p>
	    Own Id: OTP-12843</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 3.2.0.1</title>
    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>The 'raw' socket option could not be used multiple times
	    in one call to any e.g gen_tcp function because only one
	    of the occurrences were used. This bug has been fixed,
	    and also a small bug concerning propagating error codes
	    from within inet:setopts/2.</p>
          <p>Own Id: OTP-11482 Aux Id: seq12872 </p>
          </item>
        </list>
      </section>
    </section>


<section><title>Kernel 3.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A bug causing an infinite loop in hostname resolving has
	    been corrected. To trigger this bug you would have to
	    enter an bogus search method from a configuration file
	    e.g .inetrc.</p>
          <p>
	    Bug pinpointed by Emil Holmström</p>
          <p>
	    Own Id: OTP-12133</p>
        </item>
        <item>
          <p>
	    The standard_error process now handles the getopts I/O
	    protocol request correctly and stores its encoding in the
	    same way as standard_io.</p>
          <p>
	    Also, io:put_chars(standard_error, [oops]) could
	    previously crash the standard_error process. This is now
	    corrected.</p>
          <p>
	    Own Id: OTP-12424</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Configuration parameters for the Kernel application that
	    allows setting socket options for the distribution
	    sockets have been added. See the application Kernel
	    documentation; parameters 'inet_dist_listen_options' and
	    'inet_dist_connect_options'.</p>
          <p>
	    Own Id: OTP-12476 Aux Id: OTP-12476 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 3.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Make sure to install .hrl files when needed</p>
          <p>
	    Own Id: OTP-12197</p>
        </item>
        <item>
          <p>
	    Removed the undocumented application environment variable
	    'raw_files' from the kernel application. This variable
	    was checked (by call to application:get_env/2) each time
	    a raw file was to be opened in the file module.</p>
          <p>
	    Own Id: OTP-12276</p>
        </item>
        <item>
          <p>
	    A bug has been fixed when using the netns option to
	    gen_udp, which accidentally only worked if it was the
	    last option.</p>
          <p>
	    Own Id: OTP-12314</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Updated documentation for inet buffer size options.</p>
          <p>
	    Own Id: OTP-12296</p>
        </item>
        <item>
          <p>
	    Introduce new option 'raw' in file_info and link_info
	    functions. This option allows the caller not to go
	    through the file server for information about files
	    guaranteed to be local.</p>
          <p>
	    Own Id: OTP-12325</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 3.0.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Accept inet:ip_address() in net_adm:names/1</p>
          <p>
	    Own Id: OTP-12154</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 3.0.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    OTP-11850 fixed filelib:wildcard/1 to work with broken
	    symlinks. This correction, however, introduced problems
	    since symlinks were no longer followed for functions like
	    filelib:ensure_dir/1, filelib:is_dir/1,
	    filelib:file_size/1, etc. This is now corrected.</p>
          <p>
	    Own Id: OTP-12054 Aux Id: seq12660 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 3.0.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    If the Config given to
	    application_controller:change_application_data included
	    other config files, it was only expanded for already
	    existing (loaded) applications. If an upgrade added a new
	    application which had config data in an included config
	    file, the new application did not get correct config
	    data.</p>
          <p>
	    This is now changed so config data will be expanded for
	    all applications.</p>
          <p>
	    Own Id: OTP-11864</p>
        </item>
        <item>
	    <p>It was allowed to re-load pre-loaded modules such as
	    <c>erlang</c>, but that could cause strange and unwanted
	    things to happen, such as call <c>apply/3</c> to loop.
	    Pre-loaded modules are now sticky by default. (Thanks to
	    Loïc Hoguin for reporting this bug.)</p>
	    <p><c>code:add_path("/ending/in/slash/")</c> removes the
	    trailing slash, adding <c>/ending/in/slash</c> to the
	    code path. However,
	    <c>code:del_path("/ending/in/slash/")</c> would fail to
	    remove the path since it did not remove the trailing
	    slash. This has been fixed.</p>
          <p>
	    Own Id: OTP-11913</p>
        </item>
        <item>
          <p>
	    Fix erts_debug:size/1 to handle Map sizes</p>
          <p>
	    Own Id: OTP-11923</p>
        </item>
        <item>
	    <p>The documentation for <c>file:file_info/1</c> has been
	    removed. The function itself was removed a long time
	    ago.</p>
          <p>
	    Own Id: OTP-11982</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 3.0</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fixed a deadlock possibility in terminate application</p>
          <p>
	    Own Id: OTP-11171</p>
        </item>
        <item>
          <p>
	    Fixed bug where sendfile would return the wrong error
	    code for a remotely closed socket if the socket was in
	    passive mode. (Thanks to Vincent Siliakus for reporting
	    the bug.)</p>
          <p>
	    Own Id: OTP-11614</p>
        </item>
        <item>
          <p>
	    The new option <c>persistent</c> is added to
	    <c>application:set_env/4</c> and
	    <c>application:unset_env/3</c>. An environment key set
	    with the <c>persistent</c> option will not be overridden
	    by the ones configured in the application resource file
	    on load. This means persistent values will stick after
	    the application is loaded and also on application reload.
	    (Thanks to José Valim)</p>
          <p>
	    Own Id: OTP-11708</p>
        </item>
        <item>
          <p>
	    The spec for file:set_cwd/1 is modified to also accept
	    binaries as arguments. This has always been allowed in
	    the code, but it was not reflected in the spec since
	    binaries are mostly used for raw file names. Raw file
	    names are names that are not encoded according to
	    file:native_name_encoding(), and these are not allowed in
	    file:set_cwd/1. The spec is now, however, more allowing
	    in order to avoid unnecessary dialyzer warnings. Raw file
	    names will still fail in runtime with reason
	    'no_translation'. (Thanks to José Valim)</p>
          <p>
	    Own Id: OTP-11787</p>
        </item>
      </list>
    </section>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    heart:set_cmd/1 is updated to allow unicode code points >
	    255 in the given heart command</p>
          <p>
	    Own Id: OTP-10843</p>
        </item>
        <item>
	    <p> Dialyzer's <c>unmatched_return</c> warnings have been
	    corrected. </p>
          <p>
	    Own Id: OTP-10908</p>
        </item>
        <item>
          <p>
	    Make erlang:open_port/2 spawn and spawn_executable handle
	    unicode.</p>
          <p>
	    Own Id: OTP-11105</p>
        </item>
        <item>
          <p>
	    Erlang/OTP has been ported to the realtime operating
	    system OSE. The port supports both smp and non-smp
	    emulator. For details around the port and how to started
	    see the User's Guide in the ose application. </p>
          <p>
	    Note that not all parts of Erlang/OTP has been ported. </p>
          <p>
	    Notable things that work are: non-smp and smp emulators,
	    OSE signal interaction, crypto, asn1, run_erl/to_erl,
	    tcp, epmd, distribution and most if not all non-os
	    specific functionality of Erlang.</p>
          <p>
	    Notable things that does not work are: udp/sctp, os_mon,
	    erl_interface, binding of schedulers.</p>
          <p>
	    Own Id: OTP-11334</p>
        </item>
        <item>
          <p>
	    Add the {active,N} socket option for TCP, UDP, and SCTP,
	    where N is an integer in the range -32768..32767, to
	    allow a caller to specify the number of data messages to
	    be delivered to the controlling process. Once the
	    socket's delivered message count either reaches 0 or is
	    explicitly set to 0 with inet:setopts/2 or by including
	    {active,0} as an option when the socket is created, the
	    socket transitions to passive ({active, false}) mode and
	    the socket's controlling process receives a message to
	    inform it of the transition. TCP sockets receive
	    {tcp_passive,Socket}, UDP sockets receive
	    {udp_passive,Socket} and SCTP sockets receive
	    {sctp_passive,Socket}. </p>
          <p>
	    The socket's delivered message counter defaults to 0, but
	    it can be set using {active,N} via any gen_tcp, gen_udp,
	    or gen_sctp function that takes socket options as
	    arguments, or via inet:setopts/2. New N values are added
	    to the socket's current counter value, and negative
	    numbers can be used to reduce the counter value.
	    Specifying a number that would cause the socket's counter
	    value to go above 32767 causes an einval error. If a
	    negative number is specified such that the counter value
	    would become negative, the socket's counter value is set
	    to 0 and the socket transitions to passive mode. If the
	    counter value is already 0 and inet:setopts(Socket,
	    [{active,0}]) is specified, the counter value remains at
	    0 but the appropriate passive mode transition message is
	    generated for the socket.</p>
          <p>
	    Thanks to Steve Vinoski</p>
          <p>
	    Own Id: OTP-11368</p>
        </item>
        <item>
          <p>
	    A call to either the <c>garbage_collect/1</c> BIF or the
	    <c>check_process_code/2</c> BIF may trigger garbage
	    collection of another processes than the process calling
	    the BIF. The previous implementations performed these
	    kinds of garbage collections without considering the
	    internal state of the process being garbage collected. In
	    order to be able to more easily and more efficiently
	    implement yielding native code, these types of garbage
	    collections have been rewritten. A garbage collection
	    like this is now triggered by an asynchronous request
	    signal, the actual garbage collection is performed by the
	    process being garbage collected itself, and finalized by
	    a reply signal to the process issuing the request. Using
	    this approach processes can disable garbage collection
	    and yield without having to set up the heap in a state
	    that can be garbage collected.</p>
          <p>
	    The <seemfa
	    marker="erts:erlang#garbage_collect/2"><c>garbage_collect/2</c></seemfa>,
	    and <seemfa
	    marker="erts:erlang#check_process_code/3"><c>check_process_code/3</c></seemfa>
	    BIFs have been introduced. Both taking an option list as
	    last argument. Using these, one can issue asynchronous
	    requests.</p>
          <p>
	    <c>code:purge/1</c> and <c>code:soft_purge/1</c> have
	    been rewritten to utilize asynchronous
	    <c>check_process_code</c> requests in order to
	    parallelize work.</p>
          <p>
	    Characteristics impact: A call to the
	    <c>garbage_collect/1</c> BIF or the
	    <c>check_process_code/2</c> BIF will normally take longer
	    time to complete while the system as a whole won't be as
	    much negatively effected by the operation as before. A
	    call to <c>code:purge/1</c> and <c>code:soft_purge/1</c>
	    may complete faster or slower depending on the state of
	    the system while the system as a whole won't be as much
	    negatively effected by the operation as before.</p>
          <p>
	    Own Id: OTP-11388 Aux Id: OTP-11535, OTP-11648 </p>
        </item>
        <item>
          <p>
	    Add sync option to file:open/2.</p>
          <p>
	    The sync option adds the POSIX O_SYNC flag to the open
	    system call on platforms that support the flag or its
	    equivalent, e.g., FILE_FLAG_WRITE_THROUGH on Windows. For
	    platforms that don't support it, file:open/2 returns
	    {error, enotsup} if the sync option is passed in. Thank
	    to Steve Vinoski and Joseph Blomstedt</p>
          <p>
	    Own Id: OTP-11498</p>
        </item>
        <item>
	    <p> The contract of <c>inet:ntoa/1</c> has been
	    corrected. </p> <p> Thanks to Max Treskin. </p>
          <p>
	    Own Id: OTP-11730</p>
        </item>
      </list>
    </section>
</section>

<section><title>Kernel 2.16.4.1</title>

  <section><title>Known Bugs and Problems</title>
  <list>
    <item>
      <p>
        When using gen_tcp:connect and the <c>fd</c> option with
        <c>port</c> and/or <c>ip</c>, the <c>port</c> and
        <c>ip</c> options were ignored. This has been fixed so
        that if <c>port</c> and/or <c>ip</c> is specified
        together with <c>fd</c> a bind is requested for that
        <c>fd</c>. If <c>port</c> and/or <c>ip</c> is not
      specified bind will not be called.</p>
      <p>
      Own Id: OTP-12061</p>
    </item>
  </list>
  </section>
</section>

<section><title>Kernel 2.16.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix the typespec for the inet:ifget/2 and inet:ifget/3
	    return value. Thanks to Ali Sabil.</p>
          <p>
	    Own Id: OTP-11377</p>
        </item>
        <item>
          <p>
	    Fix various typos in erts, kernel and ssh. Thanks to
	    Martin Hässler.</p>
          <p>
	    Own Id: OTP-11414</p>
        </item>
        <item>
          <p>
	    Fix rpc multicall sample code. Thanks to Edwin Fine.</p>
          <p>
	    Own Id: OTP-11471</p>
        </item>
        <item>
          <p>
	    Under rare circumstances a process calling <seemfa
	    marker="kernel:inet#close/1"><c>inet:close/1</c></seemfa>,
	    <seemfa
	    marker="kernel:gen_tcp#close/1"><c>gen_tcp:close/1</c></seemfa>,
	    <seemfa
	    marker="kernel:gen_udp#close/1"><c>gen_udp:close/1</c></seemfa>,
	    or <seemfa
	    marker="kernel:gen_sctp#close/1"><c>gen_sctp:close/1</c></seemfa>
	    could hang in the call indefinitely.</p>
          <p>
	    Own Id: OTP-11491</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add more SCTP errors as described in RFC 4960. Thanks to
	    Artem Teslenko.</p>
          <p>
	    Own Id: OTP-11379</p>
        </item>
        <item>
          <p>
	    Add new BIF os:unsetenv/1 which deletes an environment
	    variable. Thanks to Martin Hässler.</p>
          <p>
	    Own Id: OTP-11446</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.16.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix indentation of User switch command help in Erlang
	    shell. Thanks to Sylvain Benner.</p>
          <p>
	    Own Id: OTP-11209</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The previous undocumented function ntoa/1 has been added
	    to inet docs and exported in the inet module.</p>
          <p>
	    Own Id: OTP-10676 Aux Id: OTP-10314 </p>
        </item>
        <item>
          <p>
	    Fix typo in abcast() function comment. Thanks to Johannes
	    Weissl.</p>
          <p>
	    Own Id: OTP-11219</p>
        </item>
        <item>
          <p>
	    Add application:ensure_all_started/1-2. Thanks to Fred
	    Hebert.</p>
          <p>
	    Own Id: OTP-11250</p>
        </item>
        <item>
          <p>
	    Make edlin understand a few important control keys.
	    Thanks to Stefan Zegenhagen.</p>
          <p>
	    Own Id: OTP-11251</p>
        </item>
        <item>
          <p>
	    Cleanup of hipe_unified_loader, eliminating uses of
	    is_subtype/2 in specs, change module-local void functions
	    to return 'ok' instead of [] and made sure there are no
	    dialyzer warnings with --Wunmatched_returns. Thanks to
	    Kostis Sagonas.</p>
          <p>
	    Own Id: OTP-11301</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.16.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A bug in prim_inet has been corrected. If the port owner
	    was killed at a bad time while closing the socket port
	    the port could become orphaned hence causing port and
	    socket leaking. Reported by Fred Herbert, Dmitry Belyaev
	    and others.</p>
          <p>
	    Own Id: OTP-10497 Aux Id: OTP-10562 </p>
        </item>
        <item>
          <p>
	    A few bugs regarding case sensitivity for hostname
	    resolution while using e.g the internal lookup types
	    'file' and 'dns' has been corrected. When looking up
	    hostnames ASCII letters a-z are to be regarded as the
	    same as A-Z according to RFC 4343 "Domain Name System
	    (DNS) Case Insensitivity Clarification", and this was not
	    always the case.</p>
          <p>
	    Own Id: OTP-10689 Aux Id: seq12227 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Add <c>application:ensure_started/1,2</c>. It is
	    equivavlent to <c>application:start/1,2</c> except it
	    returns <c>ok</c> for already started applications.</p>
          <p>
	    Own Id: OTP-10910</p>
        </item>
        <item>
          <p>
	    Optimize communication with file io server. Thanks to
	    Anthony Ramine.</p>
          <p>
	    Own Id: OTP-11040</p>
        </item>
        <item>
	    <p>Erlang source files with non-ASCII characters are now
	    encoded in UTF-8 (instead of latin1).</p>
          <p>
	    Own Id: OTP-11041 Aux Id: OTP-10907 </p>
        </item>
        <item>
          <p>
	    Optimization of simultaneous <c>inet_db</c> operations on
	    the same socket by using a lock free implementation.</p>
          <p>
	    Impact on the characteristics of the system: Improved
	    performance.</p>
          <p>
	    Own Id: OTP-11074</p>
        </item>
        <item>
          <p>
	    The <c>high_msgq_watermark</c> and
	    <c>low_msgq_watermark</c> <c>inet</c> socket options
	    introduced in OTP-R16A could only be set on TCP sockets.
	    These options are now generic and can be set on all types
	    of sockets.</p>
          <p>
	    Own Id: OTP-11075 Aux Id: OTP-10336 </p>
        </item>
        <item>
          <p>
	    Fix deep list argument error under Windows in os:cmd/1.
	    Thanks to Aleksandr Vinokurov .</p>
          <p>
	    Own Id: OTP-11104</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.16.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p> A bug that could cause a crash with wrong reason has
	    been corrected in the <c>application_controller</c>
	    module. </p>
          <p>
	    Own Id: OTP-10754</p>
        </item>
        <item>
          <p>
	    Fix <c>code:is_module_native/1</c> that sometimes in R16A
	    returned false for hipe compiled modules containing BIFs
	    such as <c>lists</c>.</p>
          <p>
	    Own Id: OTP-10870</p>
        </item>
        <item>
          <p>
	    Respect <c>{exit_on_close,false}</c> option on tcp socket
	    in non-passive mode when receiving fails (due to an
	    ill-formed packet for example) by only doing a half close
	    and still allow sending on the socket. (Thanks to Anthony
	    Molinaro and Steve Vinoski for reporting the problem)</p>
          <p>
	    Own Id: OTP-10879</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Slightly nicer error message when node start fails due to
	    duplicate name. Thanks to Magnus Henoch.</p>
          <p>
	    Own Id: OTP-10797</p>
        </item>
        <item>
	    <p> Miscellaneous updates due to Unicode support. </p>
          <p>
	    Own Id: OTP-10820</p>
        </item>
        <item>
          <p>
	    Add a new function code:get_mode() can be used to detect
	    how the code servers behaves. Thanks to Vlad Dumitrescu</p>
          <p>
	    Own Id: OTP-10823</p>
        </item>
        <item>
          <p>
	    Fix type of error Reason on gen_tcp:send/2. Thanks to
	    Sean Cribbs.</p>
          <p>
	    Own Id: OTP-10839</p>
        </item>
        <item>
	    <p><c>file:list_dir_all/1</c> and
	    <c>file:read_link_all/1</c> that can handle raw file
	    names have been added. See the User Guide for STDLIB for
	    information about raw file names.</p>
          <p>
	    Own Id: OTP-10852</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.16</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    It is no longer possible to have <c>{Mod,Vsn}</c> in the
	    'modules' list in a .app file.</p>
          <p>
	    This was earlier possible, although never documented in
	    the .app file reference manual. It was however visible in
	    the documentation of <c>application:load/[1,2]</c>, where
	    the same term as in a .app file can be used as the first
	    argument.</p>
          <p>
	    The possibility has been removed since the <c>Vsn</c>
	    part was never used.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-10417</p>
        </item>
        <item>
	    <p> The contract of <c>erl_ddll:format_error/1</c> has
	    been corrected. (Thanks to Joseph Wayne Norton.) </p>
          <p>
	    Own Id: OTP-10473</p>
        </item>
        <item>
          <p>
	    Change printout of application crash message on startup
	    to formatted strings (Thanks to Serge Aleynikov)</p>
          <p>
	    Own Id: OTP-10620</p>
        </item>
        <item>
	    <p> The type <c>ascii_string()</c> in the <c>base64</c>
	    module has been corrected. The type
	    <c>file:file_info()</c> has been cleaned up. The type
	    <c>file:fd()</c> has been made opaque in the
	    documentation. </p>
          <p>
	    Own Id: OTP-10624 Aux Id: kunagi-352 [263] </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Inet exported functionality</p>
          <p>
	    inet:parse_ipv4_address/1,
	    inet:parse_ipv4strict_address/1,
	    inet:parse_ipv6_address/1,
	    inet:parse_ipv6strict_address/1, inet:parse_address/1 and
	    inet:parse_strict_address is now exported from the inet
	    module.</p>
          <p>
	    Own Id: OTP-8067 Aux Id: kunagi-274 [185] </p>
        </item>
        <item>
          <p>
	    A boolean socket option 'ipv6_v6only' for IPv6 sockets
	    has been added. The default value of the option is OS
	    dependent, so applications aiming to be portable should
	    consider using <c>{ipv6_v6only,true}</c> when creating an
	    <c>inet6</c> listening/destination socket, and if
	    necessary also create an <c>inet</c> socket on the same
	    port for IPv4 traffic. See the documentation.</p>
          <p>
	    Own Id: OTP-8928 Aux Id: kunagi-193 [104] </p>
        </item>
        <item>
	    <p> Support for Unicode has been implemented. </p>
          <p>
	    Own Id: OTP-10302</p>
        </item>
        <item>
          <p>
	    The documentation for <c>global:register_name/3</c> has
	    been updated to mention that the use of
	    <c>{Module,Function}</c> as the method argument (resolve
	    function) is deprecated.</p>
          <p>
	    Own Id: OTP-10419</p>
        </item>
        <item>
          <p>
	    Fixed bug where sendfile on oracle solaris would return
	    an error when a partial send was done.</p>
          <p>
	    Own Id: OTP-10549</p>
        </item>
        <item>
          <p>
	    The <c>error_handler</c> module will now call
	    <c>'$handle_undefined_function'/2</c> if an attempt is
	    made to call a non-existing function in a module that
	    exists. See the documentation for <c>error_handler</c>
	    module for details.</p>
          <p>
	    Own Id: OTP-10617 Aux Id: kunagi-340 [251] </p>
        </item>
        <item>
	    <p>Where necessary a comment stating encoding has been
	    added to Erlang files. The comment is meant to be removed
	    in Erlang/OTP R17B when UTF-8 becomes the default
	    encoding. </p>
          <p>
	    Own Id: OTP-10630</p>
        </item>
        <item>
          <p>
	    Do not return wrong terms unnecessarily. (Thanks to
	    Kostis Sagonas.)</p>
          <p>
	    Own Id: OTP-10662</p>
        </item>
        <item>
	    <p> Some examples overflowing the width of PDF pages have
	    been corrected. </p>
          <p>
	    Own Id: OTP-10665</p>
        </item>
        <item>
	    <p>Add file:allocate/3 operation</p>
	    <p>This operation allows pre-allocation of space for
	    files. It succeeds only on systems that support such
	    operation. (Thanks to Filipe David Manana)</p>
          <p>
	    Own Id: OTP-10680</p>
        </item>
        <item>
          <p>
	    Add application:get_key/3. The new function provides a
	    default value for a configuration parameter. Thanks to
	    Serge Aleynikov.</p>
          <p>
	    Own Id: OTP-10694</p>
        </item>
        <item>
          <p>
	    Add search to Erlang shell's history. Thanks to Fred
	    Herbert.</p>
          <p>
	    Own Id: OTP-10739</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.15.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Ensure 'erl_crash.dump' when asked for it. This will
	    change erl_crash.dump behaviour.</p>
          <p>
	    * Not setting ERL_CRASH_DUMP_SECONDS will now terminate
	    beam immediately on a crash without writing a crash dump
	    file.</p>
          <p>
	    * Setting ERL_CRASH_DUMP_SECONDS to 0 will also terminate
	    beam immediately on a crash without writing a crash dump
	    file, i.e. same as not setting ERL_CRASH_DUMP_SECONDS
	    environment variable.</p>
          <p>
	    * Setting ERL_CRASH_DUMP_SECONDS to a negative value will
	    let the beam wait indefinitely on the crash dump file
	    being written.</p>
          <p>
	    * Setting ERL_CRASH_DUMP_SECONDS to a positive value will
	    let the beam wait that many seconds on the crash dump
	    file being written.</p>
          <p>
	    A positive value will set an alarm/timeout for restart
	    both in beam and in heart if heart is running.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-10422 Aux Id: kunagi-250 [161] </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.15.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fixed issue where using controlling_process/2 with self()
	    as the second argument caused the port to leak if self()
	    crashes. (Thanks to Ricardo Catalinas Jiménez)</p>
          <p>
	    Own Id: OTP-10094</p>
        </item>
        <item>
          <p>
	    When sending large files using the file:sendfile fallback
	    file:sendfile would crash. This is now fixed.</p>
          <p>
	    Own Id: OTP-10098</p>
        </item>
        <item>
          <p>
	    Fix rpc:call/5 for local calls with a finite Timeout
	    (Thanks to Tomer Chachamu)</p>
          <p>
	    Own Id: OTP-10149</p>
        </item>
        <item>
          <p>
	    fix escript/primary archive reloading</p>
          <p>
	    If the mtime of an escript/primary archive file changes
	    after being added to the code path, correctly reload the
	    archive and update the cache. (Thanks to Tuncer Ayaz)</p>
          <p>
	    Own Id: OTP-10151</p>
        </item>
        <item>
          <p>
	    Support added for home directories named with non-ASCII
	    characters (codepoints above 127) on a system running in
	    Unicode file mode (e.g. on MacOSX or Linux with startup
	    arguments +fnu or +fna with the right LOCALE). Also
	    environment variables with Unicode content are supported
	    in applicable environments.</p>
          <p>
	    Own Id: OTP-10160</p>
        </item>
        <item>
          <p>
	    Allow mixed IPv4 and IPv6 addresses to sctp_bindx</p>
          <p>
	    Also allow mixed address families to bind, since the
	    first address on a multihomed sctp socket must be bound
	    with bind, while the rest are to be bound using
	    sctp_bindx. At least Linux supports adding address of
	    mixing families. Make inet_set_faddress function
	    available also when HAVE_SCTP is not defined, since we
	    use it to find an address for bind to be able to mix ipv4
	    and ipv6 addresses. Thanks to Tomas Abrahamsson</p>
          <p>
	    Own Id: OTP-10217</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>Document inet options: high_watermark, priority,
	    linger and a some other options that previously was
	    undocumented.</p>
          <p>
	    Own Id: OTP-10053</p>
        </item>
        <item>
	    <p>Remove bit8 option support from inet</p>
          <p>
	    Own Id: OTP-10056</p>
        </item>
        <item>
	    <p> The type of the disk log header has been corrected.
	    (Thanks to Niclas Eklund.) </p>
          <p>
	    Own Id: OTP-10131</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.15.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Driver output has been corrected so output of large
	    binaries (> 4 GiB) now does not silently fail or crash
	    the emulator, but either outputs the binary or fails the
	    call. This means that writing a binary > 4 Gib to file
	    now works but on e.g 64-bit Windows (that has
	    scatter/gather I/O buffer segment lengths of 32 bits)
	    fails. The behaviour may change in the future to always
	    write the binary, in parts if necessary.</p>
          <p>
	    Own Id: OTP-9820 Aux Id: OTP-9795 </p>
        </item>
        <item>
          <p>
	    erts: minor fix for unnecessary condition erts: change
	    SENDFILE_CHUNK_SIZE from signed to unsigned (Thanks to
	    jovi zhang)</p>
          <p>
	    Own Id: OTP-9872</p>
        </item>
        <item>
	    <p> Two contracts in <c>gen_sctp</c> have been corrected.
	    </p>
          <p>
	    Own Id: OTP-9874</p>
        </item>
        <item>
	    <p>If a process calls a module with an running on_load
	    handler, the process is supposed to be suspended. But if
	    the module with the on_load handler was loading used
	    <c>code:load_binary/3</c>, the call would instead fail
	    with an <c>undef</c> exception.</p>
          <p>
	    Own Id: OTP-9875</p>
        </item>
        <item>
          <p>
	    File name and error reason is now returned if creation of
	    a cookie fails. (Thanks to Magnus Henoch)</p>
          <p>
	    Own Id: OTP-9954</p>
        </item>
        <item>
          <p>
	    Fix port leak in <c>zlib</c> when passing invalid data to
	    <c>compress,uncompress,zip,unzip,gzip,gunzip</c>.</p>
          <p>
	    Own Id: OTP-9981</p>
        </item>
        <item>
          <p>
	    Various typographical errors corrected in documentation
	    for the global, error_logger, etop, lists, ets and
	    supervisor modules and in the c_portdriver and kernel_app
	    documentation. (Thanks to Ricardo Catalinas Jiménez)</p>
          <p>
	    Own Id: OTP-9987</p>
        </item>
        <item>
	    <p> Fix returned error from gen_tcp:accept/1,2 when
	    running out of ports.</p>
          <p>
	    The {error, enfile} return value is badly misleading and
	    confusing for this case, since the Posix ENFILE errno
	    value has a well-defined meaning that has nothing to do
	    with Erlang ports. The fix changes the return value to
	    {error, system_limit}, which is consistent with e.g.
	    various file(3) functions. inet:format_error/1 has also
	    been updated to support system_limit in the same manner
	    as file:format_error/1. (Thanks to Per Hedeland)</p>
          <p>
	    Own Id: OTP-9990</p>
        </item>
        <item>
	    <p><c>erts_debug:size/1</c> has been corrected to take
	    sharing in the environment of funs into account. For funs
	    it used to always give the same result as
	    <c>erts_debug:flat_size/1</c>.</p>
          <p>
	    Own Id: OTP-9991</p>
        </item>
        <item>
          <p>
	    In some cases when the process doing file:sendfile
	    crashes while sending the file the efile_drv code would
	    not clean up after itself correctly. This has now been
	    fixed.</p>
          <p>
	    Own Id: OTP-9993</p>
        </item>
        <item>
          <p>
	    On BSD based platforms file:sendfile would sometime go
	    into an infinite loop when sending big files. This has
	    now been fixed.</p>
          <p>
	    Own Id: OTP-9994</p>
        </item>
        <item>
	    <p>While <c>disk_log</c> eagerly collects logged terms
	    for better performance, collecting too much data may
	    choke the system and cause huge binaries to be
	    written.</p>
	    <p>The problem was addressed in OTP-9764, but the
	    situation was not improved in all cases.</p>
	    <p>(Thanks to Richard Carlsson.)</p>
          <p>
	    Own Id: OTP-9999 Aux Id: OTP-9764 </p>
        </item>
        <item>
          <p>
	    The documentation of .app files incorrectly said that the
	    default value for the <c>mod</c> parameter is
	    <c>undefined</c>. This is now corrected to <c>[]</c>.</p>
          <p>
	    Own Id: OTP-10002</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.15</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p> Calls to <c>global:whereis_name/1</c> have been
	    substituted for calls to
	    <c>global:safe_whereis_name/1</c> since the latter is not
	    safe at all.</p>
	    <p>The reason for not doing this earlier is that setting
	    a global lock masked out a bug concerning the restart of
	    supervised children. The bug has now been fixed by a
	    modification of <c>global:whereis_name/1</c>. (Thanks to
	    Ulf Wiger for code contribution.)</p>
	    <p>A minor race conditions in <c>gen_fsm:start*</c> has
	    been fixed: if one of these functions returned <c>{error,
	    Reason}</c> or ignore, the name could still be registered
	    (either locally or in <c>global</c>. (This is the same
	    modification as was done for gen_server in OTP-7669.)</p>
	    <p>The undocumented function
	    <c>global:safe_whereis_name/1</c> has been removed. </p>
          <p>
	    Own Id: OTP-9212 Aux Id: seq7117, OTP-4174 </p>
        </item>
        <item>
          <p>
	    Honor option <c>packet_size</c> for http packet parsing
	    by both TCP socket and <c>erlang:decode_packet</c>. This
	    gives the ability to accept HTTP headers larger than the
	    default setting, but also avoid DoS attacks by accepting
	    lines only up to whatever length you wish to allow. For
	    consistency, packet type <c>line</c> also honor option
	    <c>packet_size</c>. (Thanks to Steve Vinoski)</p>
          <p>
	    Own Id: OTP-9389</p>
        </item>
        <item>
	    <p> <c>disk_log:reopen/2,3</c> and
	    <c>disk_log:breopen/3</c> could return the error reason
	    from <c>file:rename/2</c> rather than the reason
	    <c>{file_error, Filename, Reason}</c>. This bug has been
	    fixed. </p> <p> The message <c>{disk_log, Node, {error,
	    disk_log_stopped}}</c> which according the documentation
	    is sent upon failure to truncate or reopen a disk log was
	    sometimes turned into a reply. This bug has been fixed.
	    </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-9508</p>
        </item>
        <item>
          <p>
	    Environment variable 'shutdown_timeout' is added to
	    kernel application. Earlier, application_controller would
	    hang forever if an application top supervisor did not
	    terminate upon a shutdown request. If this new
	    environment variable is set to a positive integer T, then
	    application controller will now give up after T
	    milliseconds and instead brutally kill the application.
	    For backwards compatibility, the default value for
	    shutdown_timeout is 'infinity'.</p>
          <p>
	    Own Id: OTP-9540</p>
        </item>
        <item>
          <p>
	    Add '-callback' attributes in stdlib's behaviours</p>
          <p>
	    Replace the behaviour_info(callbacks) export in stdlib's
	    behaviours with -callback' attributes for all the
	    callbacks. Update the documentation with information on
	    the callback attribute Automatically generate
	    'behaviour_info' function from '-callback' attributes</p>
          <p>
	    'behaviour_info(callbacks)' is a special function that is
	    defined in a module which describes a behaviour and
	    returns a list of its callbacks.</p>
          <p>
	    This function is now automatically generated using the
	    '-callback' specs. An error is returned by lint if user
	    defines both '-callback' attributes and the
	    behaviour_info/1 function. If no type info is needed for
	    a callback use a generic spec for it. Add '-callback'
	    attribute to language syntax</p>
          <p>
	    Behaviours may define specs for their callbacks using the
	    familiar spec syntax, replacing the '-spec' keyword with
	    '-callback'. Simple lint checks are performed to ensure
	    that no callbacks are defined twice and all types
	    referred are declared.</p>
          <p>
	    These attributes can be then used by tools to provide
	    documentation to the behaviour or find discrepancies in
	    the callback definitions in the callback module.</p>
          <p>
	    Add callback specs into 'application' module in kernel
	    Add callback specs to tftp module following internet
	    documentation Add callback specs to inets_service module
	    following possibly deprecated comments</p>
          <p>
	    Own Id: OTP-9621</p>
        </item>
        <item>
          <p>
	    make tab completion work in remote shells (Thanks to Mats
	    Cronqvist)</p>
          <p>
	    Own Id: OTP-9673</p>
        </item>
        <item>
          <p>
	    Add missing parenthesis in heart doc.</p>
          <p>
	    Add missing spaces in the Reference Manual distributed
	    section.</p>
          <p>
	    In the HTML version of the doc those spaces are necessary
	    to separate those words.</p>
          <p>
	    Own Id: OTP-9693</p>
        </item>
        <item>
          <p>
	    Fixes net_kernel:get_net_ticktime() doc</p>
          <p>
	    Adds missing description when `ignored' is returned.
	    (Thanks to Ricardo Catalinas Jiménez )</p>
          <p>
	    Own Id: OTP-9713</p>
        </item>
        <item>
	    <p> While <c>disk_log</c> eagerly collects logged terms
	    for better performance, collecting too much data may
	    choke the system and cause huge binaries to be written.
	    In order to remedy the situation a (small) limit on the
	    amount of data that is collected before writing to disk
	    has been introduced. </p>
          <p>
	    Own Id: OTP-9764</p>
        </item>
        <item>
	    <list> <item><p>Correct callback spec in application
	    module</p></item> <item><p>Refine warning about callback
	    specs with extra ranges</p></item> <item><p>Cleanup
	    autoimport compiler directives</p></item> <item><p>Fix
	    Dialyzer's warnings in typer</p></item> <item><p>Fix
	    Dialyzer's warning for its own code</p></item>
	    <item><p>Fix bug in Dialyzer's behaviours
	    analysis</p></item> <item><p>Fix crash in
	    Dialyzer</p></item> <item><p>Variable substitution was
	    not generalizing any unknown variables.</p></item>
	    </list>
          <p>
	    Own Id: OTP-9776</p>
        </item>
        <item>
          <p>
	    Fix a crash when file:change_time/2,3 are called with
	    invalid dates</p>
          <p>
	    Calling file:change_time/2,3 with an invalid date tuple
	    (e.g file:change_time("file.txt", {undefined,
	    undefined})) will cause file_server_2 to crash.
	    error_logger will shutdown and the whole VM will stop.
	    Change behavior to validate given dates on system
	    boundaries. (i.e before issuing a server call).(Thanks to
	    Ahmed Omar)</p>
          <p>
	    Own Id: OTP-9785</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p> An option list argument can now be passed to
	    <c>file:read_file_info/2, file:read_link_info/2</c> and
	    <c>file:write_file_info/3</c> and set time type
	    information in the call. Valid options are <c>{time,
	    local}, {time, universal}</c> and <c>{time, posix}</c>.
	    In the case of <c>posix</c> time no conversions are made
	    which makes the operation a bit faster. </p>
          <p>
	    Own Id: OTP-7687</p>
        </item>
        <item>
	    <p><c>file:list_dir/1,2</c> will now fill an buffer
	    entire with filenames from the efile driver before
	    sending it to an erlang process. This will speed up this
	    file operation in most cases.</p>
          <p>
	    Own Id: OTP-9023</p>
        </item>
        <item>
	    <p>gen_sctp:open/0-2 may now return
	    {error,eprotonosupport} if SCTP is not supported</p>
	    <p>gen_sctp:peeloff/1 has been implemented and creates a
	    one-to-one socket which also are supported now</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-9239</p>
        </item>
        <item>
          <p>
	    Sendfile has been added to the file module's API.
	    sendfile/2 is used to read data from a file and send it
	    to a tcp socket using a zero copying mechanism if
	    available on that OS.</p>
          <p>
	    Thanks to Tuncer Ayaz and Steve Vinovski for original
	    implementation</p>
          <p>
	    Own Id: OTP-9240</p>
        </item>
        <item>
          <p>
	    Tuple funs (a two-element tuple with a module name and a
	    function) are now officially deprecated and will be
	    removed in R16. Use '<c>fun M:F/A</c>' instead. To make
	    you aware that your system uses tuple funs, the very
	    first time a tuple fun is applied, a warning will be sent
	    to the error logger.</p>
          <p>
	    Own Id: OTP-9649</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.14.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fix type of Packet arg of gen_tcp:send/2 and
	    gen_udp:send/4</p>
          <p>
	    The type is marked as a binary() or a string() but in
	    practice it can be an iodata(). The test suite was
	    updated to confirm the gen_tcp/2 and gen_udp:send/4
	    functions accept iodata() (iolists) packets. (Thanks to
	    Filipe David Manana)</p>
          <p>
	    Own Id: OTP-9514</p>
        </item>
        <item>
	    <p> XML files have been corrected. </p>
          <p>
	    Own Id: OTP-9550 Aux Id: OTP-9541 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p> The types and specifications of the inet modules have
	    been improved. </p>
          <p>
	    Own Id: OTP-9260</p>
        </item>
        <item>
	    <p> Types and specifications have been added. </p>
          <p>
	    Own Id: OTP-9356</p>
        </item>
        <item>
	    <p> Contracts in STDLIB and Kernel have been improved and
	    type errors have been corrected. </p>
          <p>
	    Own Id: OTP-9485</p>
        </item>
        <item>
	    <p> Update documentation and specifications of some of
	    the zlib functions. </p>
          <p>
	    Own Id: OTP-9506</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.14.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The send_timeout option in gen_tcp did not work properly
	    in active mode or with {active,once} options. This is now
	    corrected.</p>
          <p>
	    Own Id: OTP-9145</p>
        </item>
        <item>
          <p>
	    Fixed various typos across the documentation (Thanks to
	    Tuncer Ayaz)</p>
          <p>
	    Own Id: OTP-9154</p>
        </item>
        <item>
          <p>
	    Fix typo in doc of rpc:pmap/3 (Thanks to Ricardo
	    Catalinas Jiménez)</p>
          <p>
	    Own Id: OTP-9168</p>
        </item>
        <item>
          <p>
	    A bug in inet_res, the specialized DNS resolver, has been
	    corrected. A late answer with unfortunate timing could
	    cause a runtime exception. Some code cleanup and
	    improvements also tagged along. Thanks to Evegeniy
	    Khramtsov for a pinpointing bug report and bug fix
	    testing.</p>
          <p>
	    Own Id: OTP-9221 Aux Id: OTP-8712 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p> Types and specifications have been added. </p>
          <p>
	    Own Id: OTP-9268</p>
        </item>
        <item>
	    <p> Erlang types and specifications are used for
	    documentation. </p>
          <p>
	    Own Id: OTP-9272</p>
        </item>
        <item>
	    <p> Two opaque types that could cause warnings when
	    running Dialyzer have been modified. </p>
          <p>
	    Own Id: OTP-9337</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.14.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    <c>os:find_executable/{1,2}</c> will no longer return the
	    path of a directory that happens to be in the PATH.</p>
          <p>
	    Own Id: OTP-8983 Aux Id: seq11749 </p>
        </item>
        <item>
          <p>
	    Fix -spec for file:write_file/3</p>
          <p>
	    Change type for second parameter from binary() to
	    iodata(), since the function explicitly takes steps to
	    accept lists as well as binaries. (thanks to Magnus
	    Henoch).</p>
          <p>
	    Own Id: OTP-9067</p>
        </item>
        <item>
          <p>
	    Sanitize the specs of the code module</p>
          <p>
	    After the addition of unicode_binary() to the
	    file:filename() type, dialyzer started complaining about
	    erroneous or incomplete specs in some functions of the
	    'code' module. The culprit was hard-coded information in
	    erl_bif_types for functions of this module, which were
	    not updated. Since these functions have proper specs
	    these days and code duplication (pun intended) is never a
	    good idea, their type information was removed from
	    erl_bif_types.</p>
          <p>
	    While doing this, some erroneous comments were fixed in
	    the code module and also made sure that the code now runs
	    without dialyzer warnings even when the
	    -Wunmatched_returns option is used.</p>
          <p>
	    Some cleanups were applied to erl_bif_types too.</p>
          <p>
	    Own Id: OTP-9100</p>
        </item>
        <item>
          <p>
	    - Add spec for function that does not return - Strengthen
	    spec - Introduce types to avoid duplication in specs -
	    Add specs for functions that do not return - Add specs
	    for behaviour callbacks - Simplify two specs</p>
          <p>
	    Own Id: OTP-9127</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.14.2</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The Erlang VM now supports Unicode filenames. The feature
	    is turned on by default on systems where Unicode
	    filenames are mandatory (Windows and MacOSX), but can be
	    enabled on other systems with the '+fnu' emulator option.
	    Enabling the Unicode filename feature on systems where it
	    is not default is however considered experimental and not
	    to be used for production. Together with the Unicode file
	    name support, the concept of "raw filenames" is
	    introduced, which means filenames provided without
	    implicit unicode encoding translation. Raw filenames are
	    provided as binaries, not lists. For further information,
	    see stdlib users guide and the chapter about using
	    Unicode in Erlang. Also see the file module manual page.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-8887</p>
        </item>
        <item>
          <p>
	    There is now a new function inet:getifaddrs/0 modeled
	    after C library function getifaddrs() on BSD and LInux
	    that reports existing interfaces and their addresses on
	    the host. This replaces the undocumented and unsupported
	    inet:getiflist/0 and inet:ifget/2.</p>
          <p>
	    Own Id: OTP-8926</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.14.1.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>In embedded mode, on_load handlers that called
	    <c>code:priv_dir/1</c> or other functions in <c>code</c>
	    would hang the system. Since the <c>crypto</c>
	    application now contains an on_loader handler that calls
	    <c>code:priv_dir/1</c>, including the <c>crypto</c>
	    application in the boot file would prevent the system
	    from starting.</p>
	    <p>Also extended the <c>-init_debug</c> option to print
	    information about on_load handlers being run to
	    facilitate debugging.</p>
          <p>
	    Own Id: OTP-8902 Aux Id: seq11703 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.14.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Fixed: inet:setopts(S, [{linger,{true,2}}]) returned
	    {error,einval} for SCTP sockets. The inet_drv had a bug
	    when checking the option size.</p>
          <p>
	    Own Id: OTP-8726 Aux Id: seq11617 </p>
        </item>
        <item>
          <p>
	    gen_udp:connect/3 was broken for SCTP enabled builds. It
	    did not detect remote end errors as it should.</p>
          <p>
	    Own Id: OTP-8729</p>
        </item>
        <item>
	    <p>reference() has been substituted for ref() in the
	    documentation.</p>
          <p>
	    Own Id: OTP-8733</p>
        </item>
        <item>
	    <p>A bug introduced in kernel-2.13.5.3 has been fixed. If
	    running <c>net_kernel:set_net_ticktime/1</c> twice within
	    the <c>TransitionPerod</c> the second call caused the
	    net_kernel process to crash with a <c>badmatch</c>.</p>
          <p>
	    Own Id: OTP-8787 Aux Id: seq11657, OTP-8643 </p>
        </item>
        <item>
          <p>
	    inet:getsockopt for SCTP sctp_default_send_param had a
	    bug to not initialize required feilds causing random
	    answers. It is now corrected.</p>
          <p>
	    Own Id: OTP-8795 Aux Id: seq11655 </p>
        </item>
        <item>
	    <p>For a socket in the HTTP packet mode, the return value
	    from <c>gen_tcp:recv/2,3</c> if there is an error in the
	    header will be <c>{ok,{http_error,String}}</c> instead of
	    <c>{error,{http_error,String}}</c> to be consistent with
	    <c>ssl:recv/2,3</c>.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-8831</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Even when configuring erlang with --enable-native-libs,
	    the native code for modules loaded very early (such as
	    lists) would not get loaded. This has been corrected.
	    (Thanks to Paul Guyot.)</p>
          <p>
	    Own Id: OTP-8750</p>
        </item>
        <item>
          <p>
	    The undocumented function inet:ifget/2 has been improved
	    to return interface hardware address (MAC) on platforms
	    supporting getaddrinfo() (such as BSD unixes). Note it
	    still does not work on all platforms for example not
	    Windows nor Solaris, so the function is still
	    undocumented.</p>
          <p>
	    Buffer overflow and field init bugs for inet:ifget/2 and
	    inet:getservbyname/2 has also been fixed.</p>
          <p>
	    Thanks to Michael Santos.</p>
          <p>
	    Own Id: OTP-8816</p>
        </item>
        <item>
          <p>
	    As a usability improvement the 'inet6' option to
	    functions gen_tcp:listen/2, gen_tcp:connect/3-4,
	    gen_udp:open/2 and gen_sctp:open/1-2 is now implicit if
	    the address argument or the 'ip' option contain an IPv6
	    address (8-tuple).</p>
          <p>
	    Own Id: OTP-8822</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.14</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    os:find_executable can now be fed with the complete name
	    of the executable on Windows and still find it. I.e
	    os:find_executable("werl.exe") will work as
	    os:find_executable("werl").</p>
          <p>
	    Own Id: OTP-3626</p>
        </item>
        <item>
          <p>
	    The shell's line editing has been improved to more
	    resemble the behaviour of readline and other shells.
	    (Thanks to Dave Peticolas)</p>
          <p>
	    Own Id: OTP-8635</p>
        </item>
        <item>
	    <p>Under certain circumstances the net kernel could hang.
	    (Thanks to Scott Lystig Fritchie.)</p>
          <p>
	    Own Id: OTP-8643 Aux Id: seq11584 </p>
        </item>
        <item>
          <p>
	    The kernel DNS resolver was leaking one or two ports if
	    the DNS reply could not be parsed or if the resolver(s)
	    caused noconnection type errors. Bug now fixed. A DNS
	    specification borderline truncated reply triggering the
	    port leakage bug has also been fixed.</p>
          <p>
	    Own Id: OTP-8652</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>As of this version, the global name server no longer
	    supports nodes running Erlang/OTP R11B.</p>
          <p>
	    Own Id: OTP-8527</p>
        </item>
        <item>
          <p>
	    The file module's functions write,read and read_line now
	    handles named io_servers like 'standard_io' and
	    'standard_error' correctly.</p>
          <p>
	    Own Id: OTP-8611</p>
        </item>
        <item>
          <p>
	    The functions file:advise/4 and file:datasync/1 have been
	    added. (Thanks to Filipe David Manana.)</p>
          <p>
	    Own Id: OTP-8637</p>
        </item>
        <item>
	    <p>When exchanging groups between nodes <c>pg2</c> did
	    not remove duplicated members. This bug was introduced in
	    R13B03 (kernel-2.13.4).</p>
          <p>
	    Own Id: OTP-8653</p>
        </item>
        <item>
          <p>
	    There is a new option 'exclusive' to file:open/2 that
	    uses the OS O_EXCL flag where supported to open the file
	    in exclusive mode.</p>
          <p>
	    Own Id: OTP-8670</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.13.5.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
            A bug introduced in Kernel 2.13.5.2 has been fixed.</p>
          <p>
	    Own Id: OTP-8686 Aux Id: OTP-8643</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.13.5.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
            Under certain circumstances the net kernel could hang.
            (Thanks to Scott Lystig Fritchie.)</p>
          <p>
	    Own Id: OTP-8643 Aux Id: seq11584</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.13.5.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A race condition in <c>os:cmd/1</c> could cause the
	    caller to get stuck in <c>os:cmd/1</c> forever.</p>
          <p>
	    Own Id: OTP-8502</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.13.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>A race bug affecting <c>pg2:get_local_members/1</c>
	    has been fixed. The bug was introduced in R13B03.</p>
          <p>
	    Own Id: OTP-8358</p>
        </item>
        <item>
          <p>
	    The loading of native code was not properly atomic in the
	    SMP emulator, which could cause crashes. Also a per-MFA
	    information table for the native code has now been
	    protected with a lock since it turns that it could be
	    accessed concurrently in the SMP emulator. (Thanks to
	    Mikael Pettersson.)</p>
          <p>
	    Own Id: OTP-8397</p>
        </item>
        <item>
          <p>
	    user.erl (used in oldshell) is updated to handle unicode
	    in prompt strings (io:get_line/{1,2}). io_lib is also
	    updated to format prompts with the 't' modifier (i.e. ~ts
	    instead of ~s).</p>
          <p>
	    Own Id: OTP-8418 Aux Id: OTP-8393 </p>
        </item>
        <item>
          <p>
	    The resolver routines failed to look up the own node name
	    as hostname, if the OS native resolver was erroneously
	    configured, bug reported by Yogish Baliga, now fixed.</p>
          <p>
	    The resolver routines now tries to parse the hostname as
	    an IP string as most OS resolvers do, unless the native
	    resolver is used.</p>
          <p>
	    The DNS resolver inet_res and file resolver inet_hosts
	    now do not read OS configuration files until they are
	    needed. Since the native resolver is default, in most
	    cases they are never needed.</p>
          <p>
	    The DNS resolver's automatic updating of OS configuration
	    file data (/etc/resolv.conf) now uses the 'domain'
	    keyword as default search domain if there is no 'search'
	    keyword.</p>
          <p>
	    Own Id: OTP-8426 Aux Id: OTP-8381 </p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The expected return value for an on_load function has
	    been changed. (See the section about code loading in the
	    Reference manual.)</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-8339</p>
        </item>
        <item>
          <p>
	    Explicit top directories in archive files are now
	    optional.</p>
          <p>
	    For example, if an archive (app-vsn.ez) just contains an
	    app-vsn/ebin/mod.beam file, the file info for the app-vsn
	    and app-vsn/ebin directories are faked using the file
	    info from the archive file as origin. The virtual
	    directories can also be listed. For short, the top
	    directories are virtual if they does not exist.</p>
          <p>
	    Own Id: OTP-8387</p>
        </item>
        <item>
          <p>
	    <c>code:clash/0</c> now looks inside archives (.ez
	    files). (Thanks to Tuncer Ayaz.)</p>
          <p>
	    Own Id: OTP-8413</p>
        </item>
        <item>
          <p>
	    There are new <c>gen_sctp:connect_init/*</c> functions
	    that initiate an SCTP connection without blocking for the
	    result. The result is delivered asynchronously as an
	    sctp_assoc_change event. (Thanks to Simon Cornish.)</p>
          <p>
	    Own Id: OTP-8414</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.13.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>A link in <c>pg2(3)</c> has been fixed. (Thanks to
	    Christophe Romain.)</p>
          <p>
	    Own Id: OTP-8198</p>
        </item>
        <item>
          <p>
	    A ticker process could potentially be blocked
	    indefinitely trying to send a tick to a node not
	    responding. If this happened, the connection would not be
	    brought down as it should.</p>
          <p>
	    Own Id: OTP-8218</p>
        </item>
        <item>
	    <p>A bug in <c>pg2</c> when members who died did not
	    leave process groups has been fixed. (Thanks to Matthew
	    Dempsky.)</p>
          <p>
	    Own Id: OTP-8259</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    The documentation is now built with open source tools
	    (xsltproc and fop) that exists on most platforms. One
	    visible change is that the frames are removed.</p>
          <p>
	    Own Id: OTP-8201</p>
        </item>
        <item>
          <p>
	    The top directory in archive files does not need to have
	    a <c>-vsn</c> suffix anymore. For example if the archive
	    file has the name like <c>mnesia-4.4.7.ez</c> the top
	    directory in the archive can either be named
	    <c>mnesia</c> or <c>mnesia-4.4.7</c>. If the archive file
	    has a name like <c>mnesia.ez</c> the top directory in the
	    archive must be named <c>mnesia</c> as earlier.</p>
          <p>
	    Own Id: OTP-8266</p>
        </item>
        <item>
	    <p>The -on_load() directive can be used to run a function
	    when a module is loaded. It is documented in the section
	    about code loading in the Reference Manual.</p>
          <p>
	    Own Id: OTP-8295</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.13.3</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p> The DNS resolver client inet_res has been rewritten,
	    documented and released. See inet_res(3) and Erts User's
	    Guide: Inet configuration. </p><p> It can formally not be
	    incompatible with respect to earlier versions since there
	    was no earlier official version. However it was used
	    before and some details have changed. </p><p>
	    Configuration now initializes from /etc/resolv.conf and
	    /etc/hosts on all unix platforms regardless of which
	    distribution mode the node is started in. The directory
	    (/etc) these files are supposed to reside in can be
	    changed via an environment variable. These configuration
	    file locations can also be changed in the inet
	    configuration. The files are monitored for change and
	    re-read, which makes a few resolver configuration
	    variables out of application control. The /etc/hosts
	    entries have now their own cache table that is shadowed
	    (with lookup method 'file' is used) by the application
	    configured host entries. This problem (that inet_res
	    configuration only worked for distribution mode long
	    names) was among other reported by Matthew O'Gorman many
	    moons ago. </p><p> The lookup methods are still 'native'
	    only per default. Resolver configuration is done on all
	    Unix platforms just to get a usable configuration for
	    direct calls to inet_res. </p><p> The functions
	    <c>inet_res:nslookup/3..5</c> and
	    <c>inet_res:nnslookup/4..4</c> are no longer recommended
	    to use, instead use <c>inet_res:lookup/3..5</c> and
	    <c>inet_res:resolve/3..5</c> which provide clearer
	    argument types and the possibility to override options in
	    the call. </p><p> Users of previous unsupported versions
	    of inet_res have included internal header files to get to
	    the internal record definitions in order to examine DNS
	    replies. This is still unsupported and there are access
	    functions in inet_dns to use instead. These are
	    documented in inet_res(3). </p><p> Bug fix: a compression
	    reference loop would make DNS message decoding loop
	    forever. Problem reported by Florian Weimer. </p><p> Bug
	    fix and patch suggestion by Sergei Golovan: configuring
	    IPv6 nameservers did not work. His patch (as he warned)
	    created many UDP sockets; one per nameserver. This has
	    been fixed in the released version. </p><p> Improvement:
	    <c>inet_res</c> is now EDNS0 capable. The current
	    implementation is simple and does not probe and cache
	    EDNS info for nameservers, which a fully capable
	    implementation probably should do. EDNS has to be enabled
	    via resolver configuration, and if a nameserver replies
	    that it does not support EDNS, <c>inet_res</c> falls back
	    to a regular DNS query. </p><p> Improvement: now
	    <c>inet_res</c> automatically falls back to TCP if it
	    gets a truncated answer from a nameserver. </p><p>
	    Warning: some of the ancient and exotic record types
	    handled by <c>inet_res</c> and <c>inet_dns</c> are not
	    supported by current versions of BIND, so they could not
	    be tested after the rewrite, with reasonable effort, e.g
	    MD, MF, NULL, and SPF. The risk for bugs in these
	    particular records is still low since their code is
	    mostly shared with other tested record types. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-7955 Aux Id: OTP-7107 OTP-6852 </p>
        </item>
        <item>
          <p>
	    A TCP socket with option <c>{packet,4}</c> could crash
	    the emulator if it received a packet header with a very
	    large size value (>2Gb). The same bug caused
	    <c>erlang:decode_packet/3</c> to return faulty values.
	    (Thanks to Georgos Seganos.)</p>
          <p>
	    Own Id: OTP-8102</p>
        </item>
        <item>
          <p>
	    The file module has now a read_line/1 function similar to
	    the io:get_line/2, but with byte oriented semantics. The
	    function file:read_line/1 works for raw files as well,
	    but for good performance it is recommended to use it
	    together with the 'read_ahead' option for raw file
	    access.</p>
          <p>
	    Own Id: OTP-8108</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.13.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A bug when doing io:get_line (among other calls) from a
	    file opened with encoding other than latin1, causing
	    false unicode errors to occur, is now corrected.</p>
          <p>
	    Own Id: OTP-7974</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Added functionality to get higher resolution timestamp
	    from system. The erlang:now function returns a timestamp
	    that's not always consistent with the actual operating
	    system time (due to resilience against large time changes
	    in the operating system). The function os:timestamp/0 is
	    added to get a similar timestamp as the one being
	    returned by erlang:now, but untouched by Erlangs time
	    correcting and smoothing algorithms. The timestamp
	    returned by os:timestamp is always consistent with the
	    operating systems view of time, like the calendar
	    functions for getting wall clock time, but with higher
	    resolution. Example of usage can be found in the os
	    manual page.</p>
          <p>
	    Own Id: OTP-7971</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.13.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Many concurrent calls to <c>os:cmd/1</c> will only block
	    one scheduler thread at a time, making an smp emulator
	    more responsive if the OS is slow forking processes.</p>
          <p>
	    Own Id: OTP-7890 Aux Id: seq11219 </p>
        </item>
        <item>
          <p>
	    Fixed hanging early RPC that did IO operation during node
	    start.</p>
          <p>
	    Own Id: OTP-7903 Aux Id: seq11224 </p>
        </item>
        <item>
          <p>
	    The error behavior of gen_tcp and gen_udp has been
	    corrected. gen_tcp:connect/3,4 and gen_udp:send/4 now
	    returns {error,eafnosupport} for conflicting destination
	    address versus socket address family. Other corner cases
	    for IP address string host names combined with not using
	    the native (OS) resolver (which is not default) has also
	    been changed to return {error,nxdomain} instead of
	    {error,einval}. Those changes just may surprise old
	    existing code. gen_tcp:listen/2 and gen_udp:open/2 now
	    fails for conflicting local address versus socket address
	    family instead of trying to use an erroneous address.
	    Problem reported by Per Hedeland.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-7929</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Several glitches and performance issues in the Unicode
	    and I/O-system implementation of R13A have been
	    corrected.</p>
          <p>
	    Own Id: OTP-7896 Aux Id: OTP-7648 OTP-7887 </p>
        </item>
        <item>
          <p>
	    The unsupported DNS resolver client inet_res has now been
	    improved to handle NAPTR queries.</p>
          <p>
	    Own Id: OTP-7925 Aux Id: seq11231 </p>
        </item>
      </list>
    </section>

</section>


<section><title>Kernel 2.13</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The old Erlang DNS resolver inet_res has been corrected
	    to handle TXT records with more than one character
	    string. Patch courtesy of Geoff Cant.</p>
          <p>
	    Own Id: OTP-7588</p>
        </item>
        <item>
	    <p>When chunk reading a disk log opened in read_only
	    mode, bad terms could crash the disk log process.</p>
          <p>
	    Own Id: OTP-7641 Aux Id: seq11090 </p>
        </item>
        <item>
          <p>
	    <c>gen_tcp:send()</c> did sometimes (only observed on
	    Solaris) return <c>{error,enotconn}</c> instead of the
	    expected <c>{error,closed}</c> as the peer socket had
	    been explicitly closed.</p>
          <p>
	    Own Id: OTP-7647</p>
        </item>
        <item>
          <p>
	    The gen_sctp option sctp_peer_addr_params,
	    #sctp_paddrparams{address={IP,Port} was erroneously
	    decoded in the inet driver. This bug has now been
	    corrected.</p>
          <p>
	    Own Id: OTP-7755</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Erlang programs can now access STDERR on platforms where
	    such a file descriptor is available by using the
	    io_server 'standard_error', i.e.
	    io:format(standard_error,"~s~n",[ErrorMessage]),</p>
          <p>
	    Own Id: OTP-6688</p>
        </item>
        <item>
          <p>
	    The format of the string returned by
	    <c>erlang:system_info(system_version)</c> (as well as the
	    first message when Erlang is started) has changed. The
	    string now contains the both the OTP version number as
	    well as the erts version number.</p>
          <p>
	    Own Id: OTP-7649</p>
        </item>
        <item>
	    <p>As of this version, the global name server no longer
	    supports nodes running Erlang/OTP R10B.</p>
          <p>
	    Own Id: OTP-7661</p>
        </item>
        <item>
          <p>
	    A <c>{nodedown, Node}</c> message passed by the
	    <c>net_kernel:monitor_nodes/X</c> functionality is now
	    guaranteed to be sent after <c>Node</c> has been removed
	    from the result returned by <c>erlang:nodes/Y</c>.</p>
          <p>
	    Own Id: OTP-7725</p>
        </item>
        <item>
	    <p>The deprecated functions <c>erlang:fault/1</c>,
	    <c>erlang:fault/2</c>, and <c>file:rawopen/2</c> have
	    been removed.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-7812</p>
        </item>
        <item>
          <p>
	    Nodes belonging to different independent clusters can now
	    co-exist on the same host with the help of a new
	    environment variable setting ERL_EPMD_PORT.</p>
          <p>
	    Own Id: OTP-7826</p>
        </item>
        <item>
	    <p>The copyright notices have been updated.</p>
          <p>
	    Own Id: OTP-7851</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.12.5.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>When chunk reading a disk log opened in read_only
	    mode, bad terms could crash the disk log process.</p>
          <p>
	    Own Id: OTP-7641 Aux Id: seq11090 </p>
        </item>
        <item>
          <p>
	    Calling <c>gen_tcp:send()</c> from several processes on
	    socket with option <c>send_timeout</c> could lead to much
	    longer timeout than specified. The solution is a new
	    socket option <c>{send_timeout_close,true}</c> that will
	    do automatic close on timeout. Subsequent calls to send
	    will then immediately fail due to the closed connection.</p>
          <p>
	    Own Id: OTP-7731 Aux Id: seq11161 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.12.5</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>The documentation of <c>rpc:pmap/3</c> has been
	    corrected. (Thanks to Kirill Zaborski.)</p>
          <p>
	    Own Id: OTP-7537</p>
        </item>
        <item>
          <p>
	    The listen socket used for the distributed Erlang
	    protocol now uses the socket option 'reuseaddr', which is
	    useful when you force the listen port number using kernel
	    options 'inet_dist_listen_min' and 'inet_dist_listen_max'
	    and restarts a node with open connections.</p>
          <p>
	    Own Id: OTP-7563</p>
        </item>
        <item>
          <p>
	    Fixed memory leak of unclosed TCP-ports. A gen_tcp:send()
	    followed by a failing gen_tcp:recv() could in some cases
	    cause the port to linger after being closed.</p>
          <p>
	    Own Id: OTP-7615</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>Processes spawned using <c>proc_lib</c> (including
	    <c>gen_server</c> and other library modules that use
	    <c>proc_lib</c>) no longer keep the entire argument list
	    for the initial call, but only the arity.</p>
	    <p>Also, if <c>proc_lib:spawn/1</c> is used to spawn a
	    fun, the actual fun is not kept, but only module,
	    function name, and arity of the function that implements
	    the fun.</p>
	    <p>The reason for the change is that keeping the initial
	    fun (or a fun in an argument list), would prevent
	    upgrading the code for the module. A secondary reason is
	    that keeping the fun and function arguments could waste a
	    significant amount of memory.</p>
	    <p>The drawback with the change is that the crash reports
	    will provide less precise information about the initial
	    call (only <c>Module:Function/Arity</c> instead of
	    <c>Module:Function(Arguments)</c>). The function
	    <c>proc_lib:initial_call/1</c> still returns a list, but
	    each argument has been replaced with a dummy atom.</p>
          <p>
	    Own Id: OTP-7531 Aux Id: seq11036 </p>
        </item>
        <item>
          <p>
	    <c>io:get_line/1</c> when reading from standard input is
	    now substantially faster. There are also some minor
	    performance improvements in <c>io:get_line/1</c> when
	    reading from any file opened in binary mode. (Thanks to
	    Fredrik Svahn.)</p>
          <p>
	    Own Id: OTP-7542</p>
        </item>
        <item>
          <p>
	    There is now experimental support for loading of code
	    from archive files. See the documentation of <c>code</c>,
	    <c>init</c>, <c>erl_prim_loader </c> and <c>escript</c>
	    for more info.</p>
          <p>
	    The error handling of <c>escripts</c> has been improved.</p>
          <p>
	    An <c>escript</c> may now set explicit arguments to the
	    emulator, such as <c>-smp enabled</c>.</p>
          <p>
	    An <c>escript</c> may now contain a precompiled beam
	    file.</p>
          <p>
	    An <c>escript</c> may now contain an archive file
	    containing one or more applications (experimental).</p>
          <p>
	    The internal module <c>code_aux</c> has been removed.</p>
          <p>
	    Own Id: OTP-7548 Aux Id: otp-6622 </p>
        </item>
        <item>
          <p>
	    <c>code:is_sticky/1</c> is now documented. (Thanks to
	    Vlad Dumitrescu.)</p>
          <p>
	    Own Id: OTP-7561</p>
        </item>
        <item>
          <p>
	    In the job control mode, the "s" and "r" commands now
	    take an optional argument to specify which shell to
	    start. (Thanks to Robert Virding.)</p>
          <p>
	    Own Id: OTP-7617</p>
        </item>
        <item>
          <p>
	    <c>net_adm:world/0,1</c> could crash if called in an
	    emulator that has not been started with either the
	    <c>-sname</c> or <c>-name</c> option; now it will return
	    an empty list. (Thanks to Edwin Fine.)</p>
          <p>
	    Own Id: OTP-7618</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.12.4</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Large files are now handled on Windows, where the
	    filesystem supports it.</p>
          <p>
	    Own Id: OTP-7410</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    New BIF <c>erlang:decode_packet/3</c> that extracts a
	    protocol packet from a binary. Similar to the socket
	    option <c>{packet, Type}</c>. Also documented the socket
	    packet type <c>http</c> and made it official.
	    <em>NOTE</em>: The tuple format for <c>http</c> packets
	    sent from an active socket has been changed in an
	    incompatible way.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-7404</p>
        </item>
        <item>
          <p>
	    Setting the <c>{active,once}</c> for a socket (using
	    inets:setopts/2) is now specially optimized (because the
	    <c>{active,once}</c> option is typically used much more
	    frequently than other options).</p>
          <p>
	    Own Id: OTP-7520</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.12.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    SCTP_ADDR_CONFIRMED events are now handled by gen_sctp.</p>
          <p>
	    Own Id: OTP-7276</p>
        </item>
        <item>
	    <p>When leaving a process group with <c>pg2:leave/2</c>
	    the process was falsely assumed to be a member of the
	    group. This bug has been fixed.</p>
          <p>
	    Own Id: OTP-7277</p>
        </item>
        <item>
          <p>
	    In the Erlang shell, using up and down arrow keys, the
	    wrong previous command could sometimes be retrieved.</p>
          <p>
	    Own Id: OTP-7278</p>
        </item>
        <item>
          <p>
	    The documentation for <c>erlang:trace/3</c> has been
	    corrected.</p>
          <p>
	    Own Id: OTP-7279 Aux Id: seq10927 </p>
        </item>
        <item>
          <p>
	    In the SMP emulator, there was small risk that
	    <c>code:purge(Mod)</c> would kill a process that was
	    running code in <c>Mod</c> and unload the module
	    <c>Mod</c> before the process had terminated.
	    <c>code:purge(Mod)</c> now waits for confirmation (using
	    <c>erlang:monitor/2</c>) that the process has been killed
	    before proceeding.</p>
          <p>
	    Own Id: OTP-7282</p>
        </item>
        <item>
          <p>
	    <c>zlib:inflate</c> failed when the size of the inflated
	    data was an exact multiple of the internal buffer size
	    (4000 bytes by default).</p>
          <p>
	    Own Id: OTP-7359</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Additional library directories can now be specified in
	    the environment variable ERL_LIBS. See the manual page
	    for the <c>code</c> module. (Thanks to Serge Aleynikov.)</p>
          <p>
	    Own Id: OTP-6940</p>
        </item>
        <item>
          <p>
	    crypto and zlib drivers improved to allow concurrent smp
	    access.</p>
          <p>
	    Own Id: OTP-7262</p>
        </item>
        <item>
          <p>
	    There is a new function <c>init:stop/1</c> which can be
	    used to shutdown the system cleanly AND generate a
	    non-zero exit status or crash dump. (Thanks to Magnus
	    Froberg.)</p>
          <p>
	    Own Id: OTP-7308</p>
        </item>
        <item>
          <p>
	    The <c>hide</c> option for <c>open_port/2</c> is now
	    documented. (Thanks to Richard Carlsson.)</p>
          <p>
	    Own Id: OTP-7358</p>
        </item>
      </list>
    </section>

</section>


<section><title>Kernel 2.12.2.1</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
            <c>os:cmd/1</c> on unix platforms now use <c>/bin/sh</c>
            as shell instead of looking for <c>sh</c> in the
            <c>PATH</c> environment.</p>
          <p>
            Own Id: OTP-7283</p>
        </item>
      </list>
    </section>

</section>
<section><title>Kernel 2.12.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
	    <p>A bug caused by a race condition involving
	    <c>disk_log</c> and <c>pg2</c> has been fixed.</p>
          <p>
	    Own Id: OTP-7209 Aux Id: seq10890 </p>
        </item>
        <item>
	    <p>The beta testing module <c>gen_sctp</c> now supports
	    active mode as stated in the documentation. Active mode
	    is still rather untested, and there are some issues about
	    what should be the right semantics for
	    <c>gen_sctp:connect/5</c>. In particular: should it be
	    blocking or non-blocking or choosable. There is a high
	    probability it will change semantics in a (near) future
	    patch.</p> <p>Try it, give comments and send in bug
	    reports!</p>
          <p>
	    Own Id: OTP-7225</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p><c>erlang:system_info/1</c> now accepts the
	    <c>logical_processors</c>, and <c>debug_compiled</c>
	    arguments. For more info see the, <c>erlang(3)</c>
	    documentation.</p> <p>The scale factor returned by
	    <c>test_server:timetrap_scale_factor/0</c> is now also
	    effected if the emulator uses a larger amount of
	    scheduler threads than the amount of logical processors
	    on the system. </p>
          <p>
	    Own Id: OTP-7175</p>
        </item>
        <item>
          <p>
	    Updated the documentation for
	    <c>erlang:function_exported/3</c> and <c>io:format/2</c>
	    functions to no longer state that those functions are
	    kept mainly for backwards compatibility.</p>
          <p>
	    Own Id: OTP-7186</p>
        </item>
        <item>
          <p>
	    A process executing the <c>processes/0</c> BIF can now be
	    preempted by other processes during its execution. This
	    in order to disturb the rest of the system as little as
	    possible. The returned result is, of course, still a
	    consistent snapshot of existing processes at a time
	    during the call to <c>processes/0</c>.</p>
          <p>
	    The documentation of the <c>processes/0</c> BIF and the
	    <c>is_process_alive/1</c> BIF have been updated in order
	    to clarify the difference between an existing process and
	    a process that is alive.</p>
          <p>
	    Own Id: OTP-7213</p>
        </item>
        <item>
	    <p><c>tuple_size/1</c> and <c>byte_size/1</c> have been
	    substituted for <c>size/1</c> in the documentation.</p>
          <p>
	    Own Id: OTP-7244</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.12.1.2</title>

    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>The <c>{allocator_sizes, Alloc}</c> and
	    <c>alloc_util_allocators</c> arguments are now accepted
	    by <c>erlang:system_info/1</c>. For more information see
	    the <c>erlang(3)</c> documentation.</p>
          <p>
	    Own Id: OTP-7167</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.12.1.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
            Fixed a problem in group that could cause the ssh server
            to lose answers or hang.</p>
          <p>
            Own Id: OTP-7185 Aux Id: seq10871 </p>
        </item>
      </list>
    </section>
</section>
<section><title>Kernel 2.12.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    file:read/2 and file:consult_stream/1,3 did not use an
	    empty prompt on I/O devices. This bug has now been
	    corrected.</p>
          <p>
	    Own Id: OTP-7013</p>
        </item>
        <item>
          <p>
	    The sctp driver has been updated to work against newer
	    lksctp packages e.g 1.0.7 that uses the API spelling
	    change adaption -> adaptation. Older lksctp (1.0.6) still
	    work. The erlang API in gen_sctp.erl and inet_sctp.hrl
	    now spells 'adaptation' regardless of the underlying C
	    API.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-7120</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>The documentation has been updated so as to reflect
	    the last updates of the Erlang shell as well as the minor
	    modifications of the control sequence <c>p</c> of the
	    <c>io_lib</c> module.</p> <p>Superfluous empty lines have
	    been removed from code examples and from Erlang shell
	    examples.</p>
          <p>
	    Own Id: OTP-6944 Aux Id: OTP-6554, OTP-6911 </p>
        </item>
        <item>
	    <p><c>tuple_size/1</c> and <c>byte_size/1</c> have been
	    substituted for <c>size/1</c>.</p>
          <p>
	    Own Id: OTP-7009</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.12</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    A bug for raw files when reading 0 bytes returning 'eof'
	    instead of empty data has been corrected.</p>
          <p>
	    Own Id: OTP-6291 Aux Id: OTP-6967 </p>
        </item>
        <item>
          <p>
	    A bug in gen_udp:fdopen reported by David Baird and also
	    found by Dialyzer has been fixed.</p>
          <p>
	    Own Id: OTP-6836 Aux Id: OTP-6594 </p>
        </item>
        <item>
          <p>
	    Calling <c>error_logger:tty(true)</c> multiple times does
	    not give multiple error log printouts.</p>
          <p>
	    Own Id: OTP-6884 Aux Id: seq10767 </p>
        </item>
        <item>
	    <p>The global name server now ignores <c>nodeup</c>
	    messages when the command line flag <c>-connect_all
	    false</c> has been used. (Thanks to Trevor
	    Woollacott.)</p>
          <p>
	    Own Id: OTP-6931</p>
        </item>
        <item>
	    <p>file:write_file/3, file:write/2 and file:read/2 could
	    crash (contrary to documentation) for odd enough file
	    system problems, e.g write to full file system. This bug
	    has now been corrected.</p> <p>In this process the file
	    module has been rewritten to produce better error codes.
	    Posix error codes now originate from the OS file system
	    calls or are generated only for very similar causes (for
	    example 'enomem' is generated if a memory allocation
	    fails, and 'einval' is generated if the file handle in
	    Erlang is a file handle but currently invalid).</p>
	    <p>More Erlang-ish error codes are now generated. For
	    example <c>{error,badarg}</c> is now returned from
	    <c>file:close/1</c> if the argument is not of a file
	    handle type. See file(3).</p> <p>The possibility to write
	    a single byte using <c>file:write/2</c> instead of a list
	    or binary of one byte, contradictory to the
	    documentation, has been removed.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-6967 Aux Id: OTP-6597 OTP-6291 </p>
        </item>
        <item>
          <p>
	    Monitor messages produced by the system monitor
	    functionality, and garbage collect trace messages could
	    contain erroneous heap and/or stack sizes when the actual
	    heaps and/or stacks were huge.</p>
          <p>
	    As of erts version 5.6 the <c>large_heap</c> option to
	    <c>erlang:system_monitor/[1,2]</c> has been modified. The
	    monitor message is sent if the sum of the sizes of all
	    memory blocks allocated for all heap generations is equal
	    to or larger than the specified size. Previously the
	    monitor message was sent if the memory block allocated
	    for the youngest generation was equal to or larger than
	    the specified size.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-6974 Aux Id: seq10796 </p>
        </item>
        <item>
          <p>
            <c>inet:getopts/2</c> returned random values on Windows
            Vista.</p>
          <p>
            Own Id: OTP-7003</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
          <p>
	    Minor documentation corrections for file:pread/2 and
	    file:pread/3.</p>
          <p>
	    Own Id: OTP-6853</p>
        </item>
        <item>
          <p>
	    The deprecated functions <c>file:file_info/1</c>,
	    <c>init:get_flag/1</c>, <c>init:get_flags/0</c>, and
	    <c>init:get_args/0</c> have been removed.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-6886</p>
        </item>
        <item>
          <p>
	    Contract directives for modules in Kernel and STDLIB.</p>
          <p>
	    Own Id: OTP-6895</p>
        </item>
        <item>
	    <p>The functions io:columns/0, io:columns/1, io:rows/0
	    and io:rows/1 are added to allow the user to get
	    information about the terminal geometry. The shell takes
	    some advantage of this when formatting output. For
	    regular files and other io-devices where height and width
	    are not applicable, the functions return
	    {error,enotsup}.</p>
	    <p>Potential incompatibility: If one has written a custom
	    io-handler, the handler has to either return an error or
	    take care of io-requests regarding terminal height and
	    width. Usually that is no problem as io-handlers, as a
	    rule of thumb, should give an error reply when receiving
	    unknown io-requests, instead of crashing.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-6933</p>
        </item>
        <item>
          <p>
	    The undocumented and unsupported functions
	    <c>inet:ip_to_bytes/1</c>, <c>inet:ip4_to_bytes/1</c>,
	    <c>inet:ip6_to_bytes/1</c>, and
	    <c>inet:bytes_to_ip6/16</c> have been removed.</p>
          <p>
	    Own Id: OTP-6938</p>
        </item>
        <item>
          <p>
	    Added new checksum combine functions to <c>zlib</c>. And
	    fixed a bug in <c>zlib:deflate</c>. Thanks Matthew
	    Dempsky.</p>
          <p>
	    Own Id: OTP-6970</p>
        </item>
        <item>
          <p>
	    The <c>spawn_monitor/1</c> and <c>spawn_monitor/3</c> BIFs
	    are now auto-imported (i.e. they no longer need an
	    <c>erlang:</c> prefix).</p>
          <p>
	    Own Id: OTP-6975</p>
        </item>
        <item>
	    <p>All functions in the <c>code</c> module now fail with
	    an exception if they are called with obviously bad
	    arguments, such as a tuple when an atom was expected.
	    Some functions now also fail for undocumented argument
	    types (for instance, <c>ensure_loaded/1</c> now only
	    accepts an atom as documented; it used to accept a string
	    too).</p>
	    <p>Dialyzer will generally emit warnings for any
	    calls that use undocumented argument types. Even if the
	    call happens to still work in R12B, you should correct
	    your code. A future release will adhere to the
	    documentation.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-6983</p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.11.5.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
            The kernel parameter dist_auto_connect once could fail to
            block a node if massive parallel sends were issued
            during a transient failure of network communication</p>
          <p>
            Own Id: OTP-6893 Aux Id: seq10753 </p>
        </item>
      </list>
    </section>

</section>

<section><title>Kernel 2.11.5.1</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    The internal (rarely used) DNS resolver has been modified
	    to not use the domain search list when asked to resolve
	    an absolute name; a name with a terminating dot. There
	    was also a bug causing it to create malformed DNS queries
	    for absolute names that has been corrected, correction
	    suggested by Scott Lystig Fritchie. The code has also
	    been corrected to look up cached RRs in the same search
	    order as non-cached, now allows having the root domain
	    among the search domains, and can now actually do a zone
	    transfer request.</p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***</p>
          <p>
	    Own Id: OTP-6806 Aux Id: seq10714 EABln35459 </p>
        </item>
        <item>
          <p>
	    zlib:close/1 would leave an EXIT message in the message
	    queue if the calling process had the trap_exit flag
	    enabled.</p>
          <p>
	    Own Id: OTP-6811</p>
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p>The documentation of <c>process_flag(priority,
	    Level)</c> has been updated, see the <c>erlang(3)</c>
	    documentation. </p>
          <p>
	    Own Id: OTP-6745 Aux Id: OTP-6715 </p>
        </item>
      </list>
    </section>

</section>

  <section>
    <title>Kernel 2.11.5</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>The shell has been updated to fix the following flaws:
            Shell process exit left you with an unresponsive initial
            shell if not using oldshell. Starting a restricted shell
            with a nonexisting callback module resulted in a shell
            where no commands could be used, not even init:stop/0.
            Fun's could not be used as parameters to local shell
            functions (in shell_default or user_default) when
            restricted_shell was active.</p>
          <p>Own Id: OTP-6537</p>
        </item>
        <item>
          <p>The undocumented feature gen_tcp:fdopen/2 was broken
            in R11B-4. It is now fixed again.</p>
          <p>Own Id: OTP-6615</p>
        </item>
        <item>
          <p>Corrected cancellation of timers in three places in the
            inet_res module. (Problem found by Dialyzer.)</p>
          <p>Own Id: OTP-6676</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>Corrected protocol layer flue for socket options
            SO_LINGER, SO_SNDBUF and SO_RCVBUF, for SCTP.</p>
          <p>Own Id: OTP-6625 Aux Id: OTP-6336 </p>
        </item>
        <item>
          <p>The behaviour of the inet option {active,once} on peer
            close is improved and documented.</p>
          <p>Own Id: OTP-6681</p>
        </item>
        <item>
          <p>The inet option send_timeout for connection oriented
            sockets is added to allow for timeouts in communicating
            send requests to the underlying TCP stack.</p>
          <p>Own Id: OTP-6684 Aux Id: seq10637 OTP-6681 </p>
        </item>
        <item>
          <p>Minor Makefile changes.</p>
          <p>Own Id: OTP-6689 Aux Id: OTP-6742 </p>
        </item>
        <item>
          <p>The documentation of <c>process_flag(priority, Level)</c> has been updated, see the <c>erlang(3)</c>
            documentation. </p>
          <p>Own Id: OTP-6715</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11.4.2</title>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>process_flag/2 accepts the new flag <c>sensitive</c>.</p>
          <p>Own Id: OTP-6592 Aux Id: seq10555 </p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11.4.1</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>A bug in gen_udp:open that broke the 'fd' option has been
            fixed.</p>
          <p>Own Id: OTP-6594 Aux Id: seq10619 </p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11.4</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>Added a warning to the documentation for the
            <c>error_logger</c> functions <c>error_msg/1,2</c>,
            <c>warning_msg/1,2</c> and <c>info_msg/1,2</c> that
            calling these function with bad arguments can crash the
            standard event handler.</p>
          <p>Own Id: OTP-4575 Aux Id: seq7693 </p>
        </item>
        <item>
          <p>A bug in <c>inet_db</c> concerning getting the resolver
            option <c>retry</c> has been corrected.</p>
          <p>Own Id: OTP-6380 Aux Id: seq10534 </p>
        </item>
        <item>
          <p>Names registered by calling
            <c>global:register_name()</c> or
            <c>global:re_register_name()</c> were not always
            unregistered when the registering or registered process
            died. This bug has been fixed.</p>
          <p>Own Id: OTP-6428</p>
        </item>
        <item>
          <p>When setting the kernel configuration parameter
            <c>error_logger</c> to <c>false</c>, the documentation
            stated that "No error logger handler is installed". This
            is true, but error logging is not turned off, as the
            initial, primitive error logger event handler is kept,
            printing raw event messages to tty.</p>
          <p>Changing this behavior can be viewed as a backward
            incompatible change. Instead a new value <c>silent</c>
            for the configuration parameter has been added, which
            ensures that error logging is completely turned off.</p>
          <p>Own Id: OTP-6445</p>
        </item>
        <item>
          <p>Clarified the documentation for <c>code:lib_dir/1</c> and
            <c>code:priv_dir/1</c>. The functions traverse the names
            of the code path, they do not search the actual
            directories.</p>
          <p>Own Id: OTP-6466</p>
        </item>
        <item>
          <p><c>io:setopts</c> returned <c>{error,badarg}</c>, when
            called with only an <c>expand_fun</c> argument. (Thanks to
            igwan.)</p>
          <p>Own Id: OTP-6508</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>An interface towards the SCTP Socket API Extensions
            has been implemented.It is an Open Source patch courtesy
            of Serge Aleynikov and Leonid Timochouk. The Erlang code
            parts has been adapted by the OTP team, changing the
            Erlang API somewhat.</p>
          <p>The Erlang interface consists of the module
            <c>gen_sctp</c> and an include file
            <c>-include_lib("kernel/include/inet_sctp.hrl").</c> for
            option record definitions. The <c>gen_sctp</c> module is
            documented.</p>
          <p>The delivered Open Source patch, before the OTP team
            rewrites, was written according to
            <url href="http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13">http://tools.ietf.org/html/draft-ietf-tsvwg-sctpsocket-13</url>
            and was claimed to work fine, tested on Linux Fedora Core
            5.0 (kernel 2.6.15-2054 or later) and on Solaris 10 and
            11. The OTP team rewrites used the same standard document
            but might have accidentally broken some functionality. If
            so, it will soon be patched to working state. The tricky
            parts in C and the general design has essentially not
            changed. During the rewrites the code was hand tested on
            SuSE Linux Enterprise Server 10, and briefly on Solaris
            10. Feedbach on code and docs is very much
            appreciated.</p>
          <p>The SCTP interface is in beta state. It has only been
            hand tested and has no automatic test suites in OTP
            meaning everything is most certainly not tested. Socket
            active mode is broken. IPv6 is not tested. The documentation
            has been reworked due to the API changes,
            but has not been proofread after this.</p>
          <p>Thank you from the OTP team to Serge Aleynikov and
            Leonid Timochouk for a valuable contribution. We hope we
            have not messed it up too much.</p>
          <p>Own Id: OTP-6336</p>
        </item>
        <item>
          <p>A <c>{minor_version,Version}</c> option is now recognized
            by <c>term_to_binary/2</c>. {minor_version,1} will cause
            floats to be encoded in an exact and more space-efficient
            way compared to the previous encoding.</p>
          <p>Own Id: OTP-6434</p>
        </item>
        <item>
          <p>Monitoring of nodes has been improved. Now the following
            properties apply to
            <c>net_kernel:monitor_nodes/[1,2]</c>:</p>
          <list type="bulleted">
            <item><c>nodeup</c> messages will be delivered before delivery
             of any message from the remote node passed through the
             newly established connection. </item>
            <item><c>nodedown</c> messages will not be delivered until all
             messages from the remote node that have been passed
             through the connection have been delivered. </item>
            <item>Subscriptions can also be made before the
            <c>net_kernel</c> server has been started. </item>
          </list>
          <p>Own Id: OTP-6481</p>
        </item>
        <item>
          <p>Setting and getting socket options in a "raw" fashion is
            now allowed. Using this feature will inevitably produce
            non portable code, but will allow setting ang getting
            arbitrary uncommon options on TCP stacks that do have
            them.</p>
          <p>Own Id: OTP-6519</p>
        </item>
        <item>
          <p>Dialyzer warnings have been eliminated.</p>
          <p>Own Id: OTP-6523</p>
        </item>
        <item>
          <p>The documentation for <c>file:delete/1</c> and
            <c>file:set_cwd/1</c> has been updated to clarify what
            happens if the input arguments are of an incorrect type.</p>
          <p>Own Id: OTP-6535</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11.3.1</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>An erroneous packet size could be used for the first
            messages passed through a newly established connection
            between two Erlang nodes. This could cause messages to be
            discarded, or termination of the connection.</p>
          <p>Own Id: OTP-6473</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11.3</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>On Unix, the <c>unix:cmd/1</c> function could leave an
            'EXIT' message in the message queue for the calling
            process That problem was more likely to happen in an SMP
            emulator.</p>
          <p>Own Id: OTP-6368</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>More interfaces are added in erl_ddll, to support
            different usage scenarios.</p>
          <p>Own Id: OTP-6307 Aux Id: OTP-6234 </p>
        </item>
        <item>
          <p>Locks set by calling <c>global:set_lock()</c> were not
            always deleted when the locking process died. This bug
            has been fixed.</p>
          <p>Own Id: OTP-6341 Aux Id: seq10445 </p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11.2</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>Behavior in case of disappeared nodes when using he
            dist_auto_connect once got changed in R11B-1. The
            timeouts regarding normal distributed operations is now
            reverted to the old (pre R11B-1).</p>
          <p>Own Id: OTP-6258 Aux Id: OTP-6200, seq10449 </p>
        </item>
        <item>
          <p>Start-up problems for the internal process used by the
            <c>inet:gethostbyname()</c> functions were eliminated. If
            the internal process (<c>inet_gethost_native</c>) had not
            previously been started, and if several processes at the
            same time called one of the <c>inet:gethostbyname()</c>
            functions, the calls could fail.</p>
          <p>Own Id: OTP-6286</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>Code cleanup: the old internal obsolete file_server has
            been removed. It was only used when communicating with R7
            and older nodes.</p>
          <p>Own Id: OTP-6245</p>
        </item>
        <item>
          <p>Trying to open a non-existent or badly formed disk log
            no longer results in a crash report. In particular,
            <c>ets:file2tab/1</c> reports no error when the argument
            is not a well-formed disk log file. (The return value has
            not been changed, it is still an error tuple.)</p>
          <p>Own Id: OTP-6278 Aux Id: seq10421 </p>
        </item>
        <item>
          <p>There are new BIFs <c>erlang:spawn_monitor/1,3</c>,
            and the new option <c>monitor</c> for
            <c>spawn_opt/2,3,4,5</c>.</p>
          <p>The <c>observer_backend</c> module has been updated to
            handle the new BIFs.</p>
          <p>Own Id: OTP-6281</p>
        </item>
        <item>
          <p>To help Dialyzer find more bugs, many functions in the
            Kernel and STDLIB applications now only accept arguments
            of the type that is documented.</p>
          <p>For instance, the functions <c>lists:prefix/2</c> and
            <c>lists:suffix/2</c> are documented to only accept lists
            as their arguments, but they actually accepted anything
            and returned <c>false</c>. That has been changed so that
            the functions cause an exception if one or both arguments
            are not lists.</p>
          <p>Also, the <c>string:strip/3</c> function is documented
            to take a character argument that is a character to strip
            from one or both ends of the string. Given a list instead
            of a character, it used to do nothing, but will now cause
            an exception.</p>
          <p>Dialyzer will find most cases where those functions
            are passed arguments of the wrong type.</p>
          <p>*** POTENTIAL INCOMPATIBILITY ***</p>
          <p>Own Id: OTP-6295</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11.1.1</title>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>There is now an option read_packets for UDP sockets that
            sets the maximum number of UDP packets that will be read
            for each invocation of the socket driver.</p>
          <p>Own Id: OTP-6249 Aux Id: seq10452 </p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11.1</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>In R11B-0, the erl_ddll server process is always started.
            Despite that, the configuration parameter
            <c>start_ddll</c> for the Kernel application was still
            obeyed, which would cause the erl_ddll server to be
            started TWICE (and the system shutting down as a result).
            In this release, <c>start_ddll</c> is no longer used and
            its documentation has been removed.</p>
          <p>Own Id: OTP-6163</p>
        </item>
        <item>
          <p>The kernel option {dist_auto_connect,once} could block
            out nodes that had never been connected, causing
            persistent partitioning of networks. Furthermore, partial
            restarts of networks could cause inconsistent global name
            databases. Both problems are now solved.</p>
          <p>Own Id: OTP-6200 Aux Id: seq10377 </p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>Late arriving tcp_closed and udp_closed messages are now
            removed from the message queue of a process calling
            gen_tcp:close/1, gen_udp:close/1, and inet:close/1.</p>
          <p>Own Id: OTP-6197</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.11</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>When repairing a disk log with a corrupt index file
            (caused by for instance a hard disk failure) the old
            contents of the index file is kept unmodified. This will
            make repeated attempts to open the disk log fail every
            time.</p>
          <p>Own Id: OTP-5558 Aux Id: seq9823 </p>
        </item>
        <item>
          <p>Previously <c>unlink/1</c> and <c>erlang:demonitor/2</c>
            behaved completely asynchronous. This had one undesirable
            effect, though. You could never know when you were
            guaranteed <em>not</em> to be affected by a link that you
            had unlinked or a monitor that you had demonitored.</p>
          <p>The new behavior of <c>unlink/1</c> and
            <c>erlang:demonitor/2</c> can be viewed as two operations
            performed atomically. Asynchronously send an unlink
            signal or a demonitor signal, and ignore any future
            results of the link or monitor.</p>
          <p><em>NOTE</em>: This change can cause some obscure code
            to fail which previously did not. For example, the
            following code might hang:</p>
          <code type="none">
            Mon = erlang:monitor(process, Pid),
            %% ...
            exit(Pid, bang),
            erlang:demonitor(Mon),
            receive
                {'DOWN', Mon, process, Pid, _} -> ok
            %% We were previously guaranteed to get a down message
            %% (since we exited the process ourself), so we could
            %% in this case leave out:
            %% after 0 -> ok
            end,
          </code>
          <p>*** POTENTIAL INCOMPATIBILITY ***</p>
          <p>Own Id: OTP-5772</p>
        </item>
        <item>
          <p>The behavior when an application fails to start and
            possibly causes the runtime system to halt has been
            cleaned up, including fixing some minor bugs.</p>
          <p><c>application_controller</c> should now always terminate
            with a non-nested string, meaning the slogan in an
            <c>erl_crash.dump</c> should always be easy to read.</p>
          <p><c>init</c> now makes sure that the slogan passed to
            <c>erlang:halt/1</c> does not exceed the maximum allowed
            length.</p>
          <p>Redundant calls to <c>list_to_atom/1</c> has been removed
            from the primitive <c>error_logger</c> event handler.
            (Thanks Serge Aleynikov for pointing this out).</p>
          <p>The changes only affects the contents of the error
            messages and crashdump file slogan.</p>
          <p>Own Id: OTP-5964</p>
        </item>
        <item>
          <p>The <c>erl_ddll</c> server is now started when OTP is
            started and placed under the Kernel supervisor. This
            fixes several minor issues. It used to be started on
            demand.</p>
          <p>The documentation for the <c>start</c> and <c>stop</c>
            functions in the <c>erl_ddll</c> module has been removed,
            as those functions are not meant to be used by other
            applications.</p>
          <p>Furthermore, the <c>erl_ddll:stop/1</c> function no longer
            terminates the <c>erl_ddll</c> server, as that would
            terminate the entire runtime system.</p>
          <p>Own Id: OTP-6033</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>Removed some unused functions from
            <c>application_master</c>.</p>
          <p>Own Id: OTP-3889</p>
        </item>
        <item>
          <p>Global no longer allows the registration of a process
            under more than one name. If the old (buggy) behavior is
            desired the Kernel application variable
            <c>global_multi_name_action</c> can be given the value
            <c>allow</c>.</p>
          <p>Own Id: OTP-5640 Aux Id: OTP-5603</p>
        </item>
        <item>
          <p>The (slightly misleading) warnings that was shown when
            the <c>erlang.erl</c> file was compiled has been
            eliminated.</p>
          <p>Own Id: OTP-5947</p>
        </item>
        <item>
          <p>The <c>auth</c> module API is deprecated.</p>
          <p>Own Id: OTP-6037</p>
        </item>
        <item>
          <p>Added <c>erlang:demonitor/2</c>, making it possible to at
            the same time flush a received <c>'DOWN'</c> message, if
            there is one. See <c>erlang(3)</c>.</p>
          <p>Own Id: OTP-6100 Aux Id: OTP-5772 </p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.13</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>Large files (more than 2 GBytes) are now handled on
            Solaris 8.</p>
          <p>Own Id: OTP-5849 Aux Id: seq10157</p>
        </item>
        <item>
          <p>During startup, a garbage <c>{'DOWN', ...}</c> message was
            left by <c>inet_gethost_native</c>, that caused problems
            for the starting code server.</p>
          <p>Own Id: OTP-5978 Aux Id: OTP-5974</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p><c>global</c> now makes several attempts to connect nodes
            when maintaining the fully connected network. More than one
            attempt is sometimes needed under very heavy load.</p>
          <p>Own Id: OTP-5889</p>
        </item>
        <item>
          <p><c>erl_epmd</c> now explicitly sets the timeout to
            <c>infinity</c> when calling <c>gen_server:call</c>. The
            old timeout of 15 seconds could time out under very heavy
            load.</p>
          <p>Own Id: OTP-5959</p>
        </item>
        <item>
          <p>Corrected the start of code server to use reference-tagged
            tuples to ensure that an unexpected message sent to
            the parent process does not cause a halt of the system.
            Also removed the useless <c>start/*</c> functions in both
            <c>code.erl</c> and <c>code_server.erl</c> and no longer
            exports the <c>init</c> function from
            <c>code_server.erl</c>.</p>
          <p>Own Id: OTP-5974 Aux Id: seq10243, OTP-5978</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.12</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>A bug in <c>global</c> has been fixed: the locker process
            added <c>nonode@nohost</c> to the list of nodes to lock.
            This could happen before any nodes got known to the global
            name server. Depending on net configuration the symptom was
            a delay.</p>
          <p>Own Id: OTP-5792 Aux Id: OTP-5563</p>
        </item>
        <item>
          <p>If an <c>.app</c> file is missing, the error reason
            returned by <c>application:load/1</c> has been corrected
            to <c>{"no such file or directory", "FILE.app"}</c>,
            instead of the less informative <c>{"unknown POSIX error","FILE.app"}</c>.</p>
          <p>Own Id: OTP-5809</p>
        </item>
        <item>
          <p>Bug fixes: <c>disk_log:accessible_logs/0</c> no longer
            reports all <c>pg2</c> process groups as distributed disk
            logs; <c>disk_log:pid2name/1</c> did not recognize
            processes of distributed disk logs.</p>
          <p>Own Id: OTP-5810</p>
        </item>
        <item>
          <p>The functions <c>file:consult/1</c>,
            <c>file:path_consult/2</c>, <c>file:eval/1,2</c>,
            <c>file:path_eval/2,3</c>, <c>file:script/1,2</c>,
            <c>file:path_script/2,3</c> now return correct line
            numbers in error tuples.</p>
          <p>Own Id: OTP-5814</p>
        </item>
        <item>
          <p>If there were user-defined variables in the boot script,
            and their values were not provided using
            the <c>-boot_var</c> option, the emulator would refuse to
            start with a confusing error message. Corrected to show a
            clear, understandable message.</p>
          <p>The <c>prim_file</c> module was modified to not depend
            on the <c>lists</c> module, to make it possible to start
            the emulator using a user-defined loader. (Thanks to
            Martin Bjorklund.)</p>
          <p>Own Id: OTP-5828 Aux Id: seq10151</p>
        </item>
        <item>
          <p>Minor corrections in the description of open modes.
            (Thanks to Richard Carlsson.)</p>
          <p>Own Id: OTP-5856</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p><c>application_controller</c> now terminates with the
            actual error reason, instead of <c>shutdown</c>. This
            means that the crash dump now should be somewhat more
            informative, in the case where the runtime system is
            terminated due to an error in an application.</p>
          <p>Example: If the (permanent) application <c>app1</c> fails
            to start, the slogan now will be: "<c>Kernel pid terminated (application_controller) ({application_start_failure,app1,{shutdown, {app1,start,[normal,[]]}}})</c>"</p>
          <p>rather than the previous "<c>Kernel pid terminated (application_controller) (shutdown)</c>".</p>
          <p>Own Id: OTP-5811</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.11.1</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>Timers could sometimes timeout too early. This bug has
            now been fixed.</p>
          <p>Automatic cancellation of timers created by
            <c>erlang:send_after(Time,</c> pid(), Msg), and
            <c>erlang:start_timer(Time,</c> pid(), Msg) has been
            introduced.
            Timers created with the receiver specified by a pid, will
            automatically be cancelled when the receiver exits. For
            more information see the <c>erlang(3)</c> man page.</p>
          <p>In order to be able to maintain a larger amount of timers
            without increasing the maintenance cost, the internal
            timer wheel and bif timer table have been enlarged.</p>
          <p>Also a number of minor bif timer optimizations have been
            implemented.</p>
          <p>Own Id: OTP-5795 Aux Id: OTP-5090, seq8913, seq10139,
            OTP-5782</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>Documentation improvements:</p>
          <p>- documentation for <c>erlang:link/1</c> corrected</p>
          <p>- command line flag <c>-code_path_cache</c> added</p>
          <p>- <c>erl</c> command line flags clarifications</p>
          <p>- <c>net_kernel(3)</c> clarifications</p>
          <p>Own Id: OTP-5847</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.11</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>Several bug fixes and improvements in the global name
            registration facility (see <c>global(3)</c>):</p>
          <list type="bulleted">
            <item>the name resolving procedure did not always unlink no
             longer registered processes;</item>
            <item>the global name could sometimes hang when a
            <c>nodedown</c> was immediately followed by a
            <c>nodeup</c>;</item>
            <item>global names were not always unregistered when a node
             went down;</item>
            <item>it is now possible to set and delete locks at
             the same time as the global name server is resolving
             names--the handling of global locks has been separated
             from registration of global names;</item>
          </list>
          <p>As of this version, <c>global</c> no longer supports nodes
            running Erlang/OTP R7B or earlier.</p>
          <p>*** POTENTIAL INCOMPATIBILITY ***</p>
          <p>Own Id: OTP-5563</p>
        </item>
        <item>
          <p>The functions <c>global:set_lock/3</c> and
            <c>global:trans/4</c> now accept the value <c>0</c>
            (zero) of the <c>Retries</c> argument.</p>
          <p>Own Id: OTP-5737</p>
        </item>
        <item>
          <p>The <c>inet:getaddr(Addr, Family)</c> no longer
            validates the <c>Addr</c> argument if it is a 4 or 8
            tuple containing the IP address, except for the size of
            the tuple and that it contains integers in the correct
            range.</p>
          <p>The reason for the change is that validation could
            cause the following sequence of calls to fail:</p>
          <p><c>{ok,Addr} = inet:getaddr(localhost, inet6), gen_tcp:connect(Addr, 7, [inet6])</c></p>
          <p>Own Id: OTP-5743</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>The previously undocumented and UNSUPPORTED <c>zlib</c>
            module has been updated in an incompatible way and many
            bugs have been corrected. It is now also documented.</p>
          <p>*** POTENTIAL INCOMPATIBILITY ***</p>
          <p>Own Id: OTP-5715</p>
        </item>
        <item>
          <p>Added <c>application</c> interface functions
            <c>which_applications/1</c>, <c>set_env/4</c> and
            <c>unset_env/3</c>, which take an additional
            <c>Timeout</c> argument. To be used in situations where
            the standard gen_server timeout (5000ms) is not adequate.</p>
          <p>Own Id: OTP-5724 Aux Id: seq10083</p>
        </item>
        <item>
          <p>Improved documentation regarding synchronized start of
            applications with included applications (using start
            phases and <c>application_starter</c>).</p>
          <p>Own Id: OTP-5754</p>
        </item>
        <item>
          <p>New socket options <c>priority</c> and <c>tos</c> for
            platforms that support them (currently only Linux).</p>
          <p>Own Id: OTP-5756</p>
        </item>
        <item>
          <p>The global name server has been optimized when it comes
            to maintaining a fully connected network.</p>
          <p>Own Id: OTP-5770</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.10.1</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>The native resolver has gotten an control API for
            extended debugging and soft restart. It is:
            <c>inet_gethost_native:control(Control)</c>            <br></br>
<c>Control = {debug_level,Level} | soft_restart</c>            <br></br>
<c>Level = integer() in the range 0-4</c>.</p>
          <p>Own Id: OTP-5751 Aux Id: EABln25013</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.10</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>If several processes (at the same node) simultaneously
            tried to start the same distributed application, this
            could lead to <c>application:start</c> returning an
            erroneous value, or even hang.</p>
          <p>Own Id: OTP-5606 Aux Id: seq9838</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>The manual pages for most of the Kernel and some of
            the STDLIB modules have been updated, in particular
            regarding type definitions.</p>
          <p>The documentation of the return value for
            <c>erts:info/1</c> has been corrected.</p>
          <p>The documentation for <c>erlang:statistics/1</c> now
            lists all possible arguments.</p>
          <p>Own Id: OTP-5360</p>
        </item>
        <item>
          <p>When the native resolver fails a <c>gethostbyaddr</c>
            lookup, <c>nxdomain</c> should be returned. There should be
            no attempt to fallback on a routine that succeeds if only
            the syntax of the IP address is valid. This has been fixed.</p>
          <p>Own Id: OTP-5598 Aux Id: OTP-5576</p>
        </item>
        <item>
          <p>Replaced some tuple funs with the new <c>fun M:F/A</c>
            construct.</p>
          <p>The high-order functions in the <c>lists</c> module no
            longer accept bad funs under any circumstances.
            '<c>lists:map(bad_fun, [])</c>' used to return
            '<c>[]</c>' but now causes an exception.</p>
          <p>Unused, broken compatibility code in the <c>ets</c>
            module was removed. (Thanks to Dialyzer.)</p>
          <p>Eliminated 5 discrepancies found by Dialyzer in the
            Appmon application.</p>
          <p>Own Id: OTP-5633</p>
        </item>
        <item>
          <p>The possibility to have comments following the list of
            tuples in a config file (file specified with
            the <c>-config</c> flag) has been added.</p>
          <p>Own Id: OTP-5661 Aux Id: seq10003</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.9</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>'<c>erl -config sys.config</c>' would fail to start if
            the <c>sys.config</c> file did not contain any whitespace
            at all after the dot. (Thanks to Anders Nygren.)</p>
          <p>Own Id: OTP-5543</p>
        </item>
        <item>
          <p>A bug regarding tcp sockets which results in hanging
            <c>gen_tcp:send/2</c> has been corrected. To encounter
            this bug you needed one process that read from a socket,
            one that wrote more date than the reader read out so the
            sender got suspended, and then the reader closed the
            socket. (Reported and diagnosed by Alexey Shchepin.)</p>
          <p>Corrected a bug in the (undocumented and unsupported)
            option <c>{packet,http}</c> for <c>gen_tcp.</c>
            (Thanks to Claes Wikstrom and Luke Gorrie.)</p>
          <p>Updated the documentation regarding the second argument to
            <c>gen_tcp:recv/2</c>, the <c>Length</c> to receive.</p>
          <p>Own Id: OTP-5582 Aux Id: seq9839</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>At startup, the Erlang resolver hosts table was used to
            look up the name of the local (and possibly stand alone)
            host. This was incorrect. The configured resolver method
            is now used for this purpose.</p>
          <p>Own Id: OTP-5393</p>
        </item>
        <item>
          <p>The <c>erlang:port_info/1</c> BIF is now documented. Minor
            corrections of the documentation for
            <c>erlang:port_info/2</c>.</p>
          <p>Added a note to the documentation of the <c>math</c> module
            that all functions are not available on all platforms.</p>
          <p>Added more information about the <c>+c</c> option in
            the <c>erl</c> man page in the ERTS documentation.</p>
          <p>Own Id: OTP-5555</p>
        </item>
        <item>
          <p>The new <c>fun M:F/A</c> construct creates a fun that
            refers to the latest version of <c>M:F/A.</c> This syntax is
            meant to replace tuple funs <c>{M,F}</c> which have many
            problems.</p>
          <p>The new type test <c>is_function(Fun,A)</c> (which may be
            used in guards) test whether <c>Fun</c> is a fun that can be
            applied with <c>A</c> arguments. (Currently, <c>Fun</c> can
            also be a tuple fun.)</p>
          <p>Own Id: OTP-5584</p>
        </item>
        <item>
          <p>According to the documentation <c>global</c> implements
            the equivalent of <c>register/2</c>, which returns
            <c>badarg</c> if a process is already registered. As it
            turns out there is no check in <c>global</c> if a process is
            registered under more than one name. If some process is
            accidentally or by design given several names, it is
            possible that the name registry becomes inconsistent due
            to the way the resolve function is called when name
            clashes are discovered (see <c>register_name/3</c> in
            <c>global(3)</c>).</p>
          <p>In OTP R11B <c>global</c> will not allow the registration of
            a process under more than one name. To help finding code
            where <c>no</c> will be returned, a Kernel application
            variable, <c>global_multi_name_action</c>, is hereby
            introduced. Depending on its value (<c>info</c>,
            <c>warning</c>, or <c>error</c>), messages are sent to
            the error logger when <c>global</c> discovers that some
            process is given more than one name. The variable only
            affects the node where it is defined.</p>
          <p>Own Id: OTP-5603</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.8</title>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>In case of a DNS lookup loop, <c>inet_db:getbyname</c> ends
            up building an infinite list. This has been fixed.</p>
          <p>Own Id: OTP-5449</p>
        </item>
        <item>
          <p>When doing an <c>inet6</c> name lookup on an IPv4 address
            it was possible to get an address on IPv4 format back. This
            has been corrected. Some other minor inconsistencies
            regarding IPv6 name lookup have also been corrected.</p>
          <p>Own Id: OTP-5576</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.7</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>Under certain circumstances the <c>net_kernel</c> could
            emit spurious nodedown messages. This bug has been fixed.</p>
          <p>Own Id: OTP-5396</p>
        </item>
        <item>
          <p>Removed description of the <c>keep_zombies</c>
            configuration parameter in the <c>kernel</c> man page.</p>
          <p>Own Id: OTP-5497</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>Eliminated Dialyzer warnings (caused by dead code) in
            the <c>init</c> and <c>prim_file</c> modules.</p>
          <p>Own Id: OTP-5496</p>
        </item>
        <item>
          <p><c>inet_config</c> now also checks the environment variable
            <c>ERL_INETRC</c> for a possible user configuration file.
            See the ERTS User's Guide for details.</p>
          <p>Own Id: OTP-5512</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.6</title>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>The <c>c</c> option for the <c>+B</c> flag has been
            introduced which makes it possible to use Ctrl-C
            (Ctrl-Break on Windows) to interrupt the shell process
            rather than to invoke the emulator break handler. All new
            <c>+B</c> options are also supported on Windows (werl) as
            of now. Furthermore, Ctrl-C on Windows has now been
            reserved for copying text (what Ctrl-Ins was used for
            previously). Ctrl-Break should be used for break handling.
            Lastly, the documentation of the system flags has been
            updated.</p>
          <p>Own Id: OTP-5388</p>
        </item>
        <item>
          <p>The possibility to start the Erlang shell in parallel
            with the rest of the system was reintroduced for backwards
            compatibility in STDLIB 1.13.1. The flag to be used for
            this is now called <c>async_shell_start</c> and has
            been documented. New shells started from the JCL menu are
            not synchronized with <c>init</c> anymore. This makes it
            possible to start a new shell (e.g. for debugging purposes)
            even if the initial shell has not come up.</p>
          <p>Own Id: OTP-5406 Aux Id: OTP-5218</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.5</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>Documentation for <c>erlang:binary_to_float/1</c> deleted.
            The BIF itself was removed several releases ago.</p>
          <p>Updated documentation for <c>apply/2</c> and
            <c>apply/3</c>.</p>
          <p>Own Id: OTP-5391</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p><c>net_kernel:monitor_nodes/2</c> which takes a flag and an
            option list has been added. By use of
            <c>net_kernel:monitor_nodes/2</c> one can subscribe for
            <c>nodeup/nodedown</c> messages with extra information. It
            is now possible to monitor hidden nodes, and get
            <c>nodedown</c> reason. See the <c>net_kernel(3)</c>
            documentation for more information.</p>
          <p>Own Id: OTP-5374</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.4</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>The application master for an application now terminates
            the application faster, which reduces the risk for
            timeouts in other parts of the system.</p>
          <p>Own Id: OTP-5363 Aux Id: EABln19084</p>
        </item>
        <item>
          <p>A BIF <c>erlang:raise/3</c> has been added. See the manual
            for details. It is intended for internal system programming
            only, advanced error handling.</p>
          <p>Own Id: OTP-5376 Aux Id: OTP-5257</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.3</title>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>With the <c>-eval</c> flag (<c>erl -eval Expr</c>), an
            arbitrary expression can be evaluated during system
            initialization. This is documented in <c>init(3)</c>.</p>
          <p>Own Id: OTP-5260</p>
        </item>
        <item>
          <p>The unsupported and undocumented modules <c>socks5</c>,
            <c>socks5_auth</c>, <c>socks5_tcp</c>, and <c>socks5_udp</c>
            have been removed.</p>
          <p>Own Id: OTP-5266</p>
        </item>
      </list>
    </section>
  </section>

  <section>
    <title>Kernel 2.10.1</title>

    <section>
      <title>Fixed Bugs and Malfunctions</title>
      <list type="bulleted">
        <item>
          <p>The Pman 'trace shell' functionality was broken and has
            now been fixed. Furthermore, Pman could not correctly
            find the pid of the active shell if more than one shell
            process was running on the node. This has also been
            corrected.</p>
          <p>Own Id: OTP-5191</p>
        </item>
        <item>
          <p>The documentation for the <c>auth:open/1</c> function
            which no longer exists has been removed. (Thanks to
            Miguel Barreiro.)</p>
          <p>Own Id: OTP-5208</p>
        </item>
        <item>
          <p>Corrected the <c>crc32/3</c> function in the undocumented
            and unsupported <c>zlib</c> module.</p>
          <p>Own Id: OTP-5227</p>
        </item>
      </list>
    </section>

    <section>
      <title>Improvements and New Features</title>
      <list type="bulleted">
        <item>
          <p>You can now start Erlang with the <c>-rsh</c> flag which
            gives you a remote initial shell instead of a local one.
            Example:</p>
          <pre>
            erl -sname this_node -rsh other_node@other_host
          </pre>
          <p>Own Id: OTP-5210</p>
        </item>
        <item>
          <p>If <c>/etc/hosts</c> specified two hosts with the same IP
            address (on separate lines), only the last host would be
            registered by inet_db during inet configuration. This has
            been corrected now so that both aliases are registered
            with the same IP address.</p>
          <p>Own Id: OTP-5212 Aux Id: seq7128</p>
        </item>
        <item>
          <p>The documentation for BIFs that take I/O lists have
            been clarified. Those are <c>list_to_binary/1</c>,
            <c>port_command/2</c>, <c>port_control/3</c>.</p>
          <p>Documentation for all <c>is_*</c> BIFs (such as
            <c>is_atom/1</c>) has been added.</p>
          <p>Removed the documentation for
            <c>erlang:float_to_binary/2</c> which was removed from
            the run-time system several releases ago.</p>
          <p>Own Id: OTP-5222</p>
        </item>
      </list>
    </section>
  </section>
</chapter>
